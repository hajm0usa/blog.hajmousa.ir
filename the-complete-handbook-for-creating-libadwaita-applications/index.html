<!doctype html>
<html class="not-ready lg:text-base overflow-y-scroll scroll-pt-14 scheme-light dark:scheme-dark" lang="en">

<head prefix="og: https://ogp.me/ns# article: https://ogp.me/ns/article#">
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <meta name="generator" content="Zola v0.21.0" />
  <title>The Complete Handbook for Creating Libadwaita Applications | HajMousa;s DevBlog</title>
  <meta property="og:site_name" content="HajMousa;s DevBlog" />
  <meta property="og:title" content="The Complete Handbook for Creating Libadwaita Applications" />
  <meta property="og:url" content="https://blog.hajmousa.ir/the-complete-handbook-for-creating-libadwaita-applications/" />
  <link rel="canonical" href="https://blog.hajmousa.ir/the-complete-handbook-for-creating-libadwaita-applications/" />
  <meta property="og:type" content="article" />
  <meta property="article:published_time" content="2025-12-27T00:00:00+00:00" />
  <link rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/deed" />
  <!-- Begin Head inject -->
  
  <!-- End Head inject -->
  <link rel="stylesheet" href="https://blog.hajmousa.ir/main.min.css?h=80ece4d015818ae93fff" />
  <link rel="stylesheet" href="https://blog.hajmousa.ir/icons.css?h=7dd5ab449fa840fc01e2" />
  <style>:root{--bg: #f4f4f5; --header: #e4e4e7;} :root.dark{--bg: #18181b; --header: #27272a;}</style>
  <link rel="icon" type="image/x-icon" href="https://blog.hajmousa.ir/favicon.ico" />
  <link rel="apple-touch-icon" type="image/png" href="https://blog.hajmousa.ir/apple-touch-icon.png?h=58bee300054c5308feb3" />
  <link rel="icon" type="image/png" href="https://blog.hajmousa.ir/android-icon.png?h=8d80ec95446bd2c36826" />
  <script src="https://blog.hajmousa.ir/js/zola-theme.min.js?h=26975b146d48e6ff41af"></script>
  <!-- Begin Head End inject -->
  
  <!-- End Head End inject -->
</head>

<body class="text-black duration-100 ease-out dark:text-white">
  <!-- Header -->
<header class="blur-header fixed top-0 z-40 mx-auto min-h-13 w-full">
  <div class="mx-auto w-full max-w-4xl p-2.5 lg:flex lg:justify-between">
    <div class="flex justify-between">
      <div class="flex items-center min-h-8 overflow-hidden">
        <a title="Go to home page [Alt + !]" accesskey="!"
          href="https://blog.hajmousa.ir/"
          class="text-2xl font-semibold truncate">HajMousa;s DevBlog</a>
        <button type="button" title="Switch color scheme [Alt + $]" accesskey="$"
          onclick="window.zolaTheme.color.toggle();"
          class="btn-dark ml-4 h-6 w-6 shrink-0 cursor-pointer text-[0px]
            bg-center bg-no-repeat bg-cover [background-image:var(--icons-btn-dark,url(icons/btn-dark.svg))]
            dark:[background-image:var(--icons-btn-light,url(icons/btn-light.svg))] dark:invert"
        ></button>
        <button type="button" title="Open search [Alt + /]" accesskey="/"
          onclick="window.zolaTheme.search.toggle();"
          class="btn-search ml-4 h-6 w-6 shrink-0 cursor-pointer text-[0px]
            bg-center bg-no-repeat bg-cover [background-image:var(--icons-search,url(icons/search.svg))] dark:invert"
        ></button>
      </div>
    </div>
  </div>
</header>

  <!-- Begin Body Start inject -->
  
  <!-- End Body Start inject -->
  <main class="prose prose-neutral dark:prose-invert prose-pre:rounded-lg prose-img:rounded-lg
    relative mx-auto min-h-[calc(100vh-4rem)] max-w-3xl px-4 pt-28 lg:pt-32 pb-12 wrap-break-word">
      <!-- Search -->
<div id="linkita-search-wrapper" class="hidden">
  <ul id="linkita-search-results"></ul>
</div>
<script>window.zolaTheme.search.init({ scripts: ["https://blog.hajmousa.ir/elasticlunr.min.js", "https://blog.hajmousa.ir/search_index.en.js"], arg: { w: "#linkita-search-wrapper", r: "#linkita-search-results" } });</script>

    
<article>
  <!-- Begin Page Start inject -->
  
  <!-- End Page Start inject -->

  <header class="mb-16">
    <h1 class="my-0! pb-2.5">The Complete Handbook for Creating Libadwaita Applications</h1>
    <!-- Page Info -->
<div class="text-sm antialiased opacity-80"><time
      datetime="2025-12-27T00:00:00+00:00">2025-12-27</time><span
        class="middot"></span><time
    datetime="PT1H11M0S">71&nbsp;min</time><span
      class="middot"></span>
</div>

  </header>
  <!-- TOC -->
<nav class="block-bg prose-a:secondary-link mb-12 rounded-lg p-2 text-lg">
  <details>
    <summary class="select-none py-0.5 lg:py-1 pl-3.5" title="[Alt + =]" accesskey="=">
      <span class="cursor-pointer ml-0.5">Table of Contents</span>
    </summary>
    <ul class="ps-8">
      <li class="ps-0.5">
        <a class="no-underline hover:underline" href="#a-comprehensive-guide-for-gnome-development">A Comprehensive Guide for GNOME Development</a>
      </li>
      <li class="ps-0.5">
        <a class="no-underline hover:underline" href="#table-of-contents">Table of Contents</a>
      </li>
      <li class="ps-0.5">
        <a class="no-underline hover:underline" href="#chapter-1-introduction-to-libadwaita">Chapter 1: Introduction to Libadwaita</a>
        <ul>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#what-is-libadwaita">What is Libadwaita?</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#why-libadwaita">Why Libadwaita?</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#language-choices-rust-vs-python">Language Choices: Rust vs Python</a>
          </li>
        </ul>
      </li>
      <li class="ps-0.5">
        <a class="no-underline hover:underline" href="#chapter-2-setting-up-your-development-environment-on-arch-linux">Chapter 2: Setting Up Your Development Environment on Arch Linux</a>
        <ul>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#installing-dependencies">Installing Dependencies</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#development-tools-overview">Development Tools Overview</a>
          </li>
        </ul>
      </li>
      <li class="ps-0.5">
        <a class="no-underline hover:underline" href="#chapter-3-gnome-human-interface-guidelines-hig">Chapter 3: GNOME Human Interface Guidelines (HIG)</a>
        <ul>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#core-principles">Core Principles</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#visual-design-standards">Visual Design Standards</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#application-structure-patterns">Application Structure Patterns</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#content-organization">Content Organization</a>
          </li>
        </ul>
      </li>
      <li class="ps-0.5">
        <a class="no-underline hover:underline" href="#chapter-4-project-structure-and-standards">Chapter 4: Project Structure and Standards</a>
        <ul>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#rust-project-structure">Rust Project Structure</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#python-project-structure">Python Project Structure</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#application-naming-standards">Application Naming Standards</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#build-system-meson">Build System: Meson</a>
          </li>
        </ul>
      </li>
      <li class="ps-0.5">
        <a class="no-underline hover:underline" href="#chapter-5-basic-application-framework">Chapter 5: Basic Application Framework</a>
        <ul>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#minimal-rust-application">Minimal Rust Application</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#minimal-python-application">Minimal Python Application</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#gsettings-schema">GSettings Schema</a>
          </li>
        </ul>
      </li>
      <li class="ps-0.5">
        <a class="no-underline hover:underline" href="#chapter-6-simple-widgets">Chapter 6: Simple Widgets</a>
        <ul>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#understanding-widget-basics">Understanding Widget Basics</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#adwstatuspage">AdwStatusPage</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#adwtoastoverlay-and-adwtoast">AdwToastOverlay and AdwToast</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#adwbanner">AdwBanner</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#adwactionrow">AdwActionRow</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#adwexpanderrow">AdwExpanderRow</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#adwcomborow">AdwComboRow</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#adwentryrow">AdwEntryRow</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#adwspinrow">AdwSpinRow</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#adwswitchrow">AdwSwitchRow</a>
          </li>
        </ul>
      </li>
      <li class="ps-0.5">
        <a class="no-underline hover:underline" href="#chapter-7-complex-widgets">Chapter 7: Complex Widgets</a>
        <ul>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#adwnavigationsplitview">AdwNavigationSplitView</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#adwnavigationview">AdwNavigationView</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#adwviewstack-and-adwviewswitcher">AdwViewStack and AdwViewSwitcher</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#adwtabbar-and-adwtabview">AdwTabBar and AdwTabView</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#adwcarousel">AdwCarousel</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#adwpreferenceswindow">AdwPreferencesWindow</a>
          </li>
        </ul>
      </li>
      <li class="ps-0.5">
        <a class="no-underline hover:underline" href="#chapter-8-layouts-and-containers">Chapter 8: Layouts and Containers</a>
        <ul>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#adwclamp">AdwClamp</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#adwbin">AdwBin</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#adwtoolbarview">AdwToolbarView</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#adwoverlaysplitview">AdwOverlaySplitView</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#gtk-box-and-grid">GTK Box and Grid</a>
          </li>
        </ul>
      </li>
      <li class="ps-0.5">
        <a class="no-underline hover:underline" href="#chapter-9-application-patterns">Chapter 9: Application Patterns</a>
        <ul>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#dialogs-and-alerts">Dialogs and Alerts</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#message-dialogs">Message Dialogs</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#file-choosers">File Choosers</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#application-menu">Application Menu</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#search">Search</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#keyboard-shortcuts">Keyboard Shortcuts</a>
          </li>
        </ul>
      </li>
      <li class="ps-0.5">
        <a class="no-underline hover:underline" href="#chapter-10-system-integration">Chapter 10: System Integration</a>
        <ul>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#d-bus-communication">D-Bus Communication</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#notifications">Notifications</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#portal-integration">Portal Integration</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#background-tasks">Background Tasks</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#system-settings-integration">System Settings Integration</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#custom-uri-schemes">Custom URI Schemes</a>
          </li>
        </ul>
      </li>
      <li class="ps-0.5">
        <a class="no-underline hover:underline" href="#chapter-11-data-management">Chapter 11: Data Management</a>
        <ul>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#gsettings-preferences">GSettings (Preferences)</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#json-configuration-files">JSON Configuration Files</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#sqlite-database">SQLite Database</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#file-management">File Management</a>
          </li>
        </ul>
      </li>
      <li class="ps-0.5">
        <a class="no-underline hover:underline" href="#chapter-12-advanced-features">Chapter 12: Advanced Features</a>
        <ul>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#custom-widgets">Custom Widgets</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#drag-and-drop">Drag and Drop</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#animations">Animations</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#custom-css-styling">Custom CSS Styling</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#accessibility">Accessibility</a>
          </li>
        </ul>
      </li>
      <li class="ps-0.5">
        <a class="no-underline hover:underline" href="#chapter-13-packaging-and-distribution">Chapter 13: Packaging and Distribution</a>
        <ul>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#desktop-file">Desktop File</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#metainfo-file">MetaInfo File</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#flatpak-manifest">Flatpak Manifest</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#building-on-arch-linux">Building on Arch Linux</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#pkgbuild-for-arch-linux">PKGBUILD for Arch Linux</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#building-flatpak">Building Flatpak</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#continuous-integration">Continuous Integration</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#translation-support">Translation Support</a>
          </li>
        </ul>
      </li>
      <li class="ps-0.5">
        <a class="no-underline hover:underline" href="#conclusion">Conclusion</a>
        <ul>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#best-practices-summary">Best Practices Summary</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#resources">Resources</a>
          </li>
          <li class="ps-0.5">
            <a class="no-underline hover:underline" href="#community">Community</a>
          </li>
        </ul>
      </li>
    </ul>
  </details>
</nav>

  <!-- Content -->
  <section><h2 id="a-comprehensive-guide-for-gnome-development">A Comprehensive Guide for GNOME Development</h2>
<h2 id="table-of-contents">Table of Contents</h2>
<ol>
<li>Introduction to Libadwaita</li>
<li>Setting Up Your Development Environment on Arch Linux</li>
<li>GNOME Human Interface Guidelines (HIG)</li>
<li>Project Structure and Standards</li>
<li>Basic Application Framework</li>
<li>Simple Widgets</li>
<li>Complex Widgets</li>
<li>Layouts and Containers</li>
<li>Application Patterns</li>
<li>System Integration</li>
<li>Data Management</li>
<li>Advanced Features</li>
<li>Packaging and Distribution</li>
</ol>
<h2 id="chapter-1-introduction-to-libadwaita">Chapter 1: Introduction to Libadwaita</h2>
<h3 id="what-is-libadwaita">What is Libadwaita?</h3>
<p>Libadwaita is GNOME's official library for building modern, consistent applications that integrate seamlessly with the GNOME desktop environment. It provides:</p>
<ul>
<li><strong>Adaptive widgets</strong> that work across different form factors (desktop, tablet, mobile)</li>
<li><strong>Modern design patterns</strong> following GNOME's design philosophy</li>
<li><strong>Consistent styling</strong> that matches the GNOME Shell and other core applications</li>
<li><strong>Animation support</strong> for smooth, polished user experiences</li>
<li><strong>Dark mode support</strong> built-in and automatic</li>
<li><strong>Accessibility features</strong> by default</li>
</ul>
<h3 id="why-libadwaita">Why Libadwaita?</h3>
<p>Traditional GTK4 applications can look dated or inconsistent with modern GNOME. Libadwaita solves this by:</p>
<ol>
<li><strong>Enforcing consistency</strong>: Applications automatically match the system theme</li>
<li><strong>Simplifying development</strong>: Common patterns are pre-built</li>
<li><strong>Future-proofing</strong>: Your app will evolve with GNOME's design language</li>
<li><strong>Improving accessibility</strong>: Built-in support for screen readers and keyboard navigation</li>
</ol>
<h3 id="language-choices-rust-vs-python">Language Choices: Rust vs Python</h3>
<p><strong>Rust</strong> offers:</p>
<ul>
<li>Memory safety without garbage collection</li>
<li>Excellent performance</li>
<li>Strong type system</li>
<li>Growing ecosystem with gtk-rs</li>
</ul>
<p><strong>Python</strong> offers:</p>
<ul>
<li>Rapid prototyping</li>
<li>Easier learning curve</li>
<li>Immediate execution (no compilation)</li>
<li>Extensive libraries for data processing</li>
</ul>
<p>Both languages have full Libadwaita bindings and are officially supported by GNOME.</p>
<h2 id="chapter-2-setting-up-your-development-environment-on-arch-linux">Chapter 2: Setting Up Your Development Environment on Arch Linux</h2>
<h3 id="installing-dependencies">Installing Dependencies</h3>
<p>Arch Linux provides excellent GNOME development tools through its repositories.</p>
<h4 id="for-rust-development">For Rust Development:</h4>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#65737e;"># Install base development tools
</span><span style="color:#bf616a;">sudo</span><span> pacman</span><span style="color:#bf616a;"> -S</span><span> base-devel git
</span><span>
</span><span style="color:#65737e;"># Install Rust
</span><span style="color:#bf616a;">sudo</span><span> pacman</span><span style="color:#bf616a;"> -S</span><span> rust rust-analyzer
</span><span>
</span><span style="color:#65737e;"># Install GTK4 and Libadwaita
</span><span style="color:#bf616a;">sudo</span><span> pacman</span><span style="color:#bf616a;"> -S</span><span> gtk4 libadwaita
</span><span>
</span><span style="color:#65737e;"># Install development tools
</span><span style="color:#bf616a;">sudo</span><span> pacman</span><span style="color:#bf616a;"> -S</span><span> gnome-builder devhelp d-spy blueprint-compiler
</span><span>
</span><span style="color:#65737e;"># Optional: Install Flatpak for testing
</span><span style="color:#bf616a;">sudo</span><span> pacman</span><span style="color:#bf616a;"> -S</span><span> flatpak flatpak-builder
</span><span style="color:#bf616a;">flatpak</span><span> remote-add</span><span style="color:#bf616a;"> --if-not-exists</span><span> flathub https://flathub.org/repo/flathub.flatpakrepo
</span><span style="color:#bf616a;">flatpak</span><span> install flathub org.gnome.Sdk//47 org.gnome.Platform//47
</span></code></pre>
<h4 id="for-python-development">For Python Development:</h4>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#65737e;"># Install Python and GTK bindings
</span><span style="color:#bf616a;">sudo</span><span> pacman</span><span style="color:#bf616a;"> -S</span><span> python python-gobject gtk4 libadwaita
</span><span>
</span><span style="color:#65737e;"># Install development tools
</span><span style="color:#bf616a;">sudo</span><span> pacman</span><span style="color:#bf616a;"> -S</span><span> gnome-builder python-pip
</span><span>
</span><span style="color:#65737e;"># Install additional Python tools
</span><span style="color:#bf616a;">pip</span><span> install</span><span style="color:#bf616a;"> --user</span><span> pygobject-stubs
</span></code></pre>
<h3 id="development-tools-overview">Development Tools Overview</h3>
<p><strong>GNOME Builder</strong>: The official IDE for GNOME development</p>
<ul>
<li>Integrated project templates</li>
<li>Built-in GTK Inspector</li>
<li>Automatic code completion</li>
<li>Direct Flatpak support</li>
</ul>
<p><strong>DevHelp</strong>: Documentation browser for GTK, Libadwaita, and other libraries</p>
<p><strong>D-Spy</strong>: D-Bus debugger for testing system integration</p>
<p><strong>Blueprint</strong>: High-level markup language for UI definitions (compiles to GTK's UI format)</p>
<h2 id="chapter-3-gnome-human-interface-guidelines-hig">Chapter 3: GNOME Human Interface Guidelines (HIG)</h2>
<h3 id="core-principles">Core Principles</h3>
<p>The GNOME HIG defines how applications should look, feel, and behave. Understanding these principles is crucial for creating authentic GNOME applications.</p>
<h4 id="1-simplicity-first">1. <strong>Simplicity First</strong></h4>
<p>GNOME applications should be focused and uncluttered:</p>
<ul>
<li>Avoid overwhelming users with options</li>
<li>Present features progressively (basic → advanced)</li>
<li>Use clear, concise language</li>
<li>Hide complexity behind sensible defaults</li>
</ul>
<p><strong>Example</strong>: Instead of showing 20 export options upfront, provide a simple "Export" button with an "Advanced Options" expander.</p>
<h4 id="2-consistency">2. <strong>Consistency</strong></h4>
<p>Users should feel at home across all GNOME applications:</p>
<ul>
<li>Use standard widgets for common actions</li>
<li>Follow established patterns (e.g., HeaderBar layout)</li>
<li>Maintain consistent terminology</li>
<li>Use the same keyboard shortcuts as other apps</li>
</ul>
<h4 id="3-respect-user-agency">3. <strong>Respect User Agency</strong></h4>
<p>Never surprise or mislead users:</p>
<ul>
<li>Clearly communicate what actions will do</li>
<li>Make destructive actions obvious and reversible</li>
<li>Save work automatically when possible</li>
<li>Avoid modal dialogs except for critical decisions</li>
</ul>
<h4 id="4-accessibility-by-default">4. <strong>Accessibility by Default</strong></h4>
<p>Every user should be able to use your application:</p>
<ul>
<li>Proper focus management</li>
<li>Keyboard navigation for all functions</li>
<li>Screen reader support via proper labels</li>
<li>Sufficient color contrast</li>
<li>Clear, resizable text</li>
</ul>
<h3 id="visual-design-standards">Visual Design Standards</h3>
<h4 id="typography">Typography</h4>
<p>Libadwaita uses the system font with specific size classes:</p>
<ul>
<li><strong>Display</strong>: Large, prominent text (32pt+)</li>
<li><strong>Title 1-4</strong>: Hierarchical headings (20pt → 15pt)</li>
<li><strong>Heading</strong>: Section headers (15pt, bold)</li>
<li><strong>Body</strong>: Regular text (11pt)</li>
<li><strong>Caption</strong>: Secondary information (9pt)</li>
</ul>
<h4 id="spacing">Spacing</h4>
<p>GNOME uses a consistent 6-pixel spacing grid:</p>
<ul>
<li><strong>6px</strong>: Minimum spacing between related elements</li>
<li><strong>12px</strong>: Standard spacing between widgets</li>
<li><strong>18px</strong>: Spacing between groups</li>
<li><strong>24px</strong>: Large spacing between sections</li>
<li><strong>32px</strong>: Maximum spacing for emphasis</li>
</ul>
<h4 id="color-semantics">Color Semantics</h4>
<p>Colors have specific meanings in GNOME:</p>
<ul>
<li><strong>Blue (Accent)</strong>: Primary actions, selection</li>
<li><strong>Green (Success)</strong>: Completed actions, positive status</li>
<li><strong>Yellow (Warning)</strong>: Caution, non-critical issues</li>
<li><strong>Red (Error)</strong>: Errors, destructive actions</li>
<li><strong>Purple</strong>: In-progress operations</li>
</ul>
<p>These colors automatically adapt to dark mode.</p>
<h3 id="application-structure-patterns">Application Structure Patterns</h3>
<h4 id="the-headerbar">The HeaderBar</h4>
<p>Every GNOME application should use an <code>AdwHeaderBar</code>:</p>
<pre style="background-color:#2b303b;color:#c0c5ce;"><code><span>┌─────────────────────────────────────────┐
</span><span>│ [←] Application Name         [≡] [Menu] │ HeaderBar
</span><span>├─────────────────────────────────────────┤
</span><span>│                                         │
</span><span>│                                         │
</span><span>│          Content Area                   │
</span><span>│                                         │
</span><span>│                                         │
</span><span>└─────────────────────────────────────────┘
</span></code></pre>
<p><strong>Rules</strong>:</p>
<ul>
<li>Title in the center (hidden on narrow screens)</li>
<li>Navigation on the left (back button, split view button)</li>
<li>Primary actions on the right</li>
<li>Menu button always rightmost</li>
</ul>
<h4 id="navigation-patterns">Navigation Patterns</h4>
<p><strong>1. Flat Navigation</strong> (single view):</p>
<pre style="background-color:#2b303b;color:#c0c5ce;"><code><span>HeaderBar with title
</span><span>→ Content
</span></code></pre>
<p><strong>2. Back Navigation</strong> (hierarchical):</p>
<pre style="background-color:#2b303b;color:#c0c5ce;"><code><span>HeaderBar with back button
</span><span>→ Stack/Navigation View
</span></code></pre>
<p><strong>3. Sidebar Navigation</strong> (multiple sections):</p>
<pre style="background-color:#2b303b;color:#c0c5ce;"><code><span>AdwNavigationSplitView
</span><span>├─ Sidebar (categories)
</span><span>└─ Content
</span></code></pre>
<p><strong>4. Tabbed Navigation</strong> (parallel sections):</p>
<pre style="background-color:#2b303b;color:#c0c5ce;"><code><span>AdwTabBar or AdwViewSwitcher
</span><span>→ Multiple views
</span></code></pre>
<h3 id="content-organization">Content Organization</h3>
<h4 id="preference-windows">Preference Windows</h4>
<p>Use <code>AdwPreferencesWindow</code> for settings:</p>
<pre style="background-color:#2b303b;color:#c0c5ce;"><code><span>┌─────────────────────────────────────────┐
</span><span>│ [×] Preferences                         │
</span><span>├─────────┬───────────────────────────────┤
</span><span>│ General │ ┌───────────────────────────┐ │
</span><span>│ Privacy │ │ Section Title              │ │
</span><span>│ About   │ │                           │ │
</span><span>│         │ │ ○ Radio Option 1          │ │
</span><span>│         │ │ ○ Radio Option 2          │ │
</span><span>│         │ │                           │ │
</span><span>│         │ │ Another Section           │ │
</span><span>│         │ │ [Toggle Switch]    ─┐    │ │
</span><span>│         │ │                           │ │
</span><span>│         │ └───────────────────────────┘ │
</span><span>└─────────┴───────────────────────────────┘
</span></code></pre>
<p>Features:</p>
<ul>
<li>Sidebar for categories (auto-hides on mobile)</li>
<li>Grouped preferences with clear sections</li>
<li>Descriptive subtitles for complex options</li>
<li>Search functionality (automatic)</li>
</ul>
<h4 id="lists-and-content">Lists and Content</h4>
<p>Use <code>AdwBin</code> and proper list patterns:</p>
<p><strong>Do</strong>:</p>
<ul>
<li>Use <code>GtkListView</code> for large, dynamic lists</li>
<li>Use <code>AdwPreferencesGroup</code> for settings-style lists</li>
<li>Provide search/filter for long lists</li>
<li>Show empty states with helpful messages</li>
</ul>
<p><strong>Don't</strong>:</p>
<ul>
<li>Use <code>GtkTreeView</code> (deprecated pattern)</li>
<li>Show empty white screens</li>
<li>Mix different list styles in one view</li>
</ul>
<h2 id="chapter-4-project-structure-and-standards">Chapter 4: Project Structure and Standards</h2>
<h3 id="rust-project-structure">Rust Project Structure</h3>
<p>A typical Rust Libadwaita application follows this structure:</p>
<pre style="background-color:#2b303b;color:#c0c5ce;"><code><span>my-app/
</span><span>├── Cargo.toml
</span><span>├── data/
</span><span>│   ├── resources.gresource.xml
</span><span>│   ├── com.example.MyApp.desktop.in
</span><span>│   ├── com.example.MyApp.metainfo.xml.in
</span><span>│   ├── com.example.MyApp.gschema.xml
</span><span>│   └── icons/
</span><span>│       └── com.example.MyApp.svg
</span><span>├── src/
</span><span>│   ├── main.rs
</span><span>│   ├── application.rs
</span><span>│   ├── window.rs
</span><span>│   ├── widgets/
</span><span>│   │   ├── mod.rs
</span><span>│   │   └── custom_widget.rs
</span><span>│   └── config.rs
</span><span>├── po/
</span><span>│   ├── POTFILES.in
</span><span>│   └── LINGUAS
</span><span>└── build.rs
</span></code></pre>
<h4 id="cargo-toml-template">Cargo.toml Template</h4>
<pre data-lang="toml" style="background-color:#2b303b;color:#c0c5ce;" class="language-toml "><code class="language-toml" data-lang="toml"><span>[package]
</span><span style="color:#bf616a;">name </span><span>= &quot;</span><span style="color:#a3be8c;">my-app</span><span>&quot;
</span><span style="color:#bf616a;">version </span><span>= &quot;</span><span style="color:#a3be8c;">0.1.0</span><span>&quot;
</span><span style="color:#bf616a;">edition </span><span>= &quot;</span><span style="color:#a3be8c;">2021</span><span>&quot;
</span><span style="color:#bf616a;">authors </span><span>= [&quot;</span><span style="color:#a3be8c;">Your Name &lt;your.email@example.com&gt;</span><span>&quot;]
</span><span>
</span><span>[dependencies]
</span><span style="color:#bf616a;">gtk </span><span>= { </span><span style="color:#bf616a;">version </span><span>= &quot;</span><span style="color:#a3be8c;">0.9</span><span>&quot;, </span><span style="color:#bf616a;">package </span><span>= &quot;</span><span style="color:#a3be8c;">gtk4</span><span>&quot;, </span><span style="color:#bf616a;">features </span><span>= [&quot;</span><span style="color:#a3be8c;">v4_12</span><span>&quot;] }
</span><span style="color:#bf616a;">adwaita </span><span>= { </span><span style="color:#bf616a;">version </span><span>= &quot;</span><span style="color:#a3be8c;">0.7</span><span>&quot;, </span><span style="color:#bf616a;">package </span><span>= &quot;</span><span style="color:#a3be8c;">libadwaita</span><span>&quot;, </span><span style="color:#bf616a;">features </span><span>= [&quot;</span><span style="color:#a3be8c;">v1_6</span><span>&quot;] }
</span><span style="color:#bf616a;">glib </span><span>= &quot;</span><span style="color:#a3be8c;">0.20</span><span>&quot;
</span><span style="color:#bf616a;">gio </span><span>= &quot;</span><span style="color:#a3be8c;">0.20</span><span>&quot;
</span><span style="color:#bf616a;">log </span><span>= &quot;</span><span style="color:#a3be8c;">0.4</span><span>&quot;
</span><span style="color:#bf616a;">env_logger </span><span>= &quot;</span><span style="color:#a3be8c;">0.11</span><span>&quot;
</span><span style="color:#bf616a;">serde </span><span>= { </span><span style="color:#bf616a;">version </span><span>= &quot;</span><span style="color:#a3be8c;">1.0</span><span>&quot;, </span><span style="color:#bf616a;">features </span><span>= [&quot;</span><span style="color:#a3be8c;">derive</span><span>&quot;] }
</span><span style="color:#bf616a;">serde_json </span><span>= &quot;</span><span style="color:#a3be8c;">1.0</span><span>&quot;
</span><span>
</span><span>[build-dependencies]
</span><span style="color:#bf616a;">glib-build-tools </span><span>= &quot;</span><span style="color:#a3be8c;">0.20</span><span>&quot;
</span><span>
</span><span>[profile.release]
</span><span style="color:#bf616a;">lto </span><span>= </span><span style="color:#d08770;">true
</span><span style="color:#bf616a;">codegen-units </span><span>= </span><span style="color:#d08770;">1
</span><span style="color:#bf616a;">opt-level </span><span>= </span><span style="color:#d08770;">3
</span><span style="color:#bf616a;">strip </span><span>= </span><span style="color:#d08770;">true
</span></code></pre>
<h3 id="python-project-structure">Python Project Structure</h3>
<p>A Python Libadwaita application structure:</p>
<pre style="background-color:#2b303b;color:#c0c5ce;"><code><span>my-app/
</span><span>├── setup.py
</span><span>├── data/
</span><span>│   ├── com.example.MyApp.desktop.in
</span><span>│   ├── com.example.MyApp.metainfo.xml.in
</span><span>│   ├── com.example.MyApp.gschema.xml
</span><span>│   ├── resources.gresource.xml
</span><span>│   └── ui/
</span><span>│       └── window.ui
</span><span>├── src/
</span><span>│   ├── __init__.py
</span><span>│   ├── main.py
</span><span>│   ├── application.py
</span><span>│   ├── window.py
</span><span>│   └── widgets/
</span><span>│       ├── __init__.py
</span><span>│       └── custom_widget.py
</span><span>├── po/
</span><span>│   ├── POTFILES.in
</span><span>│   └── LINGUAS
</span><span>└── meson.build
</span></code></pre>
<h3 id="application-naming-standards">Application Naming Standards</h3>
<p>GNOME applications follow reverse-DNS naming:</p>
<p><strong>Application ID</strong>: <code>com.example.MyApp</code></p>
<ul>
<li>Must be unique</li>
<li>Use lowercase with capitals for app name</li>
<li>Match across all files (desktop, metainfo, GSchema)</li>
</ul>
<p><strong>File naming</strong>:</p>
<ul>
<li>Desktop file: <code>com.example.MyApp.desktop</code></li>
<li>Metainfo: <code>com.example.MyApp.metainfo.xml</code></li>
<li>GSettings schema: <code>com.example.MyApp.gschema.xml</code></li>
<li>Icon: <code>com.example.MyApp.svg</code> (or .png)</li>
<li>D-Bus name: <code>com.example.MyApp</code></li>
</ul>
<h3 id="build-system-meson">Build System: Meson</h3>
<p>GNOME projects use Meson for building. Example <code>meson.build</code>:</p>
<pre data-lang="meson" style="background-color:#2b303b;color:#c0c5ce;" class="language-meson "><code class="language-meson" data-lang="meson"><span>project(&#39;my-app&#39;,
</span><span>  version: &#39;0.1.0&#39;,
</span><span>  meson_version: &#39;&gt;= 0.59.0&#39;,
</span><span>)
</span><span>
</span><span>i18n = import(&#39;i18n&#39;)
</span><span>gnome = import(&#39;gnome&#39;)
</span><span>
</span><span># Configuration
</span><span>conf = configuration_data()
</span><span>conf.set_quoted(&#39;APP_ID&#39;, &#39;com.example.MyApp&#39;)
</span><span>conf.set_quoted(&#39;VERSION&#39;, meson.project_version())
</span><span>conf.set_quoted(&#39;GETTEXT_PACKAGE&#39;, &#39;my-app&#39;)
</span><span>conf.set_quoted(&#39;LOCALEDIR&#39;, get_option(&#39;prefix&#39;) / get_option(&#39;localedir&#39;))
</span><span>
</span><span># Subdirectories
</span><span>subdir(&#39;data&#39;)
</span><span>subdir(&#39;src&#39;)
</span><span>subdir(&#39;po&#39;)
</span><span>
</span><span># Post-install scripts
</span><span>gnome.post_install(
</span><span>  gtk_update_icon_cache: true,
</span><span>  glib_compile_schemas: true,
</span><span>  update_desktop_database: true,
</span><span>)
</span></code></pre>
<h2 id="chapter-5-basic-application-framework">Chapter 5: Basic Application Framework</h2>
<h3 id="minimal-rust-application">Minimal Rust Application</h3>
<p>Let's build a complete minimal application in Rust:</p>
<h4 id="main-rs">main.rs</h4>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">mod </span><span>application;
</span><span style="color:#b48ead;">mod </span><span>config;
</span><span style="color:#b48ead;">mod </span><span>window;
</span><span>
</span><span style="color:#b48ead;">use </span><span>application::MyApplication;
</span><span style="color:#b48ead;">use </span><span>config::{</span><span style="color:#d08770;">APP_ID</span><span>, </span><span style="color:#d08770;">PKGDATADIR</span><span>, </span><span style="color:#d08770;">PROFILE</span><span>, </span><span style="color:#d08770;">VERSION</span><span>};
</span><span style="color:#b48ead;">use </span><span>gettextrs::{gettext, LocaleCategory};
</span><span style="color:#b48ead;">use </span><span>gtk::prelude::*;
</span><span style="color:#b48ead;">use </span><span>gtk::{gio, glib};
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">main</span><span>() -&gt; glib::ExitCode {
</span><span>    </span><span style="color:#65737e;">// Initialize logger
</span><span>    env_logger::init();
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Initialize translations
</span><span>    gettextrs::setlocale(LocaleCategory::LcAll, &quot;&quot;);
</span><span>    gettextrs::bindtextdomain(&quot;</span><span style="color:#a3be8c;">my-app</span><span>&quot;, </span><span style="color:#d08770;">LOCALEDIR</span><span>).</span><span style="color:#96b5b4;">expect</span><span>(&quot;</span><span style="color:#a3be8c;">Failed to bind text domain</span><span>&quot;);
</span><span>    gettextrs::textdomain(&quot;</span><span style="color:#a3be8c;">my-app</span><span>&quot;).</span><span style="color:#96b5b4;">expect</span><span>(&quot;</span><span style="color:#a3be8c;">Failed to set text domain</span><span>&quot;);
</span><span>
</span><span>    </span><span style="color:#65737e;">// Load resources
</span><span>    </span><span style="color:#b48ead;">let</span><span> resources = gio::Resource::load(</span><span style="color:#d08770;">PKGDATADIR</span><span>.</span><span style="color:#96b5b4;">to_owned</span><span>() + &quot;</span><span style="color:#a3be8c;">/my-app.gresource</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">expect</span><span>(&quot;</span><span style="color:#a3be8c;">Could not load resources</span><span>&quot;);
</span><span>    gio::resources_register(&amp;resources);
</span><span>
</span><span>    </span><span style="color:#65737e;">// Create application
</span><span>    </span><span style="color:#b48ead;">let</span><span> app = MyApplication::new(</span><span style="color:#d08770;">APP_ID</span><span>, &amp;gio::ApplicationFlags::default());
</span><span>    
</span><span>    app.</span><span style="color:#96b5b4;">run</span><span>()
</span><span>}
</span></code></pre>
<h4 id="config-rs">config.rs</h4>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">pub const </span><span style="color:#d08770;">APP_ID</span><span>: &amp;</span><span style="color:#b48ead;">str </span><span>= &quot;</span><span style="color:#a3be8c;">com.example.MyApp</span><span>&quot;;
</span><span style="color:#b48ead;">pub const </span><span style="color:#d08770;">VERSION</span><span>: &amp;</span><span style="color:#b48ead;">str </span><span>= env!(&quot;</span><span style="color:#a3be8c;">CARGO_PKG_VERSION</span><span>&quot;);
</span><span style="color:#b48ead;">pub const </span><span style="color:#d08770;">PKGDATADIR</span><span>: &amp;</span><span style="color:#b48ead;">str </span><span>= &quot;</span><span style="color:#a3be8c;">/usr/share/my-app</span><span>&quot;;
</span><span style="color:#b48ead;">pub const </span><span style="color:#d08770;">LOCALEDIR</span><span>: &amp;</span><span style="color:#b48ead;">str </span><span>= &quot;</span><span style="color:#a3be8c;">/usr/share/locale</span><span>&quot;;
</span><span style="color:#b48ead;">pub const </span><span style="color:#d08770;">PROFILE</span><span>: &amp;</span><span style="color:#b48ead;">str </span><span>= &quot;</span><span style="color:#a3be8c;">development</span><span>&quot;; </span><span style="color:#65737e;">// or &quot;release&quot;
</span></code></pre>
<h4 id="application-rs">application.rs</h4>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">use </span><span>adwaita::prelude::*;
</span><span style="color:#b48ead;">use </span><span>adwaita::subclass::prelude::*;
</span><span style="color:#b48ead;">use </span><span>gtk::{gio, glib};
</span><span>
</span><span style="color:#b48ead;">use crate</span><span>::config::</span><span style="color:#d08770;">VERSION</span><span>;
</span><span style="color:#b48ead;">use crate</span><span>::window::MyApplicationWindow;
</span><span>
</span><span style="color:#b48ead;">mod </span><span>imp {
</span><span>    </span><span style="color:#b48ead;">use super</span><span>::*;
</span><span>
</span><span>    #[</span><span style="color:#bf616a;">derive</span><span>(Debug, Default)]
</span><span>    </span><span style="color:#b48ead;">pub struct </span><span>MyApplication {}
</span><span>
</span><span>    #[</span><span style="color:#bf616a;">glib</span><span>::</span><span style="color:#bf616a;">object_subclass</span><span>]
</span><span>    </span><span style="color:#b48ead;">impl </span><span>ObjectSubclass </span><span style="color:#b48ead;">for </span><span>MyApplication {
</span><span>        </span><span style="color:#b48ead;">const </span><span style="color:#d08770;">NAME</span><span>: &amp;</span><span style="color:#b48ead;">&#39;static str </span><span>= &quot;</span><span style="color:#a3be8c;">MyApplication</span><span>&quot;;
</span><span>        </span><span style="color:#b48ead;">type </span><span>Type = </span><span style="color:#b48ead;">super</span><span>::MyApplication;
</span><span>        </span><span style="color:#b48ead;">type </span><span>ParentType = adwaita::Application;
</span><span>    }
</span><span>
</span><span>    </span><span style="color:#b48ead;">impl </span><span>ObjectImpl </span><span style="color:#b48ead;">for </span><span>MyApplication {
</span><span>        </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">constructed</span><span>(&amp;</span><span style="color:#bf616a;">self</span><span>) {
</span><span>            </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#96b5b4;">parent_constructed</span><span>();
</span><span>            </span><span style="color:#b48ead;">let</span><span> obj = </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#96b5b4;">obj</span><span>();
</span><span>            obj.</span><span style="color:#96b5b4;">setup_gactions</span><span>();
</span><span>            obj.</span><span style="color:#96b5b4;">set_accels_for_action</span><span>(&quot;</span><span style="color:#a3be8c;">app.quit</span><span>&quot;, &amp;[&quot;</span><span style="color:#a3be8c;">&lt;primary&gt;q</span><span>&quot;]);
</span><span>            obj.</span><span style="color:#96b5b4;">set_accels_for_action</span><span>(&quot;</span><span style="color:#a3be8c;">window.close</span><span>&quot;, &amp;[&quot;</span><span style="color:#a3be8c;">&lt;primary&gt;w</span><span>&quot;]);
</span><span>        }
</span><span>    }
</span><span>
</span><span>    </span><span style="color:#b48ead;">impl </span><span>ApplicationImpl </span><span style="color:#b48ead;">for </span><span>MyApplication {
</span><span>        </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">activate</span><span>(&amp;</span><span style="color:#bf616a;">self</span><span>) {
</span><span>            </span><span style="color:#b48ead;">let</span><span> application = </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#96b5b4;">obj</span><span>();
</span><span>            
</span><span>            </span><span style="color:#65737e;">// Get or create window
</span><span>            </span><span style="color:#b48ead;">let</span><span> window = </span><span style="color:#b48ead;">if let </span><span>Some(window) = application.</span><span style="color:#96b5b4;">active_window</span><span>() {
</span><span>                window
</span><span>            } </span><span style="color:#b48ead;">else </span><span>{
</span><span>                </span><span style="color:#b48ead;">let</span><span> window = MyApplicationWindow::new(&amp;*application);
</span><span>                window.</span><span style="color:#96b5b4;">upcast</span><span>()
</span><span>            };
</span><span>
</span><span>            window.</span><span style="color:#96b5b4;">present</span><span>();
</span><span>        }
</span><span>    }
</span><span>
</span><span>    </span><span style="color:#b48ead;">impl </span><span>GtkApplicationImpl </span><span style="color:#b48ead;">for </span><span>MyApplication {}
</span><span>    </span><span style="color:#b48ead;">impl </span><span>AdwApplicationImpl </span><span style="color:#b48ead;">for </span><span>MyApplication {}
</span><span>}
</span><span>
</span><span>glib::wrapper! {
</span><span>    </span><span style="color:#b48ead;">pub struct </span><span>MyApplication(ObjectSubclass&lt;imp::MyApplication&gt;)
</span><span>        @extends gio::Application, gtk::Application, adwaita::Application,
</span><span>        @implements gio::ActionGroup, gio::ActionMap;
</span><span>}
</span><span>
</span><span style="color:#b48ead;">impl </span><span>MyApplication {
</span><span>    </span><span style="color:#b48ead;">pub fn </span><span style="color:#8fa1b3;">new</span><span>(</span><span style="color:#bf616a;">application_id</span><span>: &amp;</span><span style="color:#b48ead;">str</span><span>, </span><span style="color:#bf616a;">flags</span><span>: &amp;gio::ApplicationFlags) -&gt; </span><span style="color:#b48ead;">Self </span><span>{
</span><span>        glib::Object::builder()
</span><span>            .</span><span style="color:#96b5b4;">property</span><span>(&quot;</span><span style="color:#a3be8c;">application-id</span><span>&quot;, application_id)
</span><span>            .</span><span style="color:#96b5b4;">property</span><span>(&quot;</span><span style="color:#a3be8c;">flags</span><span>&quot;, flags)
</span><span>            .</span><span style="color:#96b5b4;">build</span><span>()
</span><span>    }
</span><span>
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">setup_gactions</span><span>(&amp;</span><span style="color:#bf616a;">self</span><span>) {
</span><span>        </span><span style="color:#65737e;">// Quit action
</span><span>        </span><span style="color:#b48ead;">let</span><span> quit_action = gio::SimpleAction::new(&quot;</span><span style="color:#a3be8c;">quit</span><span>&quot;, None);
</span><span>        quit_action.</span><span style="color:#96b5b4;">connect_activate</span><span>(glib::clone!(
</span><span>            #[</span><span style="color:#bf616a;">weak</span><span>(rename_to = app)]
</span><span>            </span><span style="color:#bf616a;">self</span><span>,
</span><span>            </span><span style="color:#b48ead;">move </span><span>|_, _| app.</span><span style="color:#96b5b4;">quit</span><span>()
</span><span>        ));
</span><span>        </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#96b5b4;">add_action</span><span>(&amp;quit_action);
</span><span>
</span><span>        </span><span style="color:#65737e;">// About action
</span><span>        </span><span style="color:#b48ead;">let</span><span> about_action = gio::SimpleAction::new(&quot;</span><span style="color:#a3be8c;">about</span><span>&quot;, None);
</span><span>        about_action.</span><span style="color:#96b5b4;">connect_activate</span><span>(glib::clone!(
</span><span>            #[</span><span style="color:#bf616a;">weak</span><span>(rename_to = app)]
</span><span>            </span><span style="color:#bf616a;">self</span><span>,
</span><span>            </span><span style="color:#b48ead;">move </span><span>|_, _| app.</span><span style="color:#96b5b4;">show_about</span><span>()
</span><span>        ));
</span><span>        </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#96b5b4;">add_action</span><span>(&amp;about_action);
</span><span>    }
</span><span>
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">show_about</span><span>(&amp;</span><span style="color:#bf616a;">self</span><span>) {
</span><span>        </span><span style="color:#b48ead;">let</span><span> window = </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#96b5b4;">active_window</span><span>().</span><span style="color:#96b5b4;">unwrap</span><span>();
</span><span>        </span><span style="color:#b48ead;">let</span><span> about = adwaita::AboutDialog::builder()
</span><span>            .</span><span style="color:#96b5b4;">application_name</span><span>(&quot;</span><span style="color:#a3be8c;">My Application</span><span>&quot;)
</span><span>            .</span><span style="color:#96b5b4;">application_icon</span><span>(&quot;</span><span style="color:#a3be8c;">com.example.MyApp</span><span>&quot;)
</span><span>            .</span><span style="color:#96b5b4;">developer_name</span><span>(&quot;</span><span style="color:#a3be8c;">Your Name</span><span>&quot;)
</span><span>            .</span><span style="color:#96b5b4;">version</span><span>(</span><span style="color:#d08770;">VERSION</span><span>)
</span><span>            .</span><span style="color:#96b5b4;">developers</span><span>(vec![&quot;</span><span style="color:#a3be8c;">Your Name &lt;your.email@example.com&gt;</span><span>&quot;])
</span><span>            .</span><span style="color:#96b5b4;">copyright</span><span>(&quot;</span><span style="color:#a3be8c;">© 2025 Your Name</span><span>&quot;)
</span><span>            .</span><span style="color:#96b5b4;">license_type</span><span>(gtk::License::Gpl30)
</span><span>            .</span><span style="color:#96b5b4;">website</span><span>(&quot;</span><span style="color:#a3be8c;">https://example.com</span><span>&quot;)
</span><span>            .</span><span style="color:#96b5b4;">issue_url</span><span>(&quot;</span><span style="color:#a3be8c;">https://github.com/example/my-app/issues</span><span>&quot;)
</span><span>            .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>
</span><span>        about.</span><span style="color:#96b5b4;">present</span><span>(Some(&amp;window));
</span><span>    }
</span><span>}
</span></code></pre>
<h4 id="window-rs">window.rs</h4>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">use </span><span>adwaita::prelude::*;
</span><span style="color:#b48ead;">use </span><span>adwaita::subclass::prelude::*;
</span><span style="color:#b48ead;">use </span><span>gtk::{gio, glib};
</span><span>
</span><span style="color:#b48ead;">mod </span><span>imp {
</span><span>    </span><span style="color:#b48ead;">use super</span><span>::*;
</span><span>
</span><span>    #[</span><span style="color:#bf616a;">derive</span><span>(Debug, Default, gtk::CompositeTemplate)]
</span><span>    #[</span><span style="color:#bf616a;">template</span><span>(resource = &quot;</span><span style="color:#a3be8c;">/com/example/MyApp/window.ui</span><span>&quot;)]
</span><span>    </span><span style="color:#b48ead;">pub struct </span><span>MyApplicationWindow {
</span><span>        #[</span><span style="color:#bf616a;">template_child</span><span>]
</span><span>        </span><span style="color:#b48ead;">pub </span><span style="color:#bf616a;">label</span><span>: TemplateChild&lt;gtk::Label&gt;,
</span><span>    }
</span><span>
</span><span>    #[</span><span style="color:#bf616a;">glib</span><span>::</span><span style="color:#bf616a;">object_subclass</span><span>]
</span><span>    </span><span style="color:#b48ead;">impl </span><span>ObjectSubclass </span><span style="color:#b48ead;">for </span><span>MyApplicationWindow {
</span><span>        </span><span style="color:#b48ead;">const </span><span style="color:#d08770;">NAME</span><span>: &amp;</span><span style="color:#b48ead;">&#39;static str </span><span>= &quot;</span><span style="color:#a3be8c;">MyApplicationWindow</span><span>&quot;;
</span><span>        </span><span style="color:#b48ead;">type </span><span>Type = </span><span style="color:#b48ead;">super</span><span>::MyApplicationWindow;
</span><span>        </span><span style="color:#b48ead;">type </span><span>ParentType = adwaita::ApplicationWindow;
</span><span>
</span><span>        </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">class_init</span><span>(</span><span style="color:#bf616a;">klass</span><span>: &amp;</span><span style="color:#b48ead;">mut Self::</span><span>Class) {
</span><span>            klass.</span><span style="color:#96b5b4;">bind_template</span><span>();
</span><span>        }
</span><span>
</span><span>        </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">instance_init</span><span>(</span><span style="color:#bf616a;">obj</span><span>: &amp;glib::subclass::InitializingObject&lt;</span><span style="color:#b48ead;">Self</span><span>&gt;) {
</span><span>            obj.</span><span style="color:#96b5b4;">init_template</span><span>();
</span><span>        }
</span><span>    }
</span><span>
</span><span>    </span><span style="color:#b48ead;">impl </span><span>ObjectImpl </span><span style="color:#b48ead;">for </span><span>MyApplicationWindow {
</span><span>        </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">constructed</span><span>(&amp;</span><span style="color:#bf616a;">self</span><span>) {
</span><span>            </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#96b5b4;">parent_constructed</span><span>();
</span><span>            
</span><span>            </span><span style="color:#65737e;">// Load window state
</span><span>            </span><span style="color:#b48ead;">let</span><span> obj = </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#96b5b4;">obj</span><span>();
</span><span>            obj.</span><span style="color:#96b5b4;">load_window_size</span><span>();
</span><span>        }
</span><span>    }
</span><span>
</span><span>    </span><span style="color:#b48ead;">impl </span><span>WidgetImpl </span><span style="color:#b48ead;">for </span><span>MyApplicationWindow {}
</span><span>    </span><span style="color:#b48ead;">impl </span><span>WindowImpl </span><span style="color:#b48ead;">for </span><span>MyApplicationWindow {
</span><span>        </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">close_request</span><span>(&amp;</span><span style="color:#bf616a;">self</span><span>) -&gt; glib::Propagation {
</span><span>            </span><span style="color:#65737e;">// Save window state
</span><span>            </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#96b5b4;">obj</span><span>().</span><span style="color:#96b5b4;">save_window_size</span><span>();
</span><span>            </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#96b5b4;">parent_close_request</span><span>()
</span><span>        }
</span><span>    }
</span><span>    </span><span style="color:#b48ead;">impl </span><span>ApplicationWindowImpl </span><span style="color:#b48ead;">for </span><span>MyApplicationWindow {}
</span><span>    </span><span style="color:#b48ead;">impl </span><span>AdwApplicationWindowImpl </span><span style="color:#b48ead;">for </span><span>MyApplicationWindow {}
</span><span>}
</span><span>
</span><span>glib::wrapper! {
</span><span>    </span><span style="color:#b48ead;">pub struct </span><span>MyApplicationWindow(ObjectSubclass&lt;imp::MyApplicationWindow&gt;)
</span><span>        @extends gtk::Widget, gtk::Window, gtk::ApplicationWindow, adwaita::ApplicationWindow,
</span><span>        @implements gio::ActionGroup, gio::ActionMap;
</span><span>}
</span><span>
</span><span style="color:#b48ead;">impl </span><span>MyApplicationWindow {
</span><span>    </span><span style="color:#b48ead;">pub fn </span><span style="color:#8fa1b3;">new</span><span>(</span><span style="color:#bf616a;">app</span><span>: &amp;adwaita::Application) -&gt; </span><span style="color:#b48ead;">Self </span><span>{
</span><span>        glib::Object::builder()
</span><span>            .</span><span style="color:#96b5b4;">property</span><span>(&quot;</span><span style="color:#a3be8c;">application</span><span>&quot;, app)
</span><span>            .</span><span style="color:#96b5b4;">build</span><span>()
</span><span>    }
</span><span>
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">save_window_size</span><span>(&amp;</span><span style="color:#bf616a;">self</span><span>) {
</span><span>        </span><span style="color:#b48ead;">let</span><span> settings = gio::Settings::new(&quot;</span><span style="color:#a3be8c;">com.example.MyApp</span><span>&quot;);
</span><span>        </span><span style="color:#b48ead;">let</span><span> size = </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#96b5b4;">default_size</span><span>();
</span><span>        
</span><span>        settings.</span><span style="color:#96b5b4;">set_int</span><span>(&quot;</span><span style="color:#a3be8c;">window-width</span><span>&quot;, size.</span><span style="color:#d08770;">0</span><span>).</span><span style="color:#96b5b4;">ok</span><span>();
</span><span>        settings.</span><span style="color:#96b5b4;">set_int</span><span>(&quot;</span><span style="color:#a3be8c;">window-height</span><span>&quot;, size.</span><span style="color:#d08770;">1</span><span>).</span><span style="color:#96b5b4;">ok</span><span>();
</span><span>        settings.</span><span style="color:#96b5b4;">set_boolean</span><span>(&quot;</span><span style="color:#a3be8c;">is-maximized</span><span>&quot;, </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#96b5b4;">is_maximized</span><span>()).</span><span style="color:#96b5b4;">ok</span><span>();
</span><span>    }
</span><span>
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">load_window_size</span><span>(&amp;</span><span style="color:#bf616a;">self</span><span>) {
</span><span>        </span><span style="color:#b48ead;">let</span><span> settings = gio::Settings::new(&quot;</span><span style="color:#a3be8c;">com.example.MyApp</span><span>&quot;);
</span><span>        
</span><span>        </span><span style="color:#b48ead;">let</span><span> width = settings.</span><span style="color:#96b5b4;">int</span><span>(&quot;</span><span style="color:#a3be8c;">window-width</span><span>&quot;);
</span><span>        </span><span style="color:#b48ead;">let</span><span> height = settings.</span><span style="color:#96b5b4;">int</span><span>(&quot;</span><span style="color:#a3be8c;">window-height</span><span>&quot;);
</span><span>        </span><span style="color:#b48ead;">let</span><span> is_maximized = settings.</span><span style="color:#96b5b4;">boolean</span><span>(&quot;</span><span style="color:#a3be8c;">is-maximized</span><span>&quot;);
</span><span>
</span><span>        </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#96b5b4;">set_default_size</span><span>(width, height);
</span><span>        
</span><span>        </span><span style="color:#b48ead;">if</span><span> is_maximized {
</span><span>            </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#96b5b4;">maximize</span><span>();
</span><span>        }
</span><span>    }
</span><span>}
</span></code></pre>
<h4 id="window-ui-gtk-ui-definition">window.ui (GTK UI Definition)</h4>
<pre data-lang="xml" style="background-color:#2b303b;color:#c0c5ce;" class="language-xml "><code class="language-xml" data-lang="xml"><span>&lt;?</span><span style="color:#bf616a;">xml </span><span style="color:#d08770;">version</span><span>=&quot;</span><span style="color:#a3be8c;">1.0</span><span>&quot; </span><span style="color:#d08770;">encoding</span><span>=&quot;</span><span style="color:#a3be8c;">UTF-8</span><span>&quot;?&gt;
</span><span>&lt;</span><span style="color:#bf616a;">interface</span><span>&gt;
</span><span>  &lt;</span><span style="color:#bf616a;">template </span><span style="color:#d08770;">class</span><span>=&quot;</span><span style="color:#a3be8c;">MyApplicationWindow</span><span>&quot; </span><span style="color:#d08770;">parent</span><span>=&quot;</span><span style="color:#a3be8c;">AdwApplicationWindow</span><span>&quot;&gt;
</span><span>    &lt;</span><span style="color:#bf616a;">property </span><span style="color:#d08770;">name</span><span>=&quot;</span><span style="color:#a3be8c;">default-width</span><span>&quot;&gt;600&lt;/</span><span style="color:#bf616a;">property</span><span>&gt;
</span><span>    &lt;</span><span style="color:#bf616a;">property </span><span style="color:#d08770;">name</span><span>=&quot;</span><span style="color:#a3be8c;">default-height</span><span>&quot;&gt;400&lt;/</span><span style="color:#bf616a;">property</span><span>&gt;
</span><span>    &lt;</span><span style="color:#bf616a;">property </span><span style="color:#d08770;">name</span><span>=&quot;</span><span style="color:#a3be8c;">content</span><span>&quot;&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">object </span><span style="color:#d08770;">class</span><span>=&quot;</span><span style="color:#a3be8c;">AdwToolbarView</span><span>&quot;&gt;
</span><span>        &lt;</span><span style="color:#bf616a;">child </span><span style="color:#d08770;">type</span><span>=&quot;</span><span style="color:#a3be8c;">top</span><span>&quot;&gt;
</span><span>          &lt;</span><span style="color:#bf616a;">object </span><span style="color:#d08770;">class</span><span>=&quot;</span><span style="color:#a3be8c;">AdwHeaderBar</span><span>&quot;&gt;
</span><span>            &lt;</span><span style="color:#bf616a;">child </span><span style="color:#d08770;">type</span><span>=&quot;</span><span style="color:#a3be8c;">end</span><span>&quot;&gt;
</span><span>              &lt;</span><span style="color:#bf616a;">object </span><span style="color:#d08770;">class</span><span>=&quot;</span><span style="color:#a3be8c;">GtkMenuButton</span><span>&quot;&gt;
</span><span>                &lt;</span><span style="color:#bf616a;">property </span><span style="color:#d08770;">name</span><span>=&quot;</span><span style="color:#a3be8c;">icon-name</span><span>&quot;&gt;open-menu-symbolic&lt;/</span><span style="color:#bf616a;">property</span><span>&gt;
</span><span>                &lt;</span><span style="color:#bf616a;">property </span><span style="color:#d08770;">name</span><span>=&quot;</span><span style="color:#a3be8c;">menu-model</span><span>&quot;&gt;primary_menu&lt;/</span><span style="color:#bf616a;">property</span><span>&gt;
</span><span>                &lt;</span><span style="color:#bf616a;">property </span><span style="color:#d08770;">name</span><span>=&quot;</span><span style="color:#a3be8c;">tooltip-text</span><span>&quot; </span><span style="color:#d08770;">translatable</span><span>=&quot;</span><span style="color:#a3be8c;">yes</span><span>&quot;&gt;Main Menu&lt;/</span><span style="color:#bf616a;">property</span><span>&gt;
</span><span>              &lt;/</span><span style="color:#bf616a;">object</span><span>&gt;
</span><span>            &lt;/</span><span style="color:#bf616a;">child</span><span>&gt;
</span><span>          &lt;/</span><span style="color:#bf616a;">object</span><span>&gt;
</span><span>        &lt;/</span><span style="color:#bf616a;">child</span><span>&gt;
</span><span>        &lt;</span><span style="color:#bf616a;">property </span><span style="color:#d08770;">name</span><span>=&quot;</span><span style="color:#a3be8c;">content</span><span>&quot;&gt;
</span><span>          &lt;</span><span style="color:#bf616a;">object </span><span style="color:#d08770;">class</span><span>=&quot;</span><span style="color:#a3be8c;">AdwStatusPage</span><span>&quot;&gt;
</span><span>            &lt;</span><span style="color:#bf616a;">property </span><span style="color:#d08770;">name</span><span>=&quot;</span><span style="color:#a3be8c;">icon-name</span><span>&quot;&gt;com.example.MyApp&lt;/</span><span style="color:#bf616a;">property</span><span>&gt;
</span><span>            &lt;</span><span style="color:#bf616a;">property </span><span style="color:#d08770;">name</span><span>=&quot;</span><span style="color:#a3be8c;">title</span><span>&quot; </span><span style="color:#d08770;">translatable</span><span>=&quot;</span><span style="color:#a3be8c;">yes</span><span>&quot;&gt;Welcome&lt;/</span><span style="color:#bf616a;">property</span><span>&gt;
</span><span>            &lt;</span><span style="color:#bf616a;">property </span><span style="color:#d08770;">name</span><span>=&quot;</span><span style="color:#a3be8c;">description</span><span>&quot; </span><span style="color:#d08770;">translatable</span><span>=&quot;</span><span style="color:#a3be8c;">yes</span><span>&quot;&gt;This is your first Libadwaita application&lt;/</span><span style="color:#bf616a;">property</span><span>&gt;
</span><span>            &lt;</span><span style="color:#bf616a;">property </span><span style="color:#d08770;">name</span><span>=&quot;</span><span style="color:#a3be8c;">child</span><span>&quot;&gt;
</span><span>              &lt;</span><span style="color:#bf616a;">object </span><span style="color:#d08770;">class</span><span>=&quot;</span><span style="color:#a3be8c;">GtkLabel</span><span>&quot; </span><span style="color:#d08770;">id</span><span>=&quot;</span><span style="color:#a3be8c;">label</span><span>&quot;&gt;
</span><span>                &lt;</span><span style="color:#bf616a;">property </span><span style="color:#d08770;">name</span><span>=&quot;</span><span style="color:#a3be8c;">label</span><span>&quot; </span><span style="color:#d08770;">translatable</span><span>=&quot;</span><span style="color:#a3be8c;">yes</span><span>&quot;&gt;Hello, GNOME!&lt;/</span><span style="color:#bf616a;">property</span><span>&gt;
</span><span>                &lt;</span><span style="color:#bf616a;">style</span><span>&gt;
</span><span>                  &lt;</span><span style="color:#bf616a;">class </span><span style="color:#d08770;">name</span><span>=&quot;</span><span style="color:#a3be8c;">title-1</span><span>&quot;/&gt;
</span><span>                &lt;/</span><span style="color:#bf616a;">style</span><span>&gt;
</span><span>              &lt;/</span><span style="color:#bf616a;">object</span><span>&gt;
</span><span>            &lt;/</span><span style="color:#bf616a;">property</span><span>&gt;
</span><span>          &lt;/</span><span style="color:#bf616a;">object</span><span>&gt;
</span><span>        &lt;/</span><span style="color:#bf616a;">property</span><span>&gt;
</span><span>      &lt;/</span><span style="color:#bf616a;">object</span><span>&gt;
</span><span>    &lt;/</span><span style="color:#bf616a;">property</span><span>&gt;
</span><span>  &lt;/</span><span style="color:#bf616a;">template</span><span>&gt;
</span><span>  
</span><span>  &lt;</span><span style="color:#bf616a;">menu </span><span style="color:#d08770;">id</span><span>=&quot;</span><span style="color:#a3be8c;">primary_menu</span><span>&quot;&gt;
</span><span>    &lt;</span><span style="color:#bf616a;">section</span><span>&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">item</span><span>&gt;
</span><span>        &lt;</span><span style="color:#bf616a;">attribute </span><span style="color:#d08770;">name</span><span>=&quot;</span><span style="color:#a3be8c;">label</span><span>&quot; </span><span style="color:#d08770;">translatable</span><span>=&quot;</span><span style="color:#a3be8c;">yes</span><span>&quot;&gt;_About My App&lt;/</span><span style="color:#bf616a;">attribute</span><span>&gt;
</span><span>        &lt;</span><span style="color:#bf616a;">attribute </span><span style="color:#d08770;">name</span><span>=&quot;</span><span style="color:#a3be8c;">action</span><span>&quot;&gt;app.about&lt;/</span><span style="color:#bf616a;">attribute</span><span>&gt;
</span><span>      &lt;/</span><span style="color:#bf616a;">item</span><span>&gt;
</span><span>    &lt;/</span><span style="color:#bf616a;">section</span><span>&gt;
</span><span>  &lt;/</span><span style="color:#bf616a;">menu</span><span>&gt;
</span><span>&lt;/</span><span style="color:#bf616a;">interface</span><span>&gt;
</span></code></pre>
<h3 id="minimal-python-application">Minimal Python Application</h3>
<p>Now the same application in Python:</p>
<h4 id="main-py">main.py</h4>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#65737e;">#!/usr/bin/env python3
</span><span>
</span><span style="color:#b48ead;">import </span><span>sys
</span><span style="color:#b48ead;">import </span><span>gi
</span><span>
</span><span>gi.</span><span style="color:#bf616a;">require_version</span><span>(&#39;</span><span style="color:#a3be8c;">Gtk</span><span>&#39;, &#39;</span><span style="color:#a3be8c;">4.0</span><span>&#39;)
</span><span>gi.</span><span style="color:#bf616a;">require_version</span><span>(&#39;</span><span style="color:#a3be8c;">Adw</span><span>&#39;, &#39;</span><span style="color:#a3be8c;">1</span><span>&#39;)
</span><span>
</span><span style="color:#b48ead;">from </span><span>gi.repository </span><span style="color:#b48ead;">import </span><span>Gtk, Adw, Gio
</span><span>
</span><span style="color:#b48ead;">from .</span><span>application </span><span style="color:#b48ead;">import </span><span>MyApplication
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">main</span><span>():
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;The application&#39;s entry point.&quot;&quot;&quot;
</span><span>    app = </span><span style="color:#bf616a;">MyApplication</span><span>()
</span><span>    </span><span style="color:#b48ead;">return </span><span>app.</span><span style="color:#bf616a;">run</span><span>(sys.argv)
</span></code></pre>
<h4 id="application-py">application.py</h4>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">import </span><span>gi
</span><span>
</span><span>gi.</span><span style="color:#bf616a;">require_version</span><span>(&#39;</span><span style="color:#a3be8c;">Gtk</span><span>&#39;, &#39;</span><span style="color:#a3be8c;">4.0</span><span>&#39;)
</span><span>gi.</span><span style="color:#bf616a;">require_version</span><span>(&#39;</span><span style="color:#a3be8c;">Adw</span><span>&#39;, &#39;</span><span style="color:#a3be8c;">1</span><span>&#39;)
</span><span>
</span><span style="color:#b48ead;">from </span><span>gi.repository </span><span style="color:#b48ead;">import </span><span>Gtk, Adw, Gio
</span><span>
</span><span style="color:#b48ead;">from .</span><span>window </span><span style="color:#b48ead;">import </span><span>MyApplicationWindow
</span><span>
</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">MyApplication</span><span style="color:#eff1f5;">(</span><span style="color:#a3be8c;">Adw.Application</span><span style="color:#eff1f5;">):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;The main application class.&quot;&quot;&quot;
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#96b5b4;">__init__</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>        </span><span style="color:#96b5b4;">super</span><span>().</span><span style="color:#96b5b4;">__init__</span><span>(
</span><span>            </span><span style="color:#bf616a;">application_id</span><span>=&#39;</span><span style="color:#a3be8c;">com.example.MyApp</span><span>&#39;,
</span><span>            </span><span style="color:#bf616a;">flags</span><span>=Gio.ApplicationFlags.</span><span style="color:#bf616a;">DEFAULT_FLAGS
</span><span>        )
</span><span>        
</span><span>        </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">create_action</span><span>(&#39;</span><span style="color:#a3be8c;">quit</span><span>&#39;, </span><span style="color:#b48ead;">lambda </span><span>*</span><span style="color:#bf616a;">_</span><span>: </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">quit</span><span>(), [&#39;</span><span style="color:#a3be8c;">&lt;primary&gt;q</span><span>&#39;])
</span><span>        </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">create_action</span><span>(&#39;</span><span style="color:#a3be8c;">about</span><span>&#39;, </span><span style="color:#bf616a;">self</span><span>.on_about_action)
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">do_activate</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Called when the application is activated.&quot;&quot;&quot;
</span><span>        win = </span><span style="color:#bf616a;">self</span><span>.props.active_window
</span><span>        </span><span style="color:#b48ead;">if </span><span>not win:
</span><span>            win = </span><span style="color:#bf616a;">MyApplicationWindow</span><span>(</span><span style="color:#bf616a;">application</span><span>=</span><span style="color:#bf616a;">self</span><span>)
</span><span>        win.</span><span style="color:#bf616a;">present</span><span>()
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">on_about_action</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">widget</span><span>, </span><span style="color:#bf616a;">_</span><span>):
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Callback for the app.about action.&quot;&quot;&quot;
</span><span>        about = Adw.</span><span style="color:#bf616a;">AboutDialog</span><span>(
</span><span>            </span><span style="color:#bf616a;">application_name</span><span>=&#39;</span><span style="color:#a3be8c;">My Application</span><span>&#39;,
</span><span>            </span><span style="color:#bf616a;">application_icon</span><span>=&#39;</span><span style="color:#a3be8c;">com.example.MyApp</span><span>&#39;,
</span><span>            </span><span style="color:#bf616a;">developer_name</span><span>=&#39;</span><span style="color:#a3be8c;">Your Name</span><span>&#39;,
</span><span>            </span><span style="color:#bf616a;">version</span><span>=&#39;</span><span style="color:#a3be8c;">0.1.0</span><span>&#39;,
</span><span>            </span><span style="color:#bf616a;">developers</span><span>=[&#39;</span><span style="color:#a3be8c;">Your Name &lt;your.email@example.com&gt;</span><span>&#39;],
</span><span>            </span><span style="color:#bf616a;">copyright</span><span>=&#39;</span><span style="color:#a3be8c;">© 2025 Your Name</span><span>&#39;,
</span><span>            </span><span style="color:#bf616a;">license_type</span><span>=Gtk.License.</span><span style="color:#bf616a;">GPL_3_0</span><span>,
</span><span>            </span><span style="color:#bf616a;">website</span><span>=&#39;</span><span style="color:#a3be8c;">https://example.com</span><span>&#39;,
</span><span>            </span><span style="color:#bf616a;">issue_url</span><span>=&#39;</span><span style="color:#a3be8c;">https://github.com/example/my-app/issues</span><span>&#39;,
</span><span>        )
</span><span>        about.</span><span style="color:#bf616a;">present</span><span>(</span><span style="color:#bf616a;">self</span><span>.props.active_window)
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_action</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">name</span><span>, </span><span style="color:#bf616a;">callback</span><span>, </span><span style="color:#bf616a;">shortcuts</span><span>=</span><span style="color:#d08770;">None</span><span>):
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Add an application action.
</span><span style="color:#65737e;">        
</span><span style="color:#65737e;">        Args:
</span><span style="color:#65737e;">            name: the name of the action
</span><span style="color:#65737e;">            callback: the function to be called when the action is activated
</span><span style="color:#65737e;">            shortcuts: an optional list of accelerators
</span><span style="color:#65737e;">        &quot;&quot;&quot;
</span><span>        action = Gio.SimpleAction.</span><span style="color:#bf616a;">new</span><span>(name, </span><span style="color:#d08770;">None</span><span>)
</span><span>        action.</span><span style="color:#bf616a;">connect</span><span>(&quot;</span><span style="color:#a3be8c;">activate</span><span>&quot;, callback)
</span><span>        </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">add_action</span><span>(action)
</span><span>        </span><span style="color:#b48ead;">if </span><span>shortcuts:
</span><span>            </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">set_accels_for_action</span><span>(</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">app.</span><span>{name}&quot;, shortcuts)
</span></code></pre>
<h4 id="window-py">window.py</h4>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">import </span><span>gi
</span><span>
</span><span>gi.</span><span style="color:#bf616a;">require_version</span><span>(&#39;</span><span style="color:#a3be8c;">Gtk</span><span>&#39;, &#39;</span><span style="color:#a3be8c;">4.0</span><span>&#39;)
</span><span>gi.</span><span style="color:#bf616a;">require_version</span><span>(&#39;</span><span style="color:#a3be8c;">Adw</span><span>&#39;, &#39;</span><span style="color:#a3be8c;">1</span><span>&#39;)
</span><span>
</span><span style="color:#b48ead;">from </span><span>gi.repository </span><span style="color:#b48ead;">import </span><span>Gtk, Adw, Gio
</span><span>
</span><span>@Gtk.</span><span style="color:#bf616a;">Template</span><span>(</span><span style="color:#bf616a;">resource_path</span><span>=&#39;</span><span style="color:#a3be8c;">/com/example/MyApp/window.ui</span><span>&#39;)
</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">MyApplicationWindow</span><span style="color:#eff1f5;">(</span><span style="color:#a3be8c;">Adw.ApplicationWindow</span><span style="color:#eff1f5;">):
</span><span>    __gtype_name__ = &#39;</span><span style="color:#a3be8c;">MyApplicationWindow</span><span>&#39;
</span><span>
</span><span>    label = Gtk.Template.</span><span style="color:#bf616a;">Child</span><span>()
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#96b5b4;">__init__</span><span>(</span><span style="color:#bf616a;">self</span><span>, **</span><span style="color:#bf616a;">kwargs</span><span>):
</span><span>        </span><span style="color:#96b5b4;">super</span><span>().</span><span style="color:#96b5b4;">__init__</span><span>(**kwargs)
</span><span>        
</span><span>        </span><span style="color:#65737e;"># Load window state
</span><span>        </span><span style="color:#bf616a;">self</span><span>.settings = Gio.Settings.</span><span style="color:#bf616a;">new</span><span>(&#39;</span><span style="color:#a3be8c;">com.example.MyApp</span><span>&#39;)
</span><span>        </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">load_window_state</span><span>()
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">load_window_state</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Load the window state from GSettings.&quot;&quot;&quot;
</span><span>        width = </span><span style="color:#bf616a;">self</span><span>.settings.</span><span style="color:#bf616a;">get_int</span><span>(&#39;</span><span style="color:#a3be8c;">window-width</span><span>&#39;)
</span><span>        height = </span><span style="color:#bf616a;">self</span><span>.settings.</span><span style="color:#bf616a;">get_int</span><span>(&#39;</span><span style="color:#a3be8c;">window-height</span><span>&#39;)
</span><span>        is_maximized = </span><span style="color:#bf616a;">self</span><span>.settings.</span><span style="color:#bf616a;">get_boolean</span><span>(&#39;</span><span style="color:#a3be8c;">is-maximized</span><span>&#39;)
</span><span>        
</span><span>        </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">set_default_size</span><span>(width, height)
</span><span>        
</span><span>        </span><span style="color:#b48ead;">if </span><span>is_maximized:
</span><span>            </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">maximize</span><span>()
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">save_window_state</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Save the window state to GSettings.&quot;&quot;&quot;
</span><span>        size = </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">get_default_size</span><span>()
</span><span>        </span><span style="color:#bf616a;">self</span><span>.settings.</span><span style="color:#bf616a;">set_int</span><span>(&#39;</span><span style="color:#a3be8c;">window-width</span><span>&#39;, size.width)
</span><span>        </span><span style="color:#bf616a;">self</span><span>.settings.</span><span style="color:#bf616a;">set_int</span><span>(&#39;</span><span style="color:#a3be8c;">window-height</span><span>&#39;, size.height)
</span><span>        </span><span style="color:#bf616a;">self</span><span>.settings.</span><span style="color:#bf616a;">set_boolean</span><span>(&#39;</span><span style="color:#a3be8c;">is-maximized</span><span>&#39;, </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">is_maximized</span><span>())
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">do_close_request</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Called when the window is closed.&quot;&quot;&quot;
</span><span>        </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">save_window_state</span><span>()
</span><span>        </span><span style="color:#b48ead;">return </span><span style="color:#d08770;">False
</span></code></pre>
<p>The UI file (window.ui) is the same for both languages.</p>
<h3 id="gsettings-schema">GSettings Schema</h3>
<p>Both applications need a GSettings schema for storing preferences:</p>
<h4 id="com-example-myapp-gschema-xml">com.example.MyApp.gschema.xml</h4>
<pre data-lang="xml" style="background-color:#2b303b;color:#c0c5ce;" class="language-xml "><code class="language-xml" data-lang="xml"><span>&lt;?</span><span style="color:#bf616a;">xml </span><span style="color:#d08770;">version</span><span>=&quot;</span><span style="color:#a3be8c;">1.0</span><span>&quot; </span><span style="color:#d08770;">encoding</span><span>=&quot;</span><span style="color:#a3be8c;">UTF-8</span><span>&quot;?&gt;
</span><span>&lt;</span><span style="color:#bf616a;">schemalist</span><span>&gt;
</span><span>  &lt;</span><span style="color:#bf616a;">schema </span><span style="color:#d08770;">id</span><span>=&quot;</span><span style="color:#a3be8c;">com.example.MyApp</span><span>&quot; </span><span style="color:#d08770;">path</span><span>=&quot;</span><span style="color:#a3be8c;">/com/example/MyApp/</span><span>&quot;&gt;
</span><span>    &lt;</span><span style="color:#bf616a;">key </span><span style="color:#d08770;">name</span><span>=&quot;</span><span style="color:#a3be8c;">window-width</span><span>&quot; </span><span style="color:#d08770;">type</span><span>=&quot;</span><span style="color:#a3be8c;">i</span><span>&quot;&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">default</span><span>&gt;600&lt;/</span><span style="color:#bf616a;">default</span><span>&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">summary</span><span>&gt;Window width&lt;/</span><span style="color:#bf616a;">summary</span><span>&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">description</span><span>&gt;The width of the main window&lt;/</span><span style="color:#bf616a;">description</span><span>&gt;
</span><span>    &lt;/</span><span style="color:#bf616a;">key</span><span>&gt;
</span><span>    &lt;</span><span style="color:#bf616a;">key </span><span style="color:#d08770;">name</span><span>=&quot;</span><span style="color:#a3be8c;">window-height</span><span>&quot; </span><span style="color:#d08770;">type</span><span>=&quot;</span><span style="color:#a3be8c;">i</span><span>&quot;&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">default</span><span>&gt;400&lt;/</span><span style="color:#bf616a;">default</span><span>&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">summary</span><span>&gt;Window height&lt;/</span><span style="color:#bf616a;">summary</span><span>&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">description</span><span>&gt;The height of the main window&lt;/</span><span style="color:#bf616a;">description</span><span>&gt;
</span><span>    &lt;/</span><span style="color:#bf616a;">key</span><span>&gt;
</span><span>    &lt;</span><span style="color:#bf616a;">key </span><span style="color:#d08770;">name</span><span>=&quot;</span><span style="color:#a3be8c;">is-maximized</span><span>&quot; </span><span style="color:#d08770;">type</span><span>=&quot;</span><span style="color:#a3be8c;">b</span><span>&quot;&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">default</span><span>&gt;false&lt;/</span><span style="color:#bf616a;">default</span><span>&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">summary</span><span>&gt;Window maximized state&lt;/</span><span style="color:#bf616a;">summary</span><span>&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">description</span><span>&gt;Whether the window is maximized&lt;/</span><span style="color:#bf616a;">description</span><span>&gt;
</span><span>    &lt;/</span><span style="color:#bf616a;">key</span><span>&gt;
</span><span>  &lt;/</span><span style="color:#bf616a;">schema</span><span>&gt;
</span><span>&lt;/</span><span style="color:#bf616a;">schemalist</span><span>&gt;
</span></code></pre>
<p>After installation, compile the schema:</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">sudo</span><span> glib-compile-schemas /usr/share/glib-2.0/schemas/
</span></code></pre>
<h2 id="chapter-6-simple-widgets">Chapter 6: Simple Widgets</h2>
<h3 id="understanding-widget-basics">Understanding Widget Basics</h3>
<p>Libadwaita widgets inherit from GTK4 widgets and add:</p>
<ul>
<li>Automatic dark mode support</li>
<li>Rounded corners and modern styling</li>
<li>Animation capabilities</li>
<li>Responsive behavior</li>
</ul>
<h3 id="adwstatuspage">AdwStatusPage</h3>
<p>The status page is used for empty states, welcome screens, and error messages.</p>
<p><strong>Rust Example</strong>:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">use </span><span>adwaita::prelude::*;
</span><span style="color:#b48ead;">use </span><span>gtk::glib;
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_status_page</span><span>() -&gt; adwaita::StatusPage {
</span><span>    adwaita::StatusPage::builder()
</span><span>        .</span><span style="color:#96b5b4;">icon_name</span><span>(&quot;</span><span style="color:#a3be8c;">folder-symbolic</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&quot;</span><span style="color:#a3be8c;">No Files</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">description</span><span>(&quot;</span><span style="color:#a3be8c;">Drop files here to get started</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>()
</span><span>}
</span><span>
</span><span style="color:#65737e;">// With a child widget
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_status_page_with_button</span><span>() -&gt; adwaita::StatusPage {
</span><span>    </span><span style="color:#b48ead;">let</span><span> button = gtk::Button::with_label(&quot;</span><span style="color:#a3be8c;">Open Folder</span><span>&quot;);
</span><span>    button.</span><span style="color:#96b5b4;">add_css_class</span><span>(&quot;</span><span style="color:#a3be8c;">pill</span><span>&quot;);
</span><span>    button.</span><span style="color:#96b5b4;">add_css_class</span><span>(&quot;</span><span style="color:#a3be8c;">suggested-action</span><span>&quot;);
</span><span>    
</span><span>    adwaita::StatusPage::builder()
</span><span>        .</span><span style="color:#96b5b4;">icon_name</span><span>(&quot;</span><span style="color:#a3be8c;">folder-open-symbolic</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&quot;</span><span style="color:#a3be8c;">Welcome</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">description</span><span>(&quot;</span><span style="color:#a3be8c;">Choose a folder to begin</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">child</span><span>(&amp;button)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>()
</span><span>}
</span></code></pre>
<p><strong>Python Example</strong>:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_status_page</span><span>():
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create a status page for empty state.&quot;&quot;&quot;
</span><span>    status_page = Adw.</span><span style="color:#bf616a;">StatusPage</span><span>(
</span><span>        </span><span style="color:#bf616a;">icon_name</span><span>=&#39;</span><span style="color:#a3be8c;">folder-symbolic</span><span>&#39;,
</span><span>        </span><span style="color:#bf616a;">title</span><span>=&#39;</span><span style="color:#a3be8c;">No Files</span><span>&#39;,
</span><span>        </span><span style="color:#bf616a;">description</span><span>=&#39;</span><span style="color:#a3be8c;">Drop files here to get started</span><span>&#39;
</span><span>    )
</span><span>    </span><span style="color:#b48ead;">return </span><span>status_page
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_status_page_with_button</span><span>():
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create a status page with an action button.&quot;&quot;&quot;
</span><span>    button = Gtk.</span><span style="color:#bf616a;">Button</span><span>(</span><span style="color:#bf616a;">label</span><span>=&#39;</span><span style="color:#a3be8c;">Open Folder</span><span>&#39;)
</span><span>    button.</span><span style="color:#bf616a;">add_css_class</span><span>(&#39;</span><span style="color:#a3be8c;">pill</span><span>&#39;)
</span><span>    button.</span><span style="color:#bf616a;">add_css_class</span><span>(&#39;</span><span style="color:#a3be8c;">suggested-action</span><span>&#39;)
</span><span>    
</span><span>    status_page = Adw.</span><span style="color:#bf616a;">StatusPage</span><span>(
</span><span>        </span><span style="color:#bf616a;">icon_name</span><span>=&#39;</span><span style="color:#a3be8c;">folder-open-symbolic</span><span>&#39;,
</span><span>        </span><span style="color:#bf616a;">title</span><span>=&#39;</span><span style="color:#a3be8c;">Welcome</span><span>&#39;,
</span><span>        </span><span style="color:#bf616a;">description</span><span>=&#39;</span><span style="color:#a3be8c;">Choose a folder to begin</span><span>&#39;,
</span><span>        </span><span style="color:#bf616a;">child</span><span>=button
</span><span>    )
</span><span>    </span><span style="color:#b48ead;">return </span><span>status_page
</span></code></pre>
<p><strong>CSS Classes</strong>:</p>
<ul>
<li><code>pill</code>: Rounded button shape</li>
<li><code>suggested-action</code>: Blue accent (primary action)</li>
<li><code>destructive-action</code>: Red color (dangerous action)</li>
<li><code>flat</code>: Remove button background</li>
</ul>
<h3 id="adwtoastoverlay-and-adwtoast">AdwToastOverlay and AdwToast</h3>
<p>Toasts provide non-intrusive feedback to users.</p>
<p><strong>Rust Example</strong>:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">use </span><span>adwaita::prelude::*;
</span><span>
</span><span style="color:#65737e;">// Setup (in window initialization)
</span><span style="color:#b48ead;">let</span><span> toast_overlay = adwaita::ToastOverlay::new();
</span><span style="color:#b48ead;">let</span><span> content = gtk::Box::new(gtk::Orientation::Vertical, </span><span style="color:#d08770;">0</span><span>);
</span><span>toast_overlay.</span><span style="color:#96b5b4;">set_child</span><span>(Some(&amp;content));
</span><span>
</span><span style="color:#65737e;">// Show a toast
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">show_toast</span><span>(</span><span style="color:#bf616a;">overlay</span><span>: &amp;adwaita::ToastOverlay, </span><span style="color:#bf616a;">message</span><span>: &amp;</span><span style="color:#b48ead;">str</span><span>) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> toast = adwaita::Toast::new(message);
</span><span>    toast.</span><span style="color:#96b5b4;">set_timeout</span><span>(</span><span style="color:#d08770;">3</span><span>); </span><span style="color:#65737e;">// 3 seconds
</span><span>    overlay.</span><span style="color:#96b5b4;">add_toast</span><span>(toast);
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Toast with action
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">show_toast_with_action</span><span>(</span><span style="color:#bf616a;">overlay</span><span>: &amp;adwaita::ToastOverlay) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> toast = adwaita::Toast::new(&quot;</span><span style="color:#a3be8c;">File deleted</span><span>&quot;);
</span><span>    toast.</span><span style="color:#96b5b4;">set_button_label</span><span>(Some(&quot;</span><span style="color:#a3be8c;">Undo</span><span>&quot;));
</span><span>    toast.</span><span style="color:#96b5b4;">set_action_name</span><span>(Some(&quot;</span><span style="color:#a3be8c;">app.undo-delete</span><span>&quot;));
</span><span>    overlay.</span><span style="color:#96b5b4;">add_toast</span><span>(toast);
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Priority toast (shown immediately)
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">show_priority_toast</span><span>(</span><span style="color:#bf616a;">overlay</span><span>: &amp;adwaita::ToastOverlay) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> toast = adwaita::Toast::new(&quot;</span><span style="color:#a3be8c;">Connection lost</span><span>&quot;);
</span><span>    toast.</span><span style="color:#96b5b4;">set_priority</span><span>(adwaita::ToastPriority::High);
</span><span>    overlay.</span><span style="color:#96b5b4;">add_toast</span><span>(toast);
</span><span>}
</span></code></pre>
<p><strong>Python Example</strong>:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">setup_toast_overlay</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Setup toast overlay in window.&quot;&quot;&quot;
</span><span>    </span><span style="color:#bf616a;">self</span><span>.toast_overlay = Adw.</span><span style="color:#bf616a;">ToastOverlay</span><span>()
</span><span>    content = Gtk.</span><span style="color:#bf616a;">Box</span><span>(</span><span style="color:#bf616a;">orientation</span><span>=Gtk.Orientation.</span><span style="color:#bf616a;">VERTICAL</span><span>)
</span><span>    </span><span style="color:#bf616a;">self</span><span>.toast_overlay.</span><span style="color:#bf616a;">set_child</span><span>(content)
</span><span>    
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">show_toast</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">message</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Show a simple toast message.&quot;&quot;&quot;
</span><span>    toast = Adw.Toast.</span><span style="color:#bf616a;">new</span><span>(message)
</span><span>    toast.</span><span style="color:#bf616a;">set_timeout</span><span>(</span><span style="color:#d08770;">3</span><span>)  </span><span style="color:#65737e;"># 3 seconds
</span><span>    </span><span style="color:#bf616a;">self</span><span>.toast_overlay.</span><span style="color:#bf616a;">add_toast</span><span>(toast)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">show_toast_with_action</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Show a toast with an action button.&quot;&quot;&quot;
</span><span>    toast = Adw.Toast.</span><span style="color:#bf616a;">new</span><span>(&quot;</span><span style="color:#a3be8c;">File deleted</span><span>&quot;)
</span><span>    toast.</span><span style="color:#bf616a;">set_button_label</span><span>(&quot;</span><span style="color:#a3be8c;">Undo</span><span>&quot;)
</span><span>    toast.</span><span style="color:#bf616a;">set_action_name</span><span>(&quot;</span><span style="color:#a3be8c;">app.undo-delete</span><span>&quot;)
</span><span>    </span><span style="color:#bf616a;">self</span><span>.toast_overlay.</span><span style="color:#bf616a;">add_toast</span><span>(toast)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">show_priority_toast</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Show a high-priority toast.&quot;&quot;&quot;
</span><span>    toast = Adw.Toast.</span><span style="color:#bf616a;">new</span><span>(&quot;</span><span style="color:#a3be8c;">Connection lost</span><span>&quot;)
</span><span>    toast.</span><span style="color:#bf616a;">set_priority</span><span>(Adw.ToastPriority.</span><span style="color:#bf616a;">HIGH</span><span>)
</span><span>    </span><span style="color:#bf616a;">self</span><span>.toast_overlay.</span><span style="color:#bf616a;">add_toast</span><span>(toast)
</span></code></pre>
<h3 id="adwbanner">AdwBanner</h3>
<p>Banners display important, persistent messages at the top of content.</p>
<p><strong>Rust Example</strong>:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">use </span><span>adwaita::prelude::*;
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_banner</span><span>() -&gt; adwaita::Banner {
</span><span>    </span><span style="color:#b48ead;">let</span><span> banner = adwaita::Banner::new(&quot;</span><span style="color:#a3be8c;">Your trial expires in 3 days</span><span>&quot;);
</span><span>    banner.</span><span style="color:#96b5b4;">set_button_label</span><span>(Some(&quot;</span><span style="color:#a3be8c;">Upgrade</span><span>&quot;));
</span><span>    banner.</span><span style="color:#96b5b4;">connect_button_clicked</span><span>(|_| {
</span><span>        println!(&quot;</span><span style="color:#a3be8c;">Upgrade clicked</span><span>&quot;);
</span><span>    });
</span><span>    banner
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Info banner (blue)
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_info_banner</span><span>() -&gt; adwaita::Banner {
</span><span>    adwaita::Banner::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&quot;</span><span style="color:#a3be8c;">A new version is available</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">button_label</span><span>(&quot;</span><span style="color:#a3be8c;">Download</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>()
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Warning banner (yellow)
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_warning_banner</span><span>() -&gt; adwaita::Banner {
</span><span>    </span><span style="color:#b48ead;">let</span><span> banner = adwaita::Banner::new(&quot;</span><span style="color:#a3be8c;">Limited connectivity</span><span>&quot;);
</span><span>    banner.</span><span style="color:#96b5b4;">add_css_class</span><span>(&quot;</span><span style="color:#a3be8c;">warning</span><span>&quot;);
</span><span>    banner
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Show/hide banner programmatically
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">toggle_banner</span><span>(</span><span style="color:#bf616a;">banner</span><span>: &amp;adwaita::Banner, </span><span style="color:#bf616a;">show</span><span>: </span><span style="color:#b48ead;">bool</span><span>) {
</span><span>    banner.</span><span style="color:#96b5b4;">set_revealed</span><span>(show);
</span><span>}
</span></code></pre>
<p><strong>Python Example</strong>:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_banner</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create a banner with action.&quot;&quot;&quot;
</span><span>    banner = Adw.</span><span style="color:#bf616a;">Banner</span><span>(</span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Your trial expires in 3 days</span><span>&quot;)
</span><span>    banner.</span><span style="color:#bf616a;">set_button_label</span><span>(&quot;</span><span style="color:#a3be8c;">Upgrade</span><span>&quot;)
</span><span>    banner.</span><span style="color:#bf616a;">connect</span><span>(&#39;</span><span style="color:#a3be8c;">button-clicked</span><span>&#39;, </span><span style="color:#bf616a;">self</span><span>.on_upgrade_clicked)
</span><span>    </span><span style="color:#b48ead;">return </span><span>banner
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_info_banner</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create an info banner.&quot;&quot;&quot;
</span><span>    </span><span style="color:#b48ead;">return </span><span>Adw.</span><span style="color:#bf616a;">Banner</span><span>(
</span><span>        </span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">A new version is available</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">button_label</span><span>=&quot;</span><span style="color:#a3be8c;">Download</span><span>&quot;
</span><span>    )
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_warning_banner</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create a warning banner.&quot;&quot;&quot;
</span><span>    banner = Adw.</span><span style="color:#bf616a;">Banner</span><span>(</span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Limited connectivity</span><span>&quot;)
</span><span>    banner.</span><span style="color:#bf616a;">add_css_class</span><span>(&#39;</span><span style="color:#a3be8c;">warning</span><span>&#39;)
</span><span>    </span><span style="color:#b48ead;">return </span><span>banner
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">toggle_banner</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">banner</span><span>, </span><span style="color:#bf616a;">show</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Show or hide banner.&quot;&quot;&quot;
</span><span>    banner.</span><span style="color:#bf616a;">set_revealed</span><span>(show)
</span></code></pre>
<h3 id="adwactionrow">AdwActionRow</h3>
<p>Action rows are the foundation of list-based interfaces in Libadwaita.</p>
<p><strong>Rust Example</strong>:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">use </span><span>adwaita::prelude::*;
</span><span>
</span><span style="color:#65737e;">// Simple action row
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_simple_row</span><span>() -&gt; adwaita::ActionRow {
</span><span>    adwaita::ActionRow::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&quot;</span><span style="color:#a3be8c;">Bluetooth</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">subtitle</span><span>(&quot;</span><span style="color:#a3be8c;">Connected to 2 devices</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">activatable</span><span>(</span><span style="color:#d08770;">true</span><span>)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>()
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Action row with icon
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_row_with_icon</span><span>() -&gt; adwaita::ActionRow {
</span><span>    </span><span style="color:#b48ead;">let</span><span> row = adwaita::ActionRow::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&quot;</span><span style="color:#a3be8c;">Wi-Fi</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">subtitle</span><span>(&quot;</span><span style="color:#a3be8c;">MyNetwork</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">activatable</span><span>(</span><span style="color:#d08770;">true</span><span>)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> icon = gtk::Image::from_icon_name(&quot;</span><span style="color:#a3be8c;">network-wireless-symbolic</span><span>&quot;);
</span><span>    row.</span><span style="color:#96b5b4;">add_prefix</span><span>(&amp;icon);
</span><span>    
</span><span>    row
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Action row with toggle
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_row_with_toggle</span><span>() -&gt; adwaita::ActionRow {
</span><span>    </span><span style="color:#b48ead;">let</span><span> row = adwaita::ActionRow::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&quot;</span><span style="color:#a3be8c;">Night Light</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">subtitle</span><span>(&quot;</span><span style="color:#a3be8c;">Reduces blue light at night</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> toggle = gtk::Switch::new();
</span><span>    toggle.</span><span style="color:#96b5b4;">set_valign</span><span>(gtk::Align::Center);
</span><span>    row.</span><span style="color:#96b5b4;">add_suffix</span><span>(&amp;toggle);
</span><span>    row.</span><span style="color:#96b5b4;">set_activatable_widget</span><span>(Some(&amp;toggle));
</span><span>    
</span><span>    row
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Action row with disclosure indicator
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_expandable_row</span><span>() -&gt; adwaita::ActionRow {
</span><span>    </span><span style="color:#b48ead;">let</span><span> row = adwaita::ActionRow::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&quot;</span><span style="color:#a3be8c;">Network Settings</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">subtitle</span><span>(&quot;</span><span style="color:#a3be8c;">Configure network preferences</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">activatable</span><span>(</span><span style="color:#d08770;">true</span><span>)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> chevron = gtk::Image::from_icon_name(&quot;</span><span style="color:#a3be8c;">go-next-symbolic</span><span>&quot;);
</span><span>    row.</span><span style="color:#96b5b4;">add_suffix</span><span>(&amp;chevron);
</span><span>    
</span><span>    row.</span><span style="color:#96b5b4;">connect_activated</span><span>(|_| {
</span><span>        println!(&quot;</span><span style="color:#a3be8c;">Navigate to network settings</span><span>&quot;);
</span><span>    });
</span><span>    
</span><span>    row
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Action row with badge
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_row_with_badge</span><span>() -&gt; adwaita::ActionRow {
</span><span>    </span><span style="color:#b48ead;">let</span><span> row = adwaita::ActionRow::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&quot;</span><span style="color:#a3be8c;">Messages</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">activatable</span><span>(</span><span style="color:#d08770;">true</span><span>)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> badge = gtk::Label::new(Some(&quot;</span><span style="color:#a3be8c;">3</span><span>&quot;));
</span><span>    badge.</span><span style="color:#96b5b4;">add_css_class</span><span>(&quot;</span><span style="color:#a3be8c;">badge</span><span>&quot;);
</span><span>    badge.</span><span style="color:#96b5b4;">add_css_class</span><span>(&quot;</span><span style="color:#a3be8c;">numeric</span><span>&quot;);
</span><span>    row.</span><span style="color:#96b5b4;">add_suffix</span><span>(&amp;badge);
</span><span>    
</span><span>    row
</span><span>}
</span></code></pre>
<p><strong>Python Example</strong>:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_simple_row</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create a simple action row.&quot;&quot;&quot;
</span><span>    </span><span style="color:#b48ead;">return </span><span>Adw.</span><span style="color:#bf616a;">ActionRow</span><span>(
</span><span>        </span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Bluetooth</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">subtitle</span><span>=&quot;</span><span style="color:#a3be8c;">Connected to 2 devices</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">activatable</span><span>=</span><span style="color:#d08770;">True
</span><span>    )
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_row_with_icon</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create an action row with icon prefix.&quot;&quot;&quot;
</span><span>    row = Adw.</span><span style="color:#bf616a;">ActionRow</span><span>(
</span><span>        </span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Wi-Fi</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">subtitle</span><span>=&quot;</span><span style="color:#a3be8c;">MyNetwork</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">activatable</span><span>=</span><span style="color:#d08770;">True
</span><span>    )
</span><span>    
</span><span>    icon = Gtk.Image.</span><span style="color:#bf616a;">new_from_icon_name</span><span>(&quot;</span><span style="color:#a3be8c;">network-wireless-symbolic</span><span>&quot;)
</span><span>    row.</span><span style="color:#bf616a;">add_prefix</span><span>(icon)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">return </span><span>row
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_row_with_toggle</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create an action row with toggle switch.&quot;&quot;&quot;
</span><span>    row = Adw.</span><span style="color:#bf616a;">ActionRow</span><span>(
</span><span>        </span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Night Light</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">subtitle</span><span>=&quot;</span><span style="color:#a3be8c;">Reduces blue light at night</span><span>&quot;
</span><span>    )
</span><span>    
</span><span>    toggle = Gtk.</span><span style="color:#bf616a;">Switch</span><span>()
</span><span>    toggle.</span><span style="color:#bf616a;">set_valign</span><span>(Gtk.Align.</span><span style="color:#bf616a;">CENTER</span><span>)
</span><span>    row.</span><span style="color:#bf616a;">add_suffix</span><span>(toggle)
</span><span>    row.</span><span style="color:#bf616a;">set_activatable_widget</span><span>(toggle)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">return </span><span>row
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_expandable_row</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create an action row with disclosure indicator.&quot;&quot;&quot;
</span><span>    row = Adw.</span><span style="color:#bf616a;">ActionRow</span><span>(
</span><span>        </span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Network Settings</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">subtitle</span><span>=&quot;</span><span style="color:#a3be8c;">Configure network preferences</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">activatable</span><span>=</span><span style="color:#d08770;">True
</span><span>    )
</span><span>    
</span><span>    chevron = Gtk.Image.</span><span style="color:#bf616a;">new_from_icon_name</span><span>(&quot;</span><span style="color:#a3be8c;">go-next-symbolic</span><span>&quot;)
</span><span>    row.</span><span style="color:#bf616a;">add_suffix</span><span>(chevron)
</span><span>    
</span><span>    row.</span><span style="color:#bf616a;">connect</span><span>(&#39;</span><span style="color:#a3be8c;">activated</span><span>&#39;, </span><span style="color:#bf616a;">self</span><span>.on_network_settings_clicked)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">return </span><span>row
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_row_with_badge</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create an action row with a badge.&quot;&quot;&quot;
</span><span>    row = Adw.</span><span style="color:#bf616a;">ActionRow</span><span>(
</span><span>        </span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Messages</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">activatable</span><span>=</span><span style="color:#d08770;">True
</span><span>    )
</span><span>    
</span><span>    badge = Gtk.</span><span style="color:#bf616a;">Label</span><span>(</span><span style="color:#bf616a;">label</span><span>=&quot;</span><span style="color:#a3be8c;">3</span><span>&quot;)
</span><span>    badge.</span><span style="color:#bf616a;">add_css_class</span><span>(&#39;</span><span style="color:#a3be8c;">badge</span><span>&#39;)
</span><span>    badge.</span><span style="color:#bf616a;">add_css_class</span><span>(&#39;</span><span style="color:#a3be8c;">numeric</span><span>&#39;)
</span><span>    row.</span><span style="color:#bf616a;">add_suffix</span><span>(badge)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">return </span><span>row
</span></code></pre>
<h3 id="adwexpanderrow">AdwExpanderRow</h3>
<p>Expander rows reveal additional content when clicked.</p>
<p><strong>Rust Example</strong>:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">use </span><span>adwaita::prelude::*;
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_expander_row</span><span>() -&gt; adwaita::ExpanderRow {
</span><span>    </span><span style="color:#b48ead;">let</span><span> expander = adwaita::ExpanderRow::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&quot;</span><span style="color:#a3be8c;">Advanced Settings</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">subtitle</span><span>(&quot;</span><span style="color:#a3be8c;">Configure advanced options</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Add child rows
</span><span>    </span><span style="color:#b48ead;">let</span><span> row1 = adwaita::ActionRow::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&quot;</span><span style="color:#a3be8c;">Debug Mode</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>    </span><span style="color:#b48ead;">let</span><span> toggle1 = gtk::Switch::new();
</span><span>    toggle1.</span><span style="color:#96b5b4;">set_valign</span><span>(gtk::Align::Center);
</span><span>    row1.</span><span style="color:#96b5b4;">add_suffix</span><span>(&amp;toggle1);
</span><span>    row1.</span><span style="color:#96b5b4;">set_activatable_widget</span><span>(Some(&amp;toggle1));
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> row2 = adwaita::ActionRow::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&quot;</span><span style="color:#a3be8c;">Verbose Logging</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>    </span><span style="color:#b48ead;">let</span><span> toggle2 = gtk::Switch::new();
</span><span>    toggle2.</span><span style="color:#96b5b4;">set_valign</span><span>(gtk::Align::Center);
</span><span>    row2.</span><span style="color:#96b5b4;">add_suffix</span><span>(&amp;toggle2);
</span><span>    row2.</span><span style="color:#96b5b4;">set_activatable_widget</span><span>(Some(&amp;toggle2));
</span><span>    
</span><span>    expander.</span><span style="color:#96b5b4;">add_row</span><span>(&amp;row1);
</span><span>    expander.</span><span style="color:#96b5b4;">add_row</span><span>(&amp;row2);
</span><span>    
</span><span>    expander
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Expander row with icon
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_expander_with_icon</span><span>() -&gt; adwaita::ExpanderRow {
</span><span>    </span><span style="color:#b48ead;">let</span><span> expander = adwaita::ExpanderRow::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&quot;</span><span style="color:#a3be8c;">Notifications</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">subtitle</span><span>(&quot;</span><span style="color:#a3be8c;">3 new notifications</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> icon = gtk::Image::from_icon_name(&quot;</span><span style="color:#a3be8c;">notification-symbolic</span><span>&quot;);
</span><span>    expander.</span><span style="color:#96b5b4;">add_prefix</span><span>(&amp;icon);
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Add notifications
</span><span>    </span><span style="color:#b48ead;">for</span><span> i in </span><span style="color:#d08770;">1</span><span>..=</span><span style="color:#d08770;">3 </span><span>{
</span><span>        </span><span style="color:#b48ead;">let</span><span> row = adwaita::ActionRow::builder()
</span><span>            .</span><span style="color:#96b5b4;">title</span><span>(&amp;format!(&quot;</span><span style="color:#a3be8c;">Notification </span><span style="color:#d08770;">{}</span><span>&quot;, i))
</span><span>            .</span><span style="color:#96b5b4;">subtitle</span><span>(&quot;</span><span style="color:#a3be8c;">2 minutes ago</span><span>&quot;)
</span><span>            .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>        expander.</span><span style="color:#96b5b4;">add_row</span><span>(&amp;row);
</span><span>    }
</span><span>    
</span><span>    expander
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Toggle expander programmatically
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">toggle_expander</span><span>(</span><span style="color:#bf616a;">expander</span><span>: &amp;adwaita::ExpanderRow) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> expanded = expander.</span><span style="color:#96b5b4;">is_expanded</span><span>();
</span><span>    expander.</span><span style="color:#96b5b4;">set_expanded</span><span>(!expanded);
</span><span>}
</span></code></pre>
<p><strong>Python Example</strong>:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_expander_row</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create an expander row with child rows.&quot;&quot;&quot;
</span><span>    expander = Adw.</span><span style="color:#bf616a;">ExpanderRow</span><span>(
</span><span>        </span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Advanced Settings</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">subtitle</span><span>=&quot;</span><span style="color:#a3be8c;">Configure advanced options</span><span>&quot;
</span><span>    )
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Add child rows
</span><span>    row1 = Adw.</span><span style="color:#bf616a;">ActionRow</span><span>(</span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Debug Mode</span><span>&quot;)
</span><span>    toggle1 = Gtk.</span><span style="color:#bf616a;">Switch</span><span>()
</span><span>    toggle1.</span><span style="color:#bf616a;">set_valign</span><span>(Gtk.Align.</span><span style="color:#bf616a;">CENTER</span><span>)
</span><span>    row1.</span><span style="color:#bf616a;">add_suffix</span><span>(toggle1)
</span><span>    row1.</span><span style="color:#bf616a;">set_activatable_widget</span><span>(toggle1)
</span><span>    
</span><span>    row2 = Adw.</span><span style="color:#bf616a;">ActionRow</span><span>(</span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Verbose Logging</span><span>&quot;)
</span><span>    toggle2 = Gtk.</span><span style="color:#bf616a;">Switch</span><span>()
</span><span>    toggle2.</span><span style="color:#bf616a;">set_valign</span><span>(Gtk.Align.</span><span style="color:#bf616a;">CENTER</span><span>)
</span><span>    row2.</span><span style="color:#bf616a;">add_suffix</span><span>(toggle2)
</span><span>    row2.</span><span style="color:#bf616a;">set_activatable_widget</span><span>(toggle2)
</span><span>    
</span><span>    expander.</span><span style="color:#bf616a;">add_row</span><span>(row1)
</span><span>    expander.</span><span style="color:#bf616a;">add_row</span><span>(row2)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">return </span><span>expander
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_expander_with_icon</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create an expander row with icon and multiple children.&quot;&quot;&quot;
</span><span>    expander = Adw.</span><span style="color:#bf616a;">ExpanderRow</span><span>(
</span><span>        </span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Notifications</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">subtitle</span><span>=&quot;</span><span style="color:#a3be8c;">3 new notifications</span><span>&quot;
</span><span>    )
</span><span>    
</span><span>    icon = Gtk.Image.</span><span style="color:#bf616a;">new_from_icon_name</span><span>(&quot;</span><span style="color:#a3be8c;">notification-symbolic</span><span>&quot;)
</span><span>    expander.</span><span style="color:#bf616a;">add_prefix</span><span>(icon)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Add notifications
</span><span>    </span><span style="color:#b48ead;">for </span><span>i </span><span style="color:#b48ead;">in </span><span style="color:#96b5b4;">range</span><span>(</span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">4</span><span>):
</span><span>        row = Adw.</span><span style="color:#bf616a;">ActionRow</span><span>(
</span><span>            </span><span style="color:#bf616a;">title</span><span>=</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">Notification </span><span>{i}&quot;,
</span><span>            </span><span style="color:#bf616a;">subtitle</span><span>=&quot;</span><span style="color:#a3be8c;">2 minutes ago</span><span>&quot;
</span><span>        )
</span><span>        expander.</span><span style="color:#bf616a;">add_row</span><span>(row)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">return </span><span>expander
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">toggle_expander</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">expander</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Toggle expander state programmatically.&quot;&quot;&quot;
</span><span>    expanded = expander.</span><span style="color:#bf616a;">get_expanded</span><span>()
</span><span>    expander.</span><span style="color:#bf616a;">set_expanded</span><span>(not expanded)
</span></code></pre>
<h3 id="adwcomborow">AdwComboRow</h3>
<p>Combo rows provide a dropdown selection within a list.</p>
<p><strong>Rust Example</strong>:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">use </span><span>adwaita::prelude::*;
</span><span style="color:#b48ead;">use </span><span>gtk::glib;
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_combo_row</span><span>() -&gt; adwaita::ComboRow {
</span><span>    </span><span style="color:#65737e;">// Create string list
</span><span>    </span><span style="color:#b48ead;">let</span><span> model = gtk::StringList::new(&amp;[&quot;</span><span style="color:#a3be8c;">Light</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">Dark</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">Follow System</span><span>&quot;]);
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> combo = adwaita::ComboRow::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&quot;</span><span style="color:#a3be8c;">Theme</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">subtitle</span><span>(&quot;</span><span style="color:#a3be8c;">Choose appearance</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">model</span><span>(&amp;model)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Set initial selection
</span><span>    combo.</span><span style="color:#96b5b4;">set_selected</span><span>(</span><span style="color:#d08770;">2</span><span>); </span><span style="color:#65737e;">// &quot;Follow System&quot;
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Connect to selection change
</span><span>    combo.</span><span style="color:#96b5b4;">connect_selected_notify</span><span>(|</span><span style="color:#bf616a;">combo</span><span>| {
</span><span>        </span><span style="color:#b48ead;">let</span><span> selected = combo.</span><span style="color:#96b5b4;">selected</span><span>();
</span><span>        println!(&quot;</span><span style="color:#a3be8c;">Selected: </span><span style="color:#d08770;">{}</span><span>&quot;, selected);
</span><span>    });
</span><span>    
</span><span>    combo
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Combo row with custom display
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_combo_row_custom</span><span>() -&gt; adwaita::ComboRow {
</span><span>    </span><span style="color:#b48ead;">use </span><span>gtk::gio;
</span><span>    
</span><span>    #[</span><span style="color:#bf616a;">derive</span><span>(Clone)]
</span><span>    </span><span style="color:#b48ead;">struct </span><span>QualityOption {
</span><span>        </span><span style="color:#bf616a;">name</span><span>: String,
</span><span>        </span><span style="color:#bf616a;">value</span><span>: </span><span style="color:#b48ead;">i32</span><span>,
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Create custom model
</span><span>    </span><span style="color:#b48ead;">let</span><span> store = gio::ListStore::new::&lt;glib::BoxedAnyObject&gt;();
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> options = vec![
</span><span>        QualityOption { name: &quot;</span><span style="color:#a3be8c;">Low (480p)</span><span>&quot;.</span><span style="color:#96b5b4;">to_string</span><span>(), value: </span><span style="color:#d08770;">480 </span><span>},
</span><span>        QualityOption { name: &quot;</span><span style="color:#a3be8c;">Medium (720p)</span><span>&quot;.</span><span style="color:#96b5b4;">to_string</span><span>(), value: </span><span style="color:#d08770;">720 </span><span>},
</span><span>        QualityOption { name: &quot;</span><span style="color:#a3be8c;">High (1080p)</span><span>&quot;.</span><span style="color:#96b5b4;">to_string</span><span>(), value: </span><span style="color:#d08770;">1080 </span><span>},
</span><span>    ];
</span><span>    
</span><span>    </span><span style="color:#b48ead;">for</span><span> option in options {
</span><span>        store.</span><span style="color:#96b5b4;">append</span><span>(&amp;glib::BoxedAnyObject::new(option));
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> combo = adwaita::ComboRow::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&quot;</span><span style="color:#a3be8c;">Video Quality</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">model</span><span>(&amp;store)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Setup expression to display name
</span><span>    </span><span style="color:#b48ead;">let</span><span> expression = gtk::PropertyExpression::new(
</span><span>        glib::BoxedAnyObject::static_type(),
</span><span>        None::&lt;&amp;gtk::Expression&gt;,
</span><span>        &quot;</span><span style="color:#a3be8c;">name</span><span>&quot;,
</span><span>    );
</span><span>    combo.</span><span style="color:#96b5b4;">set_expression</span><span>(Some(&amp;expression));
</span><span>    
</span><span>    combo
</span><span>}
</span></code></pre>
<p><strong>Python Example</strong>:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_combo_row</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create a combo row with string options.&quot;&quot;&quot;
</span><span>    model = Gtk.StringList.</span><span style="color:#bf616a;">new</span><span>([&quot;</span><span style="color:#a3be8c;">Light</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">Dark</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">Follow System</span><span>&quot;])
</span><span>    
</span><span>    combo = Adw.</span><span style="color:#bf616a;">ComboRow</span><span>(
</span><span>        </span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Theme</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">subtitle</span><span>=&quot;</span><span style="color:#a3be8c;">Choose appearance</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">model</span><span>=model
</span><span>    )
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Set initial selection
</span><span>    combo.</span><span style="color:#bf616a;">set_selected</span><span>(</span><span style="color:#d08770;">2</span><span>)  </span><span style="color:#65737e;"># &quot;Follow System&quot;
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Connect to selection change
</span><span>    combo.</span><span style="color:#bf616a;">connect</span><span>(&#39;</span><span style="color:#a3be8c;">notify::selected</span><span>&#39;, </span><span style="color:#bf616a;">self</span><span>.on_theme_changed)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">return </span><span>combo
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">on_theme_changed</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">combo</span><span>, </span><span style="color:#bf616a;">_pspec</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Handle theme selection change.&quot;&quot;&quot;
</span><span>    selected = combo.</span><span style="color:#bf616a;">get_selected</span><span>()
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">Selected: </span><span>{selected}&quot;)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_combo_row_custom</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create a combo row with custom model.&quot;&quot;&quot;
</span><span>    </span><span style="color:#b48ead;">from </span><span>gi.repository </span><span style="color:#b48ead;">import </span><span>Gio
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Create list store
</span><span>    store = Gio.ListStore.</span><span style="color:#bf616a;">new</span><span>(Gtk.StringObject)
</span><span>    store.</span><span style="color:#bf616a;">append</span><span>(Gtk.StringObject.</span><span style="color:#bf616a;">new</span><span>(&quot;</span><span style="color:#a3be8c;">Low (480p)</span><span>&quot;))
</span><span>    store.</span><span style="color:#bf616a;">append</span><span>(Gtk.StringObject.</span><span style="color:#bf616a;">new</span><span>(&quot;</span><span style="color:#a3be8c;">Medium (720p)</span><span>&quot;))
</span><span>    store.</span><span style="color:#bf616a;">append</span><span>(Gtk.StringObject.</span><span style="color:#bf616a;">new</span><span>(&quot;</span><span style="color:#a3be8c;">High (1080p)</span><span>&quot;))
</span><span>    
</span><span>    combo = Adw.</span><span style="color:#bf616a;">ComboRow</span><span>(
</span><span>        </span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Video Quality</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">model</span><span>=store
</span><span>    )
</span><span>    
</span><span>    </span><span style="color:#b48ead;">return </span><span>combo
</span></code></pre>
<h3 id="adwentryrow">AdwEntryRow</h3>
<p>Entry rows provide inline text editing within lists.</p>
<p><strong>Rust Example</strong>:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">use </span><span>adwaita::prelude::*;
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_entry_row</span><span>() -&gt; adwaita::EntryRow {
</span><span>    adwaita::EntryRow::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&quot;</span><span style="color:#a3be8c;">Username</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>()
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Entry row with validation
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_validated_entry_row</span><span>() -&gt; adwaita::EntryRow {
</span><span>    </span><span style="color:#b48ead;">let</span><span> entry = adwaita::EntryRow::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&quot;</span><span style="color:#a3be8c;">Email Address</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Add suffix icon
</span><span>    </span><span style="color:#b48ead;">let</span><span> icon = gtk::Image::from_icon_name(&quot;</span><span style="color:#a3be8c;">emblem-ok-symbolic</span><span>&quot;);
</span><span>    icon.</span><span style="color:#96b5b4;">set_visible</span><span>(</span><span style="color:#d08770;">false</span><span>);
</span><span>    entry.</span><span style="color:#96b5b4;">add_suffix</span><span>(&amp;icon);
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Validate on change
</span><span>    entry.</span><span style="color:#96b5b4;">connect_changed</span><span>(glib::clone!(
</span><span>        #[</span><span style="color:#bf616a;">weak</span><span>]
</span><span>        icon,
</span><span>        </span><span style="color:#b48ead;">move </span><span>|entry| {
</span><span>            </span><span style="color:#b48ead;">let</span><span> text = entry.</span><span style="color:#96b5b4;">text</span><span>();
</span><span>            </span><span style="color:#b48ead;">let</span><span> is_valid = text.</span><span style="color:#96b5b4;">contains</span><span>(&#39;</span><span style="color:#a3be8c;">@</span><span>&#39;) &amp;&amp; text.</span><span style="color:#96b5b4;">contains</span><span>(&#39;</span><span style="color:#a3be8c;">.</span><span>&#39;);
</span><span>            icon.</span><span style="color:#96b5b4;">set_visible</span><span>(is_valid);
</span><span>            
</span><span>            </span><span style="color:#b48ead;">if</span><span> is_valid {
</span><span>                entry.</span><span style="color:#96b5b4;">remove_css_class</span><span>(&quot;</span><span style="color:#a3be8c;">error</span><span>&quot;);
</span><span>            } </span><span style="color:#b48ead;">else if </span><span>!text.</span><span style="color:#96b5b4;">is_empty</span><span>() {
</span><span>                entry.</span><span style="color:#96b5b4;">add_css_class</span><span>(&quot;</span><span style="color:#a3be8c;">error</span><span>&quot;);
</span><span>            } </span><span style="color:#b48ead;">else </span><span>{
</span><span>                entry.</span><span style="color:#96b5b4;">remove_css_class</span><span>(&quot;</span><span style="color:#a3be8c;">error</span><span>&quot;);
</span><span>            }
</span><span>        }
</span><span>    ));
</span><span>    
</span><span>    entry
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Password entry row
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_password_entry_row</span><span>() -&gt; adwaita::PasswordEntryRow {
</span><span>    adwaita::PasswordEntryRow::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&quot;</span><span style="color:#a3be8c;">Password</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>()
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Entry row with apply button
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_entry_with_apply</span><span>() -&gt; adwaita::EntryRow {
</span><span>    </span><span style="color:#b48ead;">let</span><span> entry = adwaita::EntryRow::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&quot;</span><span style="color:#a3be8c;">Server URL</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">show_apply_button</span><span>(</span><span style="color:#d08770;">true</span><span>)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>    
</span><span>    entry.</span><span style="color:#96b5b4;">connect_apply</span><span>(|</span><span style="color:#bf616a;">entry</span><span>| {
</span><span>        </span><span style="color:#b48ead;">let</span><span> text = entry.</span><span style="color:#96b5b4;">text</span><span>();
</span><span>        println!(&quot;</span><span style="color:#a3be8c;">Apply: </span><span style="color:#d08770;">{}</span><span>&quot;, text);
</span><span>    });
</span><span>    
</span><span>    entry
</span><span>}
</span></code></pre>
<p><strong>Python Example</strong>:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_entry_row</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create a simple entry row.&quot;&quot;&quot;
</span><span>    </span><span style="color:#b48ead;">return </span><span>Adw.</span><span style="color:#bf616a;">EntryRow</span><span>(</span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Username</span><span>&quot;)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_validated_entry_row</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create an entry row with validation.&quot;&quot;&quot;
</span><span>    entry = Adw.</span><span style="color:#bf616a;">EntryRow</span><span>(</span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Email Address</span><span>&quot;)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Add suffix icon
</span><span>    icon = Gtk.Image.</span><span style="color:#bf616a;">new_from_icon_name</span><span>(&quot;</span><span style="color:#a3be8c;">emblem-ok-symbolic</span><span>&quot;)
</span><span>    icon.</span><span style="color:#bf616a;">set_visible</span><span>(</span><span style="color:#d08770;">False</span><span>)
</span><span>    entry.</span><span style="color:#bf616a;">add_suffix</span><span>(icon)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Validate on change
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">on_changed</span><span>(</span><span style="color:#bf616a;">entry</span><span>):
</span><span>        text = entry.</span><span style="color:#bf616a;">get_text</span><span>()
</span><span>        is_valid = &#39;</span><span style="color:#a3be8c;">@</span><span>&#39; in text and &#39;</span><span style="color:#a3be8c;">.</span><span>&#39; in text
</span><span>        icon.</span><span style="color:#bf616a;">set_visible</span><span>(is_valid)
</span><span>        
</span><span>        </span><span style="color:#b48ead;">if </span><span>is_valid:
</span><span>            entry.</span><span style="color:#bf616a;">remove_css_class</span><span>(&#39;</span><span style="color:#a3be8c;">error</span><span>&#39;)
</span><span>        </span><span style="color:#b48ead;">elif </span><span>text:
</span><span>            entry.</span><span style="color:#bf616a;">add_css_class</span><span>(&#39;</span><span style="color:#a3be8c;">error</span><span>&#39;)
</span><span>        </span><span style="color:#b48ead;">else</span><span>:
</span><span>            entry.</span><span style="color:#bf616a;">remove_css_class</span><span>(&#39;</span><span style="color:#a3be8c;">error</span><span>&#39;)
</span><span>    
</span><span>    entry.</span><span style="color:#bf616a;">connect</span><span>(&#39;</span><span style="color:#a3be8c;">changed</span><span>&#39;, on_changed)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">return </span><span>entry
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_password_entry_row</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create a password entry row.&quot;&quot;&quot;
</span><span>    </span><span style="color:#b48ead;">return </span><span>Adw.</span><span style="color:#bf616a;">PasswordEntryRow</span><span>(</span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Password</span><span>&quot;)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_entry_with_apply</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create an entry row with apply button.&quot;&quot;&quot;
</span><span>    entry = Adw.</span><span style="color:#bf616a;">EntryRow</span><span>(
</span><span>        </span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Server URL</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">show_apply_button</span><span>=</span><span style="color:#d08770;">True
</span><span>    )
</span><span>    
</span><span>    entry.</span><span style="color:#bf616a;">connect</span><span>(&#39;</span><span style="color:#a3be8c;">apply</span><span>&#39;, </span><span style="color:#bf616a;">self</span><span>.on_url_apply)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">return </span><span>entry
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">on_url_apply</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">entry</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Handle apply button click.&quot;&quot;&quot;
</span><span>    text = entry.</span><span style="color:#bf616a;">get_text</span><span>()
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">Apply: </span><span>{text}&quot;)
</span></code></pre>
<h3 id="adwspinrow">AdwSpinRow</h3>
<p>Spin rows provide numeric input with increment/decrement buttons.</p>
<p><strong>Rust Example</strong>:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">use </span><span>adwaita::prelude::*;
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_spin_row</span><span>() -&gt; adwaita::SpinRow {
</span><span>    </span><span style="color:#b48ead;">let</span><span> adjustment = gtk::Adjustment::new(
</span><span>        </span><span style="color:#d08770;">5.0</span><span>,    </span><span style="color:#65737e;">// initial value
</span><span>        </span><span style="color:#d08770;">0.0</span><span>,    </span><span style="color:#65737e;">// minimum
</span><span>        </span><span style="color:#d08770;">100.0</span><span>,  </span><span style="color:#65737e;">// maximum
</span><span>        </span><span style="color:#d08770;">1.0</span><span>,    </span><span style="color:#65737e;">// step increment
</span><span>        </span><span style="color:#d08770;">10.0</span><span>,   </span><span style="color:#65737e;">// page increment
</span><span>        </span><span style="color:#d08770;">0.0</span><span>,    </span><span style="color:#65737e;">// page size
</span><span>    );
</span><span>    
</span><span>    adwaita::SpinRow::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&quot;</span><span style="color:#a3be8c;">Volume</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">subtitle</span><span>(&quot;</span><span style="color:#a3be8c;">Adjust the volume level</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">adjustment</span><span>(&amp;adjustment)
</span><span>        .</span><span style="color:#96b5b4;">digits</span><span>(</span><span style="color:#d08770;">0</span><span>) </span><span style="color:#65737e;">// No decimal places
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>()
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Spin row with decimal values
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_decimal_spin_row</span><span>() -&gt; adwaita::SpinRow {
</span><span>    </span><span style="color:#b48ead;">let</span><span> adjustment = gtk::Adjustment::new(</span><span style="color:#d08770;">1.0</span><span>, </span><span style="color:#d08770;">0.0</span><span>, </span><span style="color:#d08770;">10.0</span><span>, </span><span style="color:#d08770;">0.1</span><span>, </span><span style="color:#d08770;">1.0</span><span>, </span><span style="color:#d08770;">0.0</span><span>);
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> spin = adwaita::SpinRow::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&quot;</span><span style="color:#a3be8c;">Playback Speed</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">adjustment</span><span>(&amp;adjustment)
</span><span>        .</span><span style="color:#96b5b4;">digits</span><span>(</span><span style="color:#d08770;">1</span><span>) </span><span style="color:#65737e;">// One decimal place
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Connect to value change
</span><span>    spin.</span><span style="color:#96b5b4;">connect_output</span><span>(|</span><span style="color:#bf616a;">spin</span><span>| {
</span><span>        </span><span style="color:#b48ead;">let</span><span> value = spin.</span><span style="color:#96b5b4;">value</span><span>();
</span><span>        println!(&quot;</span><span style="color:#a3be8c;">Speed: </span><span style="color:#d08770;">{:.1}</span><span style="color:#a3be8c;">x</span><span>&quot;, value);
</span><span>        glib::Propagation::Proceed
</span><span>    });
</span><span>    
</span><span>    spin
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Spin row with wrap
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_spin_row_with_wrap</span><span>() -&gt; adwaita::SpinRow {
</span><span>    </span><span style="color:#b48ead;">let</span><span> adjustment = gtk::Adjustment::new(</span><span style="color:#d08770;">1.0</span><span>, </span><span style="color:#d08770;">1.0</span><span>, </span><span style="color:#d08770;">12.0</span><span>, </span><span style="color:#d08770;">1.0</span><span>, </span><span style="color:#d08770;">1.0</span><span>, </span><span style="color:#d08770;">0.0</span><span>);
</span><span>    
</span><span>    adwaita::SpinRow::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&quot;</span><span style="color:#a3be8c;">Month</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">adjustment</span><span>(&amp;adjustment)
</span><span>        .</span><span style="color:#96b5b4;">wrap</span><span>(</span><span style="color:#d08770;">true</span><span>) </span><span style="color:#65737e;">// Wrap from 12 to 1
</span><span>        .</span><span style="color:#96b5b4;">digits</span><span>(</span><span style="color:#d08770;">0</span><span>)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>()
</span><span>}
</span></code></pre>
<p><strong>Python Example</strong>:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_spin_row</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create a spin row for integer values.&quot;&quot;&quot;
</span><span>    adjustment = Gtk.</span><span style="color:#bf616a;">Adjustment</span><span>(
</span><span>        </span><span style="color:#bf616a;">value</span><span>=</span><span style="color:#d08770;">5</span><span>,
</span><span>        </span><span style="color:#bf616a;">lower</span><span>=</span><span style="color:#d08770;">0</span><span>,
</span><span>        </span><span style="color:#bf616a;">upper</span><span>=</span><span style="color:#d08770;">100</span><span>,
</span><span>        </span><span style="color:#bf616a;">step_increment</span><span>=</span><span style="color:#d08770;">1</span><span>,
</span><span>        </span><span style="color:#bf616a;">page_increment</span><span>=</span><span style="color:#d08770;">10</span><span>,
</span><span>        </span><span style="color:#bf616a;">page_size</span><span>=</span><span style="color:#d08770;">0
</span><span>    )
</span><span>    
</span><span>    </span><span style="color:#b48ead;">return </span><span>Adw.</span><span style="color:#bf616a;">SpinRow</span><span>(
</span><span>        </span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Volume</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">subtitle</span><span>=&quot;</span><span style="color:#a3be8c;">Adjust the volume level</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">adjustment</span><span>=adjustment,
</span><span>        </span><span style="color:#bf616a;">digits</span><span>=</span><span style="color:#d08770;">0
</span><span>    )
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_decimal_spin_row</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create a spin row with decimal values.&quot;&quot;&quot;
</span><span>    adjustment = Gtk.</span><span style="color:#bf616a;">Adjustment</span><span>(
</span><span>        </span><span style="color:#bf616a;">value</span><span>=</span><span style="color:#d08770;">1.0</span><span>,
</span><span>        </span><span style="color:#bf616a;">lower</span><span>=</span><span style="color:#d08770;">0.0</span><span>,
</span><span>        </span><span style="color:#bf616a;">upper</span><span>=</span><span style="color:#d08770;">10.0</span><span>,
</span><span>        </span><span style="color:#bf616a;">step_increment</span><span>=</span><span style="color:#d08770;">0.1</span><span>,
</span><span>        </span><span style="color:#bf616a;">page_increment</span><span>=</span><span style="color:#d08770;">1.0</span><span>,
</span><span>        </span><span style="color:#bf616a;">page_size</span><span>=</span><span style="color:#d08770;">0
</span><span>    )
</span><span>    
</span><span>    spin = Adw.</span><span style="color:#bf616a;">SpinRow</span><span>(
</span><span>        </span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Playback Speed</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">adjustment</span><span>=adjustment,
</span><span>        </span><span style="color:#bf616a;">digits</span><span>=</span><span style="color:#d08770;">1
</span><span>    )
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Connect to value change
</span><span>    spin.</span><span style="color:#bf616a;">connect</span><span>(&#39;</span><span style="color:#a3be8c;">output</span><span>&#39;, </span><span style="color:#bf616a;">self</span><span>.on_speed_changed)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">return </span><span>spin
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">on_speed_changed</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">spin</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Handle speed value change.&quot;&quot;&quot;
</span><span>    value = spin.</span><span style="color:#bf616a;">get_value</span><span>()
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">Speed: </span><span>{value</span><span style="color:#d08770;">:.1f</span><span>}</span><span style="color:#a3be8c;">x</span><span>&quot;)
</span><span>    </span><span style="color:#b48ead;">return </span><span style="color:#d08770;">False
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_spin_row_with_wrap</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create a spin row with wrapping.&quot;&quot;&quot;
</span><span>    adjustment = Gtk.</span><span style="color:#bf616a;">Adjustment</span><span>(
</span><span>        </span><span style="color:#bf616a;">value</span><span>=</span><span style="color:#d08770;">1</span><span>,
</span><span>        </span><span style="color:#bf616a;">lower</span><span>=</span><span style="color:#d08770;">1</span><span>,
</span><span>        </span><span style="color:#bf616a;">upper</span><span>=</span><span style="color:#d08770;">12</span><span>,
</span><span>        </span><span style="color:#bf616a;">step_increment</span><span>=</span><span style="color:#d08770;">1</span><span>,
</span><span>        </span><span style="color:#bf616a;">page_increment</span><span>=</span><span style="color:#d08770;">1</span><span>,
</span><span>        </span><span style="color:#bf616a;">page_size</span><span>=</span><span style="color:#d08770;">0
</span><span>    )
</span><span>    
</span><span>    </span><span style="color:#b48ead;">return </span><span>Adw.</span><span style="color:#bf616a;">SpinRow</span><span>(
</span><span>        </span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Month</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">adjustment</span><span>=adjustment,
</span><span>        </span><span style="color:#bf616a;">wrap</span><span>=</span><span style="color:#d08770;">True</span><span>,
</span><span>        </span><span style="color:#bf616a;">digits</span><span>=</span><span style="color:#d08770;">0
</span><span>    )
</span></code></pre>
<h3 id="adwswitchrow">AdwSwitchRow</h3>
<p>Switch rows provide a toggle switch within a list row.</p>
<p><strong>Rust Example</strong>:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">use </span><span>adwaita::prelude::*;
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_switch_row</span><span>() -&gt; adwaita::SwitchRow {
</span><span>    </span><span style="color:#b48ead;">let</span><span> switch_row = adwaita::SwitchRow::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&quot;</span><span style="color:#a3be8c;">Wi-Fi</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">subtitle</span><span>(&quot;</span><span style="color:#a3be8c;">Connect to wireless networks</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Connect to activation
</span><span>    switch_row.</span><span style="color:#96b5b4;">connect_active_notify</span><span>(|</span><span style="color:#bf616a;">row</span><span>| {
</span><span>        </span><span style="color:#b48ead;">let</span><span> active = row.</span><span style="color:#96b5b4;">is_active</span><span>();
</span><span>        println!(&quot;</span><span style="color:#a3be8c;">Wi-Fi: </span><span style="color:#d08770;">{}</span><span>&quot;, </span><span style="color:#b48ead;">if</span><span> active { &quot;</span><span style="color:#a3be8c;">On</span><span>&quot; } </span><span style="color:#b48ead;">else </span><span>{ &quot;</span><span style="color:#a3be8c;">Off</span><span>&quot; });
</span><span>    });
</span><span>    
</span><span>    switch_row
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Switch row with icon
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_switch_row_with_icon</span><span>() -&gt; adwaita::SwitchRow {
</span><span>    </span><span style="color:#b48ead;">let</span><span> row = adwaita::SwitchRow::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&quot;</span><span style="color:#a3be8c;">Bluetooth</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">subtitle</span><span>(&quot;</span><span style="color:#a3be8c;">Connect to devices</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> icon = gtk::Image::from_icon_name(&quot;</span><span style="color:#a3be8c;">bluetooth-symbolic</span><span>&quot;);
</span><span>    row.</span><span style="color:#96b5b4;">add_prefix</span><span>(&amp;icon);
</span><span>    
</span><span>    row
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Bind switch row to GSettings
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_bound_switch_row</span><span>(</span><span style="color:#bf616a;">settings</span><span>: &amp;gtk::gio::Settings) -&gt; adwaita::SwitchRow {
</span><span>    </span><span style="color:#b48ead;">let</span><span> row = adwaita::SwitchRow::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&quot;</span><span style="color:#a3be8c;">Dark Mode</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">subtitle</span><span>(&quot;</span><span style="color:#a3be8c;">Use dark appearance</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Bind to settings
</span><span>    settings
</span><span>        .</span><span style="color:#96b5b4;">bind</span><span>(&quot;</span><span style="color:#a3be8c;">dark-mode</span><span>&quot;, &amp;row, &quot;</span><span style="color:#a3be8c;">active</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>    
</span><span>    row
</span><span>}
</span></code></pre>
<p><strong>Python Example</strong>:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_switch_row</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create a simple switch row.&quot;&quot;&quot;
</span><span>    switch_row = Adw.</span><span style="color:#bf616a;">SwitchRow</span><span>(
</span><span>        </span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Wi-Fi</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">subtitle</span><span>=&quot;</span><span style="color:#a3be8c;">Connect to wireless networks</span><span>&quot;
</span><span>    )
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Connect to activation
</span><span>    switch_row.</span><span style="color:#bf616a;">connect</span><span>(&#39;</span><span style="color:#a3be8c;">notify::active</span><span>&#39;, </span><span style="color:#bf616a;">self</span><span>.on_wifi_toggled)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">return </span><span>switch_row
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">on_wifi_toggled</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">row</span><span>, </span><span style="color:#bf616a;">_pspec</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Handle Wi-Fi toggle.&quot;&quot;&quot;
</span><span>    active = row.</span><span style="color:#bf616a;">get_active</span><span>()
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">Wi-Fi: </span><span>{&#39;</span><span style="color:#a3be8c;">On</span><span>&#39; </span><span style="color:#b48ead;">if </span><span>active </span><span style="color:#b48ead;">else </span><span>&#39;</span><span style="color:#a3be8c;">Off</span><span>&#39;}&quot;)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_switch_row_with_icon</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create a switch row with icon.&quot;&quot;&quot;
</span><span>    row = Adw.</span><span style="color:#bf616a;">SwitchRow</span><span>(
</span><span>        </span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Bluetooth</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">subtitle</span><span>=&quot;</span><span style="color:#a3be8c;">Connect to devices</span><span>&quot;
</span><span>    )
</span><span>    
</span><span>    icon = Gtk.Image.</span><span style="color:#bf616a;">new_from_icon_name</span><span>(&quot;</span><span style="color:#a3be8c;">bluetooth-symbolic</span><span>&quot;)
</span><span>    row.</span><span style="color:#bf616a;">add_prefix</span><span>(icon)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">return </span><span>row
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_bound_switch_row</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">settings</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create a switch row bound to GSettings.&quot;&quot;&quot;
</span><span>    row = Adw.</span><span style="color:#bf616a;">SwitchRow</span><span>(
</span><span>        </span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Dark Mode</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">subtitle</span><span>=&quot;</span><span style="color:#a3be8c;">Use dark appearance</span><span>&quot;
</span><span>    )
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Bind to settings
</span><span>    settings.</span><span style="color:#bf616a;">bind</span><span>(&#39;</span><span style="color:#a3be8c;">dark-mode</span><span>&#39;, row, &#39;</span><span style="color:#a3be8c;">active</span><span>&#39;,
</span><span>                  Gio.SettingsBindFlags.</span><span style="color:#bf616a;">DEFAULT</span><span>)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">return </span><span>row
</span></code></pre>
<h2 id="chapter-7-complex-widgets">Chapter 7: Complex Widgets</h2>
<h3 id="adwnavigationsplitview">AdwNavigationSplitView</h3>
<p>The navigation split view is the foundation for sidebar-based navigation.</p>
<p><strong>Rust Example</strong>:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">use </span><span>adwaita::prelude::*;
</span><span style="color:#b48ead;">use </span><span>gtk::glib;
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_navigation_split_view</span><span>() -&gt; adwaita::NavigationSplitView {
</span><span>    </span><span style="color:#b48ead;">let</span><span> split_view = adwaita::NavigationSplitView::new();
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Create sidebar
</span><span>    </span><span style="color:#b48ead;">let</span><span> sidebar = </span><span style="color:#96b5b4;">create_sidebar</span><span>();
</span><span>    </span><span style="color:#b48ead;">let</span><span> sidebar_page = adwaita::NavigationPage::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&quot;</span><span style="color:#a3be8c;">Sidebar</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">child</span><span>(&amp;sidebar)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Create content
</span><span>    </span><span style="color:#b48ead;">let</span><span> content = </span><span style="color:#96b5b4;">create_content</span><span>();
</span><span>    </span><span style="color:#b48ead;">let</span><span> content_page = adwaita::NavigationPage::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&quot;</span><span style="color:#a3be8c;">Content</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">child</span><span>(&amp;content)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>    
</span><span>    split_view.</span><span style="color:#96b5b4;">set_sidebar</span><span>(Some(&amp;sidebar_page));
</span><span>    split_view.</span><span style="color:#96b5b4;">set_content</span><span>(Some(&amp;content_page));
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Configure behavior
</span><span>    split_view.</span><span style="color:#96b5b4;">set_show_content</span><span>(</span><span style="color:#d08770;">true</span><span>);
</span><span>    split_view.</span><span style="color:#96b5b4;">set_min_sidebar_width</span><span>(</span><span style="color:#d08770;">200.0</span><span>);
</span><span>    split_view.</span><span style="color:#96b5b4;">set_max_sidebar_width</span><span>(</span><span style="color:#d08770;">300.0</span><span>);
</span><span>    split_view.</span><span style="color:#96b5b4;">set_sidebar_width_fraction</span><span>(</span><span style="color:#d08770;">0.25</span><span>);
</span><span>    
</span><span>    split_view
</span><span>}
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_sidebar</span><span>() -&gt; gtk::Widget {
</span><span>    </span><span style="color:#b48ead;">let</span><span> list_box = gtk::ListBox::new();
</span><span>    list_box.</span><span style="color:#96b5b4;">add_css_class</span><span>(&quot;</span><span style="color:#a3be8c;">navigation-sidebar</span><span>&quot;);
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> items = vec![&quot;</span><span style="color:#a3be8c;">Inbox</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">Sent</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">Drafts</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">Trash</span><span>&quot;];
</span><span>    </span><span style="color:#b48ead;">for</span><span> item in items {
</span><span>        </span><span style="color:#b48ead;">let</span><span> row = adwaita::ActionRow::builder()
</span><span>            .</span><span style="color:#96b5b4;">title</span><span>(item)
</span><span>            .</span><span style="color:#96b5b4;">activatable</span><span>(</span><span style="color:#d08770;">true</span><span>)
</span><span>            .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>        list_box.</span><span style="color:#96b5b4;">append</span><span>(&amp;row);
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> scrolled = gtk::ScrolledWindow::new();
</span><span>    scrolled.</span><span style="color:#96b5b4;">set_child</span><span>(Some(&amp;list_box));
</span><span>    scrolled.</span><span style="color:#96b5b4;">set_vexpand</span><span>(</span><span style="color:#d08770;">true</span><span>);
</span><span>    
</span><span>    scrolled.</span><span style="color:#96b5b4;">upcast</span><span>()
</span><span>}
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_content</span><span>() -&gt; gtk::Widget {
</span><span>    adwaita::StatusPage::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&quot;</span><span style="color:#a3be8c;">No Selection</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">description</span><span>(&quot;</span><span style="color:#a3be8c;">Select an item from the sidebar</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">icon_name</span><span>(&quot;</span><span style="color:#a3be8c;">mail-inbox-symbolic</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>()
</span><span>        .</span><span style="color:#96b5b4;">upcast</span><span>()
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Handle navigation
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">setup_navigation</span><span>(</span><span style="color:#bf616a;">split_view</span><span>: &amp;adwaita::NavigationSplitView, </span><span style="color:#bf616a;">list</span><span>: &amp;gtk::ListBox) {
</span><span>    list.</span><span style="color:#96b5b4;">connect_row_activated</span><span>(glib::clone!(
</span><span>        #[</span><span style="color:#bf616a;">weak</span><span>]
</span><span>        split_view,
</span><span>        </span><span style="color:#b48ead;">move </span><span>|_, row| {
</span><span>            </span><span style="color:#65737e;">// On mobile, hide sidebar when item selected
</span><span>            </span><span style="color:#b48ead;">if</span><span> split_view.</span><span style="color:#96b5b4;">is_collapsed</span><span>() {
</span><span>                split_view.</span><span style="color:#96b5b4;">set_show_content</span><span>(</span><span style="color:#d08770;">true</span><span>);
</span><span>            }
</span><span>        }
</span><span>    ));
</span><span>}
</span></code></pre>
<p><strong>Python Example</strong>:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_navigation_split_view</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create a navigation split view with sidebar.&quot;&quot;&quot;
</span><span>    split_view = Adw.</span><span style="color:#bf616a;">NavigationSplitView</span><span>()
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Create sidebar
</span><span>    sidebar = </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">create_sidebar</span><span>()
</span><span>    sidebar_page = Adw.</span><span style="color:#bf616a;">NavigationPage</span><span>(
</span><span>        </span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Sidebar</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">child</span><span>=sidebar
</span><span>    )
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Create content
</span><span>    content = </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">create_content</span><span>()
</span><span>    content_page = Adw.</span><span style="color:#bf616a;">NavigationPage</span><span>(
</span><span>        </span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Content</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">child</span><span>=content
</span><span>    )
</span><span>    
</span><span>    split_view.</span><span style="color:#bf616a;">set_sidebar</span><span>(sidebar_page)
</span><span>    split_view.</span><span style="color:#bf616a;">set_content</span><span>(content_page)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Configure behavior
</span><span>    split_view.</span><span style="color:#bf616a;">set_show_content</span><span>(</span><span style="color:#d08770;">True</span><span>)
</span><span>    split_view.</span><span style="color:#bf616a;">set_min_sidebar_width</span><span>(</span><span style="color:#d08770;">200</span><span>)
</span><span>    split_view.</span><span style="color:#bf616a;">set_max_sidebar_width</span><span>(</span><span style="color:#d08770;">300</span><span>)
</span><span>    split_view.</span><span style="color:#bf616a;">set_sidebar_width_fraction</span><span>(</span><span style="color:#d08770;">0.25</span><span>)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">return </span><span>split_view
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_sidebar</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create sidebar content.&quot;&quot;&quot;
</span><span>    list_box = Gtk.</span><span style="color:#bf616a;">ListBox</span><span>()
</span><span>    list_box.</span><span style="color:#bf616a;">add_css_class</span><span>(&#39;</span><span style="color:#a3be8c;">navigation-sidebar</span><span>&#39;)
</span><span>    
</span><span>    items = [&quot;</span><span style="color:#a3be8c;">Inbox</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">Sent</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">Drafts</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">Trash</span><span>&quot;]
</span><span>    </span><span style="color:#b48ead;">for </span><span>item </span><span style="color:#b48ead;">in </span><span>items:
</span><span>        row = Adw.</span><span style="color:#bf616a;">ActionRow</span><span>(
</span><span>            </span><span style="color:#bf616a;">title</span><span>=item,
</span><span>            </span><span style="color:#bf616a;">activatable</span><span>=</span><span style="color:#d08770;">True
</span><span>        )
</span><span>        list_box.</span><span style="color:#bf616a;">append</span><span>(row)
</span><span>    
</span><span>    scrolled = Gtk.</span><span style="color:#bf616a;">ScrolledWindow</span><span>()
</span><span>    scrolled.</span><span style="color:#bf616a;">set_child</span><span>(list_box)
</span><span>    scrolled.</span><span style="color:#bf616a;">set_vexpand</span><span>(</span><span style="color:#d08770;">True</span><span>)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Connect navigation
</span><span>    list_box.</span><span style="color:#bf616a;">connect</span><span>(&#39;</span><span style="color:#a3be8c;">row-activated</span><span>&#39;, </span><span style="color:#bf616a;">self</span><span>.on_sidebar_item_activated)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">return </span><span>scrolled
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_content</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create initial content view.&quot;&quot;&quot;
</span><span>    </span><span style="color:#b48ead;">return </span><span>Adw.</span><span style="color:#bf616a;">StatusPage</span><span>(
</span><span>        </span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">No Selection</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">description</span><span>=&quot;</span><span style="color:#a3be8c;">Select an item from the sidebar</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">icon_name</span><span>=&quot;</span><span style="color:#a3be8c;">mail-inbox-symbolic</span><span>&quot;
</span><span>    )
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">on_sidebar_item_activated</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">list_box</span><span>, </span><span style="color:#bf616a;">row</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Handle sidebar item activation.&quot;&quot;&quot;
</span><span>    </span><span style="color:#65737e;"># On mobile, hide sidebar when item selected
</span><span>    </span><span style="color:#b48ead;">if </span><span style="color:#bf616a;">self</span><span>.split_view.</span><span style="color:#bf616a;">get_collapsed</span><span>():
</span><span>        </span><span style="color:#bf616a;">self</span><span>.split_view.</span><span style="color:#bf616a;">set_show_content</span><span>(</span><span style="color:#d08770;">True</span><span>)
</span></code></pre>
<h3 id="adwnavigationview">AdwNavigationView</h3>
<p>Navigation view manages a stack of pages with back navigation.</p>
<p><strong>Rust Example</strong>:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">use </span><span>adwaita::prelude::*;
</span><span style="color:#b48ead;">use </span><span>gtk::glib;
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_navigation_view</span><span>() -&gt; adwaita::NavigationView {
</span><span>    </span><span style="color:#b48ead;">let</span><span> nav_view = adwaita::NavigationView::new();
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Create root page
</span><span>    </span><span style="color:#b48ead;">let</span><span> root_page = </span><span style="color:#96b5b4;">create_root_page</span><span>();
</span><span>    nav_view.</span><span style="color:#96b5b4;">add</span><span>(&amp;root_page);
</span><span>    
</span><span>    nav_view
</span><span>}
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_root_page</span><span>() -&gt; adwaita::NavigationPage {
</span><span>    </span><span style="color:#b48ead;">let</span><span> list = gtk::ListBox::new();
</span><span>    list.</span><span style="color:#96b5b4;">add_css_class</span><span>(&quot;</span><span style="color:#a3be8c;">boxed-list</span><span>&quot;);
</span><span>    
</span><span>    </span><span style="color:#b48ead;">for</span><span> i in </span><span style="color:#d08770;">1</span><span>..=</span><span style="color:#d08770;">10 </span><span>{
</span><span>        </span><span style="color:#b48ead;">let</span><span> row = adwaita::ActionRow::builder()
</span><span>            .</span><span style="color:#96b5b4;">title</span><span>(&amp;format!(&quot;</span><span style="color:#a3be8c;">Item </span><span style="color:#d08770;">{}</span><span>&quot;, i))
</span><span>            .</span><span style="color:#96b5b4;">activatable</span><span>(</span><span style="color:#d08770;">true</span><span>)
</span><span>            .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>        
</span><span>        </span><span style="color:#b48ead;">let</span><span> chevron = gtk::Image::from_icon_name(&quot;</span><span style="color:#a3be8c;">go-next-symbolic</span><span>&quot;);
</span><span>        row.</span><span style="color:#96b5b4;">add_suffix</span><span>(&amp;chevron);
</span><span>        
</span><span>        list.</span><span style="color:#96b5b4;">append</span><span>(&amp;row);
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> clamp = adwaita::Clamp::new();
</span><span>    clamp.</span><span style="color:#96b5b4;">set_child</span><span>(Some(&amp;list));
</span><span>    clamp.</span><span style="color:#96b5b4;">set_maximum_size</span><span>(</span><span style="color:#d08770;">600</span><span>);
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> scrolled = gtk::ScrolledWindow::new();
</span><span>    scrolled.</span><span style="color:#96b5b4;">set_child</span><span>(Some(&amp;clamp));
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> toolbar_view = adwaita::ToolbarView::new();
</span><span>    toolbar_view.</span><span style="color:#96b5b4;">set_content</span><span>(Some(&amp;scrolled));
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> header = adwaita::HeaderBar::new();
</span><span>    toolbar_view.</span><span style="color:#96b5b4;">add_top_bar</span><span>(&amp;header);
</span><span>    
</span><span>    adwaita::NavigationPage::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&quot;</span><span style="color:#a3be8c;">Items</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">child</span><span>(&amp;toolbar_view)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>()
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Navigate to detail page
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">navigate_to_detail</span><span>(</span><span style="color:#bf616a;">nav_view</span><span>: &amp;adwaita::NavigationView, </span><span style="color:#bf616a;">item_id</span><span>: </span><span style="color:#b48ead;">i32</span><span>) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> detail_page = </span><span style="color:#96b5b4;">create_detail_page</span><span>(item_id);
</span><span>    nav_view.</span><span style="color:#96b5b4;">push</span><span>(&amp;detail_page);
</span><span>}
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_detail_page</span><span>(</span><span style="color:#bf616a;">item_id</span><span>: </span><span style="color:#b48ead;">i32</span><span>) -&gt; adwaita::NavigationPage {
</span><span>    </span><span style="color:#b48ead;">let</span><span> content = adwaita::StatusPage::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&amp;format!(&quot;</span><span style="color:#a3be8c;">Item </span><span style="color:#d08770;">{}</span><span>&quot;, item_id))
</span><span>        .</span><span style="color:#96b5b4;">description</span><span>(&quot;</span><span style="color:#a3be8c;">Details about this item</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> toolbar_view = adwaita::ToolbarView::new();
</span><span>    toolbar_view.</span><span style="color:#96b5b4;">set_content</span><span>(Some(&amp;content));
</span><span>```rust
</span><span>    </span><span style="color:#b48ead;">let</span><span> header = adwaita::HeaderBar::new();
</span><span>    toolbar_view.</span><span style="color:#96b5b4;">add_top_bar</span><span>(&amp;header);
</span><span>    
</span><span>    adwaita::NavigationPage::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&amp;format!(&quot;</span><span style="color:#a3be8c;">Item </span><span style="color:#d08770;">{}</span><span>&quot;, item_id))
</span><span>        .</span><span style="color:#96b5b4;">child</span><span>(&amp;toolbar_view)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>()
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Navigate back programmatically
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">navigate_back</span><span>(</span><span style="color:#bf616a;">nav_view</span><span>: &amp;adwaita::NavigationView) {
</span><span>    </span><span style="color:#b48ead;">if</span><span> nav_view.</span><span style="color:#96b5b4;">navigation_stack</span><span>().</span><span style="color:#96b5b4;">n_items</span><span>() &gt; </span><span style="color:#d08770;">1 </span><span>{
</span><span>        nav_view.</span><span style="color:#96b5b4;">pop</span><span>();
</span><span>    }
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Pop to root
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">pop_to_root</span><span>(</span><span style="color:#bf616a;">nav_view</span><span>: &amp;adwaita::NavigationView) {
</span><span>    nav_view.</span><span style="color:#96b5b4;">pop_to_tag</span><span>(&quot;</span><span style="color:#a3be8c;">root</span><span>&quot;);
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Replace current page
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">replace_page</span><span>(</span><span style="color:#bf616a;">nav_view</span><span>: &amp;adwaita::NavigationView) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> new_page = </span><span style="color:#96b5b4;">create_detail_page</span><span>(</span><span style="color:#d08770;">99</span><span>);
</span><span>    nav_view.</span><span style="color:#96b5b4;">replace</span><span>(&amp;[new_page]);
</span><span>}
</span></code></pre>
<p><strong>Python Example</strong>:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_navigation_view</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create a navigation view with root page.&quot;&quot;&quot;
</span><span>    </span><span style="color:#bf616a;">self</span><span>.nav_view = Adw.</span><span style="color:#bf616a;">NavigationView</span><span>()
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Create root page
</span><span>    root_page = </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">create_root_page</span><span>()
</span><span>    </span><span style="color:#bf616a;">self</span><span>.nav_view.</span><span style="color:#bf616a;">add</span><span>(root_page)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">self</span><span>.nav_view
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_root_page</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create the root page with list.&quot;&quot;&quot;
</span><span>    list_box = Gtk.</span><span style="color:#bf616a;">ListBox</span><span>()
</span><span>    list_box.</span><span style="color:#bf616a;">add_css_class</span><span>(&#39;</span><span style="color:#a3be8c;">boxed-list</span><span>&#39;)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">for </span><span>i </span><span style="color:#b48ead;">in </span><span style="color:#96b5b4;">range</span><span>(</span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">11</span><span>):
</span><span>        row = Adw.</span><span style="color:#bf616a;">ActionRow</span><span>(
</span><span>            </span><span style="color:#bf616a;">title</span><span>=</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">Item </span><span>{i}&quot;,
</span><span>            </span><span style="color:#bf616a;">activatable</span><span>=</span><span style="color:#d08770;">True
</span><span>        )
</span><span>        
</span><span>        chevron = Gtk.Image.</span><span style="color:#bf616a;">new_from_icon_name</span><span>(&quot;</span><span style="color:#a3be8c;">go-next-symbolic</span><span>&quot;)
</span><span>        row.</span><span style="color:#bf616a;">add_suffix</span><span>(chevron)
</span><span>        
</span><span>        </span><span style="color:#65737e;"># Store item ID for later
</span><span>        row.item_id = i
</span><span>        
</span><span>        list_box.</span><span style="color:#bf616a;">append</span><span>(row)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Connect navigation
</span><span>    list_box.</span><span style="color:#bf616a;">connect</span><span>(&#39;</span><span style="color:#a3be8c;">row-activated</span><span>&#39;, </span><span style="color:#bf616a;">self</span><span>.on_item_activated)
</span><span>    
</span><span>    clamp = Adw.</span><span style="color:#bf616a;">Clamp</span><span>()
</span><span>    clamp.</span><span style="color:#bf616a;">set_child</span><span>(list_box)
</span><span>    clamp.</span><span style="color:#bf616a;">set_maximum_size</span><span>(</span><span style="color:#d08770;">600</span><span>)
</span><span>    
</span><span>    scrolled = Gtk.</span><span style="color:#bf616a;">ScrolledWindow</span><span>()
</span><span>    scrolled.</span><span style="color:#bf616a;">set_child</span><span>(clamp)
</span><span>    
</span><span>    toolbar_view = Adw.</span><span style="color:#bf616a;">ToolbarView</span><span>()
</span><span>    toolbar_view.</span><span style="color:#bf616a;">set_content</span><span>(scrolled)
</span><span>    
</span><span>    header = Adw.</span><span style="color:#bf616a;">HeaderBar</span><span>()
</span><span>    toolbar_view.</span><span style="color:#bf616a;">add_top_bar</span><span>(header)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">return </span><span>Adw.</span><span style="color:#bf616a;">NavigationPage</span><span>(
</span><span>        </span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Items</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">child</span><span>=toolbar_view
</span><span>    )
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">on_item_activated</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">list_box</span><span>, </span><span style="color:#bf616a;">row</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Navigate to detail page.&quot;&quot;&quot;
</span><span>    item_id = row.item_id
</span><span>    </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">navigate_to_detail</span><span>(item_id)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">navigate_to_detail</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">item_id</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Navigate to detail page.&quot;&quot;&quot;
</span><span>    detail_page = </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">create_detail_page</span><span>(item_id)
</span><span>    </span><span style="color:#bf616a;">self</span><span>.nav_view.</span><span style="color:#bf616a;">push</span><span>(detail_page)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_detail_page</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">item_id</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create detail page for an item.&quot;&quot;&quot;
</span><span>    content = Adw.</span><span style="color:#bf616a;">StatusPage</span><span>(
</span><span>        </span><span style="color:#bf616a;">title</span><span>=</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">Item </span><span>{item_id}&quot;,
</span><span>        </span><span style="color:#bf616a;">description</span><span>=&quot;</span><span style="color:#a3be8c;">Details about this item</span><span>&quot;
</span><span>    )
</span><span>    
</span><span>    toolbar_view = Adw.</span><span style="color:#bf616a;">ToolbarView</span><span>()
</span><span>    toolbar_view.</span><span style="color:#bf616a;">set_content</span><span>(content)
</span><span>    
</span><span>    header = Adw.</span><span style="color:#bf616a;">HeaderBar</span><span>()
</span><span>    toolbar_view.</span><span style="color:#bf616a;">add_top_bar</span><span>(header)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">return </span><span>Adw.</span><span style="color:#bf616a;">NavigationPage</span><span>(
</span><span>        </span><span style="color:#bf616a;">title</span><span>=</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">Item </span><span>{item_id}&quot;,
</span><span>        </span><span style="color:#bf616a;">child</span><span>=toolbar_view
</span><span>    )
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">navigate_back</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Navigate back programmatically.&quot;&quot;&quot;
</span><span>    </span><span style="color:#b48ead;">if </span><span style="color:#bf616a;">self</span><span>.nav_view.</span><span style="color:#bf616a;">get_navigation_stack</span><span>().</span><span style="color:#bf616a;">get_n_items</span><span>() &gt; </span><span style="color:#d08770;">1</span><span>:
</span><span>        </span><span style="color:#bf616a;">self</span><span>.nav_view.</span><span style="color:#bf616a;">pop</span><span>()
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">pop_to_root</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Pop to root page.&quot;&quot;&quot;
</span><span>    </span><span style="color:#bf616a;">self</span><span>.nav_view.</span><span style="color:#bf616a;">pop_to_tag</span><span>(&quot;</span><span style="color:#a3be8c;">root</span><span>&quot;)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">replace_page</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Replace current page.&quot;&quot;&quot;
</span><span>    new_page = </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">create_detail_page</span><span>(</span><span style="color:#d08770;">99</span><span>)
</span><span>    </span><span style="color:#bf616a;">self</span><span>.nav_view.</span><span style="color:#bf616a;">replace</span><span>([new_page])
</span></code></pre>
<h3 id="adwviewstack-and-adwviewswitcher">AdwViewStack and AdwViewSwitcher</h3>
<p>View stacks manage multiple views with switchers for navigation.</p>
<p><strong>Rust Example</strong>:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">use </span><span>adwaita::prelude::*;
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_view_stack_with_switcher</span><span>() -&gt; gtk::Box {
</span><span>    </span><span style="color:#b48ead;">let</span><span> view_stack = adwaita::ViewStack::new();
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Add pages
</span><span>    </span><span style="color:#b48ead;">let</span><span> page1 = </span><span style="color:#96b5b4;">create_page_content</span><span>(&quot;</span><span style="color:#a3be8c;">Home</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">house-symbolic</span><span>&quot;);
</span><span>    view_stack.</span><span style="color:#96b5b4;">add_titled_with_icon</span><span>(
</span><span>        &amp;page1,
</span><span>        Some(&quot;</span><span style="color:#a3be8c;">home</span><span>&quot;),
</span><span>        &quot;</span><span style="color:#a3be8c;">Home</span><span>&quot;,
</span><span>        &quot;</span><span style="color:#a3be8c;">house-symbolic</span><span>&quot;
</span><span>    );
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> page2 = </span><span style="color:#96b5b4;">create_page_content</span><span>(&quot;</span><span style="color:#a3be8c;">Library</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">library-symbolic</span><span>&quot;);
</span><span>    view_stack.</span><span style="color:#96b5b4;">add_titled_with_icon</span><span>(
</span><span>        &amp;page2,
</span><span>        Some(&quot;</span><span style="color:#a3be8c;">library</span><span>&quot;),
</span><span>        &quot;</span><span style="color:#a3be8c;">Library</span><span>&quot;,
</span><span>        &quot;</span><span style="color:#a3be8c;">library-symbolic</span><span>&quot;
</span><span>    );
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> page3 = </span><span style="color:#96b5b4;">create_page_content</span><span>(&quot;</span><span style="color:#a3be8c;">Settings</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">settings-symbolic</span><span>&quot;);
</span><span>    view_stack.</span><span style="color:#96b5b4;">add_titled_with_icon</span><span>(
</span><span>        &amp;page3,
</span><span>        Some(&quot;</span><span style="color:#a3be8c;">settings</span><span>&quot;),
</span><span>        &quot;</span><span style="color:#a3be8c;">Settings</span><span>&quot;,
</span><span>        &quot;</span><span style="color:#a3be8c;">settings-symbolic</span><span>&quot;
</span><span>    );
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Create switcher bar (bottom navigation on mobile)
</span><span>    </span><span style="color:#b48ead;">let</span><span> switcher_bar = adwaita::ViewSwitcherBar::new();
</span><span>    switcher_bar.</span><span style="color:#96b5b4;">set_stack</span><span>(Some(&amp;view_stack));
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Create switcher title (top navigation on desktop)
</span><span>    </span><span style="color:#b48ead;">let</span><span> switcher_title = adwaita::ViewSwitcherTitle::new();
</span><span>    switcher_title.</span><span style="color:#96b5b4;">set_stack</span><span>(Some(&amp;view_stack));
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Create header
</span><span>    </span><span style="color:#b48ead;">let</span><span> header = adwaita::HeaderBar::new();
</span><span>    header.</span><span style="color:#96b5b4;">set_title_widget</span><span>(Some(&amp;switcher_title));
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Create toolbar view
</span><span>    </span><span style="color:#b48ead;">let</span><span> toolbar_view = adwaita::ToolbarView::new();
</span><span>    toolbar_view.</span><span style="color:#96b5b4;">add_top_bar</span><span>(&amp;header);
</span><span>    toolbar_view.</span><span style="color:#96b5b4;">set_content</span><span>(Some(&amp;view_stack));
</span><span>    toolbar_view.</span><span style="color:#96b5b4;">add_bottom_bar</span><span>(&amp;switcher_bar);
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Bind view switcher visibility
</span><span>    switcher_title
</span><span>        .</span><span style="color:#96b5b4;">bind_property</span><span>(&quot;</span><span style="color:#a3be8c;">title-visible</span><span>&quot;, &amp;switcher_bar, &quot;</span><span style="color:#a3be8c;">reveal</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">flags</span><span>(glib::BindingFlags::</span><span style="color:#d08770;">SYNC_CREATE</span><span>)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> container = gtk::Box::new(gtk::Orientation::Vertical, </span><span style="color:#d08770;">0</span><span>);
</span><span>    container.</span><span style="color:#96b5b4;">append</span><span>(&amp;toolbar_view);
</span><span>    container
</span><span>}
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_page_content</span><span>(</span><span style="color:#bf616a;">title</span><span>: &amp;</span><span style="color:#b48ead;">str</span><span>, </span><span style="color:#bf616a;">icon</span><span>: &amp;</span><span style="color:#b48ead;">str</span><span>) -&gt; gtk::Widget {
</span><span>    adwaita::StatusPage::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(title)
</span><span>        .</span><span style="color:#96b5b4;">icon_name</span><span>(icon)
</span><span>        .</span><span style="color:#96b5b4;">description</span><span>(&amp;format!(&quot;</span><span style="color:#a3be8c;">This is the </span><span style="color:#d08770;">{}</span><span style="color:#a3be8c;"> page</span><span>&quot;, title.</span><span style="color:#96b5b4;">to_lowercase</span><span>()))
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>()
</span><span>        .</span><span style="color:#96b5b4;">upcast</span><span>()
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Change view programmatically
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">change_view</span><span>(</span><span style="color:#bf616a;">stack</span><span>: &amp;adwaita::ViewStack, </span><span style="color:#bf616a;">page_name</span><span>: &amp;</span><span style="color:#b48ead;">str</span><span>) {
</span><span>    stack.</span><span style="color:#96b5b4;">set_visible_child_name</span><span>(page_name);
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Get current view
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">get_current_view</span><span>(</span><span style="color:#bf616a;">stack</span><span>: &amp;adwaita::ViewStack) -&gt; Option&lt;String&gt; {
</span><span>    stack.</span><span style="color:#96b5b4;">visible_child_name</span><span>().</span><span style="color:#96b5b4;">map</span><span>(|</span><span style="color:#bf616a;">s</span><span>| s.</span><span style="color:#96b5b4;">to_string</span><span>())
</span><span>}
</span></code></pre>
<p><strong>Python Example</strong>:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_view_stack_with_switcher</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create view stack with switcher navigation.&quot;&quot;&quot;
</span><span>    </span><span style="color:#bf616a;">self</span><span>.view_stack = Adw.</span><span style="color:#bf616a;">ViewStack</span><span>()
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Add pages
</span><span>    page1 = </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">create_page_content</span><span>(&quot;</span><span style="color:#a3be8c;">Home</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">house-symbolic</span><span>&quot;)
</span><span>    </span><span style="color:#bf616a;">self</span><span>.view_stack.</span><span style="color:#bf616a;">add_titled_with_icon</span><span>(
</span><span>        page1, &quot;</span><span style="color:#a3be8c;">home</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">Home</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">house-symbolic</span><span>&quot;
</span><span>    )
</span><span>    
</span><span>    page2 = </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">create_page_content</span><span>(&quot;</span><span style="color:#a3be8c;">Library</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">library-symbolic</span><span>&quot;)
</span><span>    </span><span style="color:#bf616a;">self</span><span>.view_stack.</span><span style="color:#bf616a;">add_titled_with_icon</span><span>(
</span><span>        page2, &quot;</span><span style="color:#a3be8c;">library</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">Library</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">library-symbolic</span><span>&quot;
</span><span>    )
</span><span>    
</span><span>    page3 = </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">create_page_content</span><span>(&quot;</span><span style="color:#a3be8c;">Settings</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">settings-symbolic</span><span>&quot;)
</span><span>    </span><span style="color:#bf616a;">self</span><span>.view_stack.</span><span style="color:#bf616a;">add_titled_with_icon</span><span>(
</span><span>        page3, &quot;</span><span style="color:#a3be8c;">settings</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">Settings</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">settings-symbolic</span><span>&quot;
</span><span>    )
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Create switcher bar (bottom navigation on mobile)
</span><span>    switcher_bar = Adw.</span><span style="color:#bf616a;">ViewSwitcherBar</span><span>()
</span><span>    switcher_bar.</span><span style="color:#bf616a;">set_stack</span><span>(</span><span style="color:#bf616a;">self</span><span>.view_stack)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Create switcher title (top navigation on desktop)
</span><span>    switcher_title = Adw.</span><span style="color:#bf616a;">ViewSwitcherTitle</span><span>()
</span><span>    switcher_title.</span><span style="color:#bf616a;">set_stack</span><span>(</span><span style="color:#bf616a;">self</span><span>.view_stack)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Create header
</span><span>    header = Adw.</span><span style="color:#bf616a;">HeaderBar</span><span>()
</span><span>    header.</span><span style="color:#bf616a;">set_title_widget</span><span>(switcher_title)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Create toolbar view
</span><span>    toolbar_view = Adw.</span><span style="color:#bf616a;">ToolbarView</span><span>()
</span><span>    toolbar_view.</span><span style="color:#bf616a;">add_top_bar</span><span>(header)
</span><span>    toolbar_view.</span><span style="color:#bf616a;">set_content</span><span>(</span><span style="color:#bf616a;">self</span><span>.view_stack)
</span><span>    toolbar_view.</span><span style="color:#bf616a;">add_bottom_bar</span><span>(switcher_bar)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Bind view switcher visibility
</span><span>    switcher_title.</span><span style="color:#bf616a;">bind_property</span><span>(
</span><span>        &quot;</span><span style="color:#a3be8c;">title-visible</span><span>&quot;, switcher_bar, &quot;</span><span style="color:#a3be8c;">reveal</span><span>&quot;,
</span><span>        GObject.BindingFlags.</span><span style="color:#bf616a;">SYNC_CREATE
</span><span>    )
</span><span>    
</span><span>    </span><span style="color:#b48ead;">return </span><span>toolbar_view
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_page_content</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">title</span><span>, </span><span style="color:#bf616a;">icon</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create content for a page.&quot;&quot;&quot;
</span><span>    </span><span style="color:#b48ead;">return </span><span>Adw.</span><span style="color:#bf616a;">StatusPage</span><span>(
</span><span>        </span><span style="color:#bf616a;">title</span><span>=title,
</span><span>        </span><span style="color:#bf616a;">icon_name</span><span>=icon,
</span><span>        </span><span style="color:#bf616a;">description</span><span>=</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">This is the </span><span>{title.</span><span style="color:#bf616a;">lower</span><span>()}</span><span style="color:#a3be8c;"> page</span><span>&quot;
</span><span>    )
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">change_view</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">page_name</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Change view programmatically.&quot;&quot;&quot;
</span><span>    </span><span style="color:#bf616a;">self</span><span>.view_stack.</span><span style="color:#bf616a;">set_visible_child_name</span><span>(page_name)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">get_current_view</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Get current view name.&quot;&quot;&quot;
</span><span>    </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">self</span><span>.view_stack.</span><span style="color:#bf616a;">get_visible_child_name</span><span>()
</span></code></pre>
<h3 id="adwtabbar-and-adwtabview">AdwTabBar and AdwTabView</h3>
<p>Tab bars provide browser-style tabbed navigation.</p>
<p><strong>Rust Example</strong>:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">use </span><span>adwaita::prelude::*;
</span><span style="color:#b48ead;">use </span><span>gtk::glib;
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_tab_view</span><span>() -&gt; gtk::Box {
</span><span>    </span><span style="color:#b48ead;">let</span><span> tab_view = adwaita::TabView::new();
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Create tab bar
</span><span>    </span><span style="color:#b48ead;">let</span><span> tab_bar = adwaita::TabBar::new();
</span><span>    tab_bar.</span><span style="color:#96b5b4;">set_view</span><span>(Some(&amp;tab_view));
</span><span>    tab_bar.</span><span style="color:#96b5b4;">set_autohide</span><span>(</span><span style="color:#d08770;">false</span><span>); </span><span style="color:#65737e;">// Always show tab bar
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Add initial tab
</span><span>    </span><span style="color:#96b5b4;">add_new_tab</span><span>(&amp;tab_view, &quot;</span><span style="color:#a3be8c;">Welcome</span><span>&quot;, None);
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Create header
</span><span>    </span><span style="color:#b48ead;">let</span><span> header = adwaita::HeaderBar::new();
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Add new tab button
</span><span>    </span><span style="color:#b48ead;">let</span><span> new_tab_button = gtk::Button::from_icon_name(&quot;</span><span style="color:#a3be8c;">tab-new-symbolic</span><span>&quot;);
</span><span>    new_tab_button.</span><span style="color:#96b5b4;">set_tooltip_text</span><span>(Some(&quot;</span><span style="color:#a3be8c;">New Tab</span><span>&quot;));
</span><span>    new_tab_button.</span><span style="color:#96b5b4;">connect_clicked</span><span>(glib::clone!(
</span><span>        #[</span><span style="color:#bf616a;">weak</span><span>]
</span><span>        tab_view,
</span><span>        </span><span style="color:#b48ead;">move </span><span>|_| {
</span><span>            </span><span style="color:#b48ead;">let</span><span> count = tab_view.</span><span style="color:#96b5b4;">n_pages</span><span>();
</span><span>            </span><span style="color:#96b5b4;">add_new_tab</span><span>(&amp;tab_view, &amp;format!(&quot;</span><span style="color:#a3be8c;">Tab </span><span style="color:#d08770;">{}</span><span>&quot;, count + </span><span style="color:#d08770;">1</span><span>), None);
</span><span>        }
</span><span>    ));
</span><span>    header.</span><span style="color:#96b5b4;">pack_end</span><span>(&amp;new_tab_button);
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Create toolbar view
</span><span>    </span><span style="color:#b48ead;">let</span><span> toolbar_view = adwaita::ToolbarView::new();
</span><span>    toolbar_view.</span><span style="color:#96b5b4;">add_top_bar</span><span>(&amp;header);
</span><span>    toolbar_view.</span><span style="color:#96b5b4;">add_top_bar</span><span>(&amp;tab_bar);
</span><span>    toolbar_view.</span><span style="color:#96b5b4;">set_content</span><span>(Some(&amp;tab_view));
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Handle tab close
</span><span>    tab_view.</span><span style="color:#96b5b4;">connect_close_page</span><span>(|_, </span><span style="color:#bf616a;">page</span><span>| {
</span><span>        </span><span style="color:#65737e;">// Return true to allow closing, false to prevent
</span><span>        </span><span style="color:#d08770;">true</span><span>.</span><span style="color:#96b5b4;">into</span><span>()
</span><span>    });
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> container = gtk::Box::new(gtk::Orientation::Vertical, </span><span style="color:#d08770;">0</span><span>);
</span><span>    container.</span><span style="color:#96b5b4;">append</span><span>(&amp;toolbar_view);
</span><span>    container
</span><span>}
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">add_new_tab</span><span>(</span><span style="color:#bf616a;">tab_view</span><span>: &amp;adwaita::TabView, </span><span style="color:#bf616a;">title</span><span>: &amp;</span><span style="color:#b48ead;">str</span><span>, </span><span style="color:#bf616a;">icon</span><span>: Option&lt;&amp;</span><span style="color:#b48ead;">str</span><span>&gt;) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> content = adwaita::StatusPage::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(title)
</span><span>        .</span><span style="color:#96b5b4;">icon_name</span><span>(icon.</span><span style="color:#96b5b4;">unwrap_or</span><span>(&quot;</span><span style="color:#a3be8c;">document-symbolic</span><span>&quot;))
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> page = tab_view.</span><span style="color:#96b5b4;">append</span><span>(&amp;content);
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Set tab properties
</span><span>    tab_view.</span><span style="color:#96b5b4;">set_page_title</span><span>(&amp;page, title);
</span><span>    </span><span style="color:#b48ead;">if let </span><span>Some(icon_name) = icon {
</span><span>        tab_view.</span><span style="color:#96b5b4;">set_page_icon</span><span>(&amp;page, Some(&amp;gtk::gio::ThemedIcon::new(icon_name)));
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Select the new tab
</span><span>    tab_view.</span><span style="color:#96b5b4;">set_selected_page</span><span>(&amp;page);
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Tab operations
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">close_current_tab</span><span>(</span><span style="color:#bf616a;">tab_view</span><span>: &amp;adwaita::TabView) {
</span><span>    </span><span style="color:#b48ead;">if let </span><span>Some(page) = tab_view.</span><span style="color:#96b5b4;">selected_page</span><span>() {
</span><span>        tab_view.</span><span style="color:#96b5b4;">close_page</span><span>(&amp;page);
</span><span>    }
</span><span>}
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">close_all_tabs</span><span>(</span><span style="color:#bf616a;">tab_view</span><span>: &amp;adwaita::TabView) {
</span><span>    tab_view.</span><span style="color:#96b5b4;">close_pages_after</span><span>(None);
</span><span>}
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">pin_current_tab</span><span>(</span><span style="color:#bf616a;">tab_view</span><span>: &amp;adwaita::TabView) {
</span><span>    </span><span style="color:#b48ead;">if let </span><span>Some(page) = tab_view.</span><span style="color:#96b5b4;">selected_page</span><span>() {
</span><span>        </span><span style="color:#b48ead;">let</span><span> is_pinned = tab_view.</span><span style="color:#96b5b4;">page_is_pinned</span><span>(&amp;page);
</span><span>        tab_view.</span><span style="color:#96b5b4;">set_page_pinned</span><span>(&amp;page, !is_pinned);
</span><span>    }
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Tab reordering
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">move_tab_left</span><span>(</span><span style="color:#bf616a;">tab_view</span><span>: &amp;adwaita::TabView) {
</span><span>    </span><span style="color:#b48ead;">if let </span><span>Some(page) = tab_view.</span><span style="color:#96b5b4;">selected_page</span><span>() {
</span><span>        </span><span style="color:#b48ead;">let</span><span> position = tab_view.</span><span style="color:#96b5b4;">page_position</span><span>(&amp;page);
</span><span>        </span><span style="color:#b48ead;">if</span><span> position &gt; </span><span style="color:#d08770;">0 </span><span>{
</span><span>            tab_view.</span><span style="color:#96b5b4;">reorder_page</span><span>(&amp;page, position - </span><span style="color:#d08770;">1</span><span>);
</span><span>        }
</span><span>    }
</span><span>}
</span></code></pre>
<p><strong>Python Example</strong>:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_tab_view</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create a tab view with tab bar.&quot;&quot;&quot;
</span><span>    </span><span style="color:#bf616a;">self</span><span>.tab_view = Adw.</span><span style="color:#bf616a;">TabView</span><span>()
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Create tab bar
</span><span>    tab_bar = Adw.</span><span style="color:#bf616a;">TabBar</span><span>()
</span><span>    tab_bar.</span><span style="color:#bf616a;">set_view</span><span>(</span><span style="color:#bf616a;">self</span><span>.tab_view)
</span><span>    tab_bar.</span><span style="color:#bf616a;">set_autohide</span><span>(</span><span style="color:#d08770;">False</span><span>)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Add initial tab
</span><span>    </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">add_new_tab</span><span>(&quot;</span><span style="color:#a3be8c;">Welcome</span><span>&quot;)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Create header
</span><span>    header = Adw.</span><span style="color:#bf616a;">HeaderBar</span><span>()
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Add new tab button
</span><span>    new_tab_button = Gtk.Button.</span><span style="color:#bf616a;">new_from_icon_name</span><span>(&quot;</span><span style="color:#a3be8c;">tab-new-symbolic</span><span>&quot;)
</span><span>    new_tab_button.</span><span style="color:#bf616a;">set_tooltip_text</span><span>(&quot;</span><span style="color:#a3be8c;">New Tab</span><span>&quot;)
</span><span>    new_tab_button.</span><span style="color:#bf616a;">connect</span><span>(&#39;</span><span style="color:#a3be8c;">clicked</span><span>&#39;, </span><span style="color:#bf616a;">self</span><span>.on_new_tab_clicked)
</span><span>    header.</span><span style="color:#bf616a;">pack_end</span><span>(new_tab_button)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Create toolbar view
</span><span>    toolbar_view = Adw.</span><span style="color:#bf616a;">ToolbarView</span><span>()
</span><span>    toolbar_view.</span><span style="color:#bf616a;">add_top_bar</span><span>(header)
</span><span>    toolbar_view.</span><span style="color:#bf616a;">add_top_bar</span><span>(tab_bar)
</span><span>    toolbar_view.</span><span style="color:#bf616a;">set_content</span><span>(</span><span style="color:#bf616a;">self</span><span>.tab_view)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Handle tab close
</span><span>    </span><span style="color:#bf616a;">self</span><span>.tab_view.</span><span style="color:#bf616a;">connect</span><span>(&#39;</span><span style="color:#a3be8c;">close-page</span><span>&#39;, </span><span style="color:#bf616a;">self</span><span>.on_tab_close)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">return </span><span>toolbar_view
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">on_new_tab_clicked</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">button</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create a new tab.&quot;&quot;&quot;
</span><span>    count = </span><span style="color:#bf616a;">self</span><span>.tab_view.</span><span style="color:#bf616a;">get_n_pages</span><span>()
</span><span>    </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">add_new_tab</span><span>(</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">Tab </span><span>{count + </span><span style="color:#d08770;">1</span><span>}&quot;)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">add_new_tab</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">title</span><span>, </span><span style="color:#bf616a;">icon</span><span>=</span><span style="color:#d08770;">None</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Add a new tab to the tab view.&quot;&quot;&quot;
</span><span>    content = Adw.</span><span style="color:#bf616a;">StatusPage</span><span>(
</span><span>        </span><span style="color:#bf616a;">title</span><span>=title,
</span><span>        </span><span style="color:#bf616a;">icon_name</span><span>=icon or &quot;</span><span style="color:#a3be8c;">document-symbolic</span><span>&quot;
</span><span>    )
</span><span>    
</span><span>    page = </span><span style="color:#bf616a;">self</span><span>.tab_view.</span><span style="color:#bf616a;">append</span><span>(content)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Set tab properties
</span><span>    </span><span style="color:#bf616a;">self</span><span>.tab_view.</span><span style="color:#bf616a;">set_page_title</span><span>(page, title)
</span><span>    </span><span style="color:#b48ead;">if </span><span>icon:
</span><span>        themed_icon = Gio.ThemedIcon.</span><span style="color:#bf616a;">new</span><span>(icon)
</span><span>        </span><span style="color:#bf616a;">self</span><span>.tab_view.</span><span style="color:#bf616a;">set_page_icon</span><span>(page, themed_icon)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Select the new tab
</span><span>    </span><span style="color:#bf616a;">self</span><span>.tab_view.</span><span style="color:#bf616a;">set_selected_page</span><span>(page)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">on_tab_close</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">tab_view</span><span>, </span><span style="color:#bf616a;">page</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Handle tab close request.&quot;&quot;&quot;
</span><span>    </span><span style="color:#65737e;"># Return True to allow closing, False to prevent
</span><span>    </span><span style="color:#b48ead;">return </span><span style="color:#d08770;">True
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">close_current_tab</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Close the currently selected tab.&quot;&quot;&quot;
</span><span>    page = </span><span style="color:#bf616a;">self</span><span>.tab_view.</span><span style="color:#bf616a;">get_selected_page</span><span>()
</span><span>    </span><span style="color:#b48ead;">if </span><span>page:
</span><span>        </span><span style="color:#bf616a;">self</span><span>.tab_view.</span><span style="color:#bf616a;">close_page</span><span>(page)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">close_all_tabs</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Close all tabs.&quot;&quot;&quot;
</span><span>    </span><span style="color:#bf616a;">self</span><span>.tab_view.</span><span style="color:#bf616a;">close_pages_after</span><span>(</span><span style="color:#d08770;">None</span><span>)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">pin_current_tab</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Toggle pin state of current tab.&quot;&quot;&quot;
</span><span>    page = </span><span style="color:#bf616a;">self</span><span>.tab_view.</span><span style="color:#bf616a;">get_selected_page</span><span>()
</span><span>    </span><span style="color:#b48ead;">if </span><span>page:
</span><span>        is_pinned = </span><span style="color:#bf616a;">self</span><span>.tab_view.</span><span style="color:#bf616a;">get_page_is_pinned</span><span>(page)
</span><span>        </span><span style="color:#bf616a;">self</span><span>.tab_view.</span><span style="color:#bf616a;">set_page_pinned</span><span>(page, not is_pinned)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">move_tab_left</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Move current tab to the left.&quot;&quot;&quot;
</span><span>    page = </span><span style="color:#bf616a;">self</span><span>.tab_view.</span><span style="color:#bf616a;">get_selected_page</span><span>()
</span><span>    </span><span style="color:#b48ead;">if </span><span>page:
</span><span>        position = </span><span style="color:#bf616a;">self</span><span>.tab_view.</span><span style="color:#bf616a;">get_page_position</span><span>(page)
</span><span>        </span><span style="color:#b48ead;">if </span><span>position &gt; </span><span style="color:#d08770;">0</span><span>:
</span><span>            </span><span style="color:#bf616a;">self</span><span>.tab_view.</span><span style="color:#bf616a;">reorder_page</span><span>(page, position - </span><span style="color:#d08770;">1</span><span>)
</span></code></pre>
<h3 id="adwcarousel">AdwCarousel</h3>
<p>Carousels provide swipeable page navigation.</p>
<p><strong>Rust Example</strong>:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">use </span><span>adwaita::prelude::*;
</span><span style="color:#b48ead;">use </span><span>gtk::glib;
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_carousel</span><span>() -&gt; adwaita::Carousel {
</span><span>    </span><span style="color:#b48ead;">let</span><span> carousel = adwaita::Carousel::new();
</span><span>    carousel.</span><span style="color:#96b5b4;">set_interactive</span><span>(</span><span style="color:#d08770;">true</span><span>);
</span><span>    carousel.</span><span style="color:#96b5b4;">set_allow_long_swipes</span><span>(</span><span style="color:#d08770;">true</span><span>);
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Add pages
</span><span>    </span><span style="color:#b48ead;">for</span><span> i in </span><span style="color:#d08770;">1</span><span>..=</span><span style="color:#d08770;">5 </span><span>{
</span><span>        </span><span style="color:#b48ead;">let</span><span> page = </span><span style="color:#96b5b4;">create_carousel_page</span><span>(i);
</span><span>        carousel.</span><span style="color:#96b5b4;">append</span><span>(&amp;page);
</span><span>    }
</span><span>    
</span><span>    carousel
</span><span>}
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_carousel_page</span><span>(</span><span style="color:#bf616a;">number</span><span>: </span><span style="color:#b48ead;">i32</span><span>) -&gt; gtk::Widget {
</span><span>    </span><span style="color:#b48ead;">let</span><span> page = adwaita::StatusPage::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&amp;format!(&quot;</span><span style="color:#a3be8c;">Page </span><span style="color:#d08770;">{}</span><span>&quot;, number))
</span><span>        .</span><span style="color:#96b5b4;">description</span><span>(&amp;format!(&quot;</span><span style="color:#a3be8c;">This is page </span><span style="color:#d08770;">{}</span><span style="color:#a3be8c;"> of 5</span><span>&quot;, number))
</span><span>        .</span><span style="color:#96b5b4;">icon_name</span><span>(&quot;</span><span style="color:#a3be8c;">document-symbolic</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>    
</span><span>    page.</span><span style="color:#96b5b4;">upcast</span><span>()
</span><span>}
</span><span>
</span><span style="color:#65737e;">// With indicator dots
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_carousel_with_indicator</span><span>() -&gt; gtk::Box {
</span><span>    </span><span style="color:#b48ead;">let</span><span> carousel = </span><span style="color:#96b5b4;">create_carousel</span><span>();
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> indicator = adwaita::CarouselIndicatorDots::new();
</span><span>    indicator.</span><span style="color:#96b5b4;">set_carousel</span><span>(Some(&amp;carousel));
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> container = gtk::Box::new(gtk::Orientation::Vertical, </span><span style="color:#d08770;">12</span><span>);
</span><span>    container.</span><span style="color:#96b5b4;">append</span><span>(&amp;carousel);
</span><span>    container.</span><span style="color:#96b5b4;">append</span><span>(&amp;indicator);
</span><span>    container.</span><span style="color:#96b5b4;">set_vexpand</span><span>(</span><span style="color:#d08770;">true</span><span>);
</span><span>    
</span><span>    container
</span><span>}
</span><span>
</span><span style="color:#65737e;">// With line indicator
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_carousel_with_lines</span><span>() -&gt; gtk::Box {
</span><span>    </span><span style="color:#b48ead;">let</span><span> carousel = </span><span style="color:#96b5b4;">create_carousel</span><span>();
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> indicator = adwaita::CarouselIndicatorLines::new();
</span><span>    indicator.</span><span style="color:#96b5b4;">set_carousel</span><span>(Some(&amp;carousel));
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> container = gtk::Box::new(gtk::Orientation::Vertical, </span><span style="color:#d08770;">12</span><span>);
</span><span>    container.</span><span style="color:#96b5b4;">append</span><span>(&amp;carousel);
</span><span>    container.</span><span style="color:#96b5b4;">append</span><span>(&amp;indicator);
</span><span>    container.</span><span style="color:#96b5b4;">set_vexpand</span><span>(</span><span style="color:#d08770;">true</span><span>);
</span><span>    
</span><span>    container
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Navigate carousel programmatically
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">scroll_to_page</span><span>(</span><span style="color:#bf616a;">carousel</span><span>: &amp;adwaita::Carousel, </span><span style="color:#bf616a;">position</span><span>: </span><span style="color:#b48ead;">f64</span><span>) {
</span><span>    carousel.</span><span style="color:#96b5b4;">scroll_to</span><span>(&amp;carousel.</span><span style="color:#96b5b4;">nth_page</span><span>(position as </span><span style="color:#b48ead;">u32</span><span>), </span><span style="color:#d08770;">true</span><span>);
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Get current page
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">get_current_page</span><span>(</span><span style="color:#bf616a;">carousel</span><span>: &amp;adwaita::Carousel) -&gt; </span><span style="color:#b48ead;">f64 </span><span>{
</span><span>    carousel.</span><span style="color:#96b5b4;">position</span><span>()
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Listen to page changes
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">setup_carousel_listener</span><span>(</span><span style="color:#bf616a;">carousel</span><span>: &amp;adwaita::Carousel) {
</span><span>    carousel.</span><span style="color:#96b5b4;">connect_position_notify</span><span>(|</span><span style="color:#bf616a;">carousel</span><span>| {
</span><span>        </span><span style="color:#b48ead;">let</span><span> position = carousel.</span><span style="color:#96b5b4;">position</span><span>();
</span><span>        println!(&quot;</span><span style="color:#a3be8c;">Current page: </span><span style="color:#d08770;">{}</span><span>&quot;, position);
</span><span>    });
</span><span>}
</span></code></pre>
<p><strong>Python Example</strong>:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_carousel</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create a carousel with multiple pages.&quot;&quot;&quot;
</span><span>    carousel = Adw.</span><span style="color:#bf616a;">Carousel</span><span>()
</span><span>    carousel.</span><span style="color:#bf616a;">set_interactive</span><span>(</span><span style="color:#d08770;">True</span><span>)
</span><span>    carousel.</span><span style="color:#bf616a;">set_allow_long_swipes</span><span>(</span><span style="color:#d08770;">True</span><span>)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Add pages
</span><span>    </span><span style="color:#b48ead;">for </span><span>i </span><span style="color:#b48ead;">in </span><span style="color:#96b5b4;">range</span><span>(</span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">6</span><span>):
</span><span>        page = </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">create_carousel_page</span><span>(i)
</span><span>        carousel.</span><span style="color:#bf616a;">append</span><span>(page)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">return </span><span>carousel
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_carousel_page</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">number</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create a carousel page.&quot;&quot;&quot;
</span><span>    </span><span style="color:#b48ead;">return </span><span>Adw.</span><span style="color:#bf616a;">StatusPage</span><span>(
</span><span>        </span><span style="color:#bf616a;">title</span><span>=</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">Page </span><span>{number}&quot;,
</span><span>        </span><span style="color:#bf616a;">description</span><span>=</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">This is page </span><span>{number}</span><span style="color:#a3be8c;"> of 5</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">icon_name</span><span>=&quot;</span><span style="color:#a3be8c;">document-symbolic</span><span>&quot;
</span><span>    )
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_carousel_with_indicator</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create carousel with dot indicators.&quot;&quot;&quot;
</span><span>    carousel = </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">create_carousel</span><span>()
</span><span>    
</span><span>    indicator = Adw.</span><span style="color:#bf616a;">CarouselIndicatorDots</span><span>()
</span><span>    indicator.</span><span style="color:#bf616a;">set_carousel</span><span>(carousel)
</span><span>    
</span><span>    container = Gtk.</span><span style="color:#bf616a;">Box</span><span>(</span><span style="color:#bf616a;">orientation</span><span>=Gtk.Orientation.</span><span style="color:#bf616a;">VERTICAL</span><span>, </span><span style="color:#bf616a;">spacing</span><span>=</span><span style="color:#d08770;">12</span><span>)
</span><span>    container.</span><span style="color:#bf616a;">append</span><span>(carousel)
</span><span>    container.</span><span style="color:#bf616a;">append</span><span>(indicator)
</span><span>    container.</span><span style="color:#bf616a;">set_vexpand</span><span>(</span><span style="color:#d08770;">True</span><span>)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">return </span><span>container
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_carousel_with_lines</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create carousel with line indicators.&quot;&quot;&quot;
</span><span>    carousel = </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">create_carousel</span><span>()
</span><span>    
</span><span>    indicator = Adw.</span><span style="color:#bf616a;">CarouselIndicatorLines</span><span>()
</span><span>    indicator.</span><span style="color:#bf616a;">set_carousel</span><span>(carousel)
</span><span>    
</span><span>    container = Gtk.</span><span style="color:#bf616a;">Box</span><span>(</span><span style="color:#bf616a;">orientation</span><span>=Gtk.Orientation.</span><span style="color:#bf616a;">VERTICAL</span><span>, </span><span style="color:#bf616a;">spacing</span><span>=</span><span style="color:#d08770;">12</span><span>)
</span><span>    container.</span><span style="color:#bf616a;">append</span><span>(carousel)
</span><span>    container.</span><span style="color:#bf616a;">append</span><span>(indicator)
</span><span>    container.</span><span style="color:#bf616a;">set_vexpand</span><span>(</span><span style="color:#d08770;">True</span><span>)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">return </span><span>container
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">scroll_to_page</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">carousel</span><span>, </span><span style="color:#bf616a;">position</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Navigate carousel to specific page.&quot;&quot;&quot;
</span><span>    page = carousel.</span><span style="color:#bf616a;">get_nth_page</span><span>(</span><span style="color:#bf616a;">int</span><span>(position))
</span><span>    carousel.</span><span style="color:#bf616a;">scroll_to</span><span>(page, </span><span style="color:#d08770;">True</span><span>)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">get_current_page</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">carousel</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Get current page position.&quot;&quot;&quot;
</span><span>    </span><span style="color:#b48ead;">return </span><span>carousel.</span><span style="color:#bf616a;">get_position</span><span>()
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">setup_carousel_listener</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">carousel</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Listen to carousel page changes.&quot;&quot;&quot;
</span><span>    carousel.</span><span style="color:#bf616a;">connect</span><span>(&#39;</span><span style="color:#a3be8c;">notify::position</span><span>&#39;, </span><span style="color:#bf616a;">self</span><span>.on_carousel_position_changed)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">on_carousel_position_changed</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">carousel</span><span>, </span><span style="color:#bf616a;">_pspec</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Handle carousel position change.&quot;&quot;&quot;
</span><span>    position = carousel.</span><span style="color:#bf616a;">get_position</span><span>()
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">Current page: </span><span>{position}&quot;)
</span></code></pre>
<h3 id="adwpreferenceswindow">AdwPreferencesWindow</h3>
<p>Preferences windows provide a standardized settings interface.</p>
<p><strong>Rust Example</strong>:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">use </span><span>adwaita::prelude::*;
</span><span style="color:#b48ead;">use </span><span>gtk::glib;
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_preferences_window</span><span>(</span><span style="color:#bf616a;">parent</span><span>: &amp;impl IsA&lt;gtk::Window&gt;) -&gt; adwaita::PreferencesWindow {
</span><span>    </span><span style="color:#b48ead;">let</span><span> prefs = adwaita::PreferencesWindow::new();
</span><span>    prefs.</span><span style="color:#96b5b4;">set_transient_for</span><span>(Some(parent));
</span><span>    prefs.</span><span style="color:#96b5b4;">set_modal</span><span>(</span><span style="color:#d08770;">true</span><span>);
</span><span>    prefs.</span><span style="color:#96b5b4;">set_search_enabled</span><span>(</span><span style="color:#d08770;">true</span><span>);
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Add pages
</span><span>    </span><span style="color:#b48ead;">let</span><span> general_page = </span><span style="color:#96b5b4;">create_general_page</span><span>();
</span><span>    prefs.</span><span style="color:#96b5b4;">add</span><span>(&amp;general_page);
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> appearance_page = </span><span style="color:#96b5b4;">create_appearance_page</span><span>();
</span><span>    prefs.</span><span style="color:#96b5b4;">add</span><span>(&amp;appearance_page);
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> advanced_page = </span><span style="color:#96b5b4;">create_advanced_page</span><span>();
</span><span>    prefs.</span><span style="color:#96b5b4;">add</span><span>(&amp;advanced_page);
</span><span>    
</span><span>    prefs
</span><span>}
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_general_page</span><span>() -&gt; adwaita::PreferencesPage {
</span><span>    </span><span style="color:#b48ead;">let</span><span> page = adwaita::PreferencesPage::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&quot;</span><span style="color:#a3be8c;">General</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">icon_name</span><span>(&quot;</span><span style="color:#a3be8c;">preferences-system-symbolic</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Create group
</span><span>    </span><span style="color:#b48ead;">let</span><span> group = adwaita::PreferencesGroup::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&quot;</span><span style="color:#a3be8c;">Application</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">description</span><span>(&quot;</span><span style="color:#a3be8c;">Configure application behavior</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Add rows
</span><span>    </span><span style="color:#b48ead;">let</span><span> auto_save = adwaita::SwitchRow::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&quot;</span><span style="color:#a3be8c;">Auto Save</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">subtitle</span><span>(&quot;</span><span style="color:#a3be8c;">Automatically save changes</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>    group.</span><span style="color:#96b5b4;">add</span><span>(&amp;auto_save);
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> interval = adwaita::SpinRow::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&quot;</span><span style="color:#a3be8c;">Save Interval</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">subtitle</span><span>(&quot;</span><span style="color:#a3be8c;">Minutes between auto-saves</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">adjustment</span><span>(&amp;gtk::Adjustment::new(</span><span style="color:#d08770;">5.0</span><span>, </span><span style="color:#d08770;">1.0</span><span>, </span><span style="color:#d08770;">60.0</span><span>, </span><span style="color:#d08770;">1.0</span><span>, </span><span style="color:#d08770;">5.0</span><span>, </span><span style="color:#d08770;">0.0</span><span>))
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>    group.</span><span style="color:#96b5b4;">add</span><span>(&amp;interval);
</span><span>    
</span><span>    page.</span><span style="color:#96b5b4;">add</span><span>(&amp;group);
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Another group
</span><span>    </span><span style="color:#b48ead;">let</span><span> files_group = adwaita::PreferencesGroup::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&quot;</span><span style="color:#a3be8c;">Files</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> default_folder = adwaita::ActionRow::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&quot;</span><span style="color:#a3be8c;">Default Folder</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">subtitle</span><span>(&quot;</span><span style="color:#a3be8c;">/home/user/Documents</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">activatable</span><span>(</span><span style="color:#d08770;">true</span><span>)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>    </span><span style="color:#b48ead;">let</span><span> chevron = gtk::Image::from_icon_name(&quot;</span><span style="color:#a3be8c;">go-next-symbolic</span><span>&quot;);
</span><span>    default_folder.</span><span style="color:#96b5b4;">add_suffix</span><span>(&amp;chevron);
</span><span>    files_group.</span><span style="color:#96b5b4;">add</span><span>(&amp;default_folder);
</span><span>    
</span><span>    page.</span><span style="color:#96b5b4;">add</span><span>(&amp;files_group);
</span><span>    
</span><span>    page
</span><span>}
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_appearance_page</span><span>() -&gt; adwaita::PreferencesPage {
</span><span>    </span><span style="color:#b48ead;">let</span><span> page = adwaita::PreferencesPage::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&quot;</span><span style="color:#a3be8c;">Appearance</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">icon_name</span><span>(&quot;</span><span style="color:#a3be8c;">preferences-desktop-theme-symbolic</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> group = adwaita::PreferencesGroup::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&quot;</span><span style="color:#a3be8c;">Theme</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Color scheme selection
</span><span>    </span><span style="color:#b48ead;">let</span><span> color_scheme = adwaita::ComboRow::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&quot;</span><span style="color:#a3be8c;">Color Scheme</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">subtitle</span><span>(&quot;</span><span style="color:#a3be8c;">Choose light or dark theme</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">model</span><span>(&amp;gtk::StringList::new(&amp;[&quot;</span><span style="color:#a3be8c;">Light</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">Dark</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">Follow System</span><span>&quot;]))
</span><span>        .</span><span style="color:#96b5b4;">selected</span><span>(</span><span style="color:#d08770;">2</span><span>)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>    group.</span><span style="color:#96b5b4;">add</span><span>(&amp;color_scheme);
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Font size
</span><span>    </span><span style="color:#b48ead;">let</span><span> font_size = adwaita::SpinRow::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&quot;</span><span style="color:#a3be8c;">Font Size</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">adjustment</span><span>(&amp;gtk::Adjustment::new(</span><span style="color:#d08770;">11.0</span><span>, </span><span style="color:#d08770;">8.0</span><span>, </span><span style="color:#d08770;">24.0</span><span>, </span><span style="color:#d08770;">1.0</span><span>, </span><span style="color:#d08770;">2.0</span><span>, </span><span style="color:#d08770;">0.0</span><span>))
</span><span>        .</span><span style="color:#96b5b4;">digits</span><span>(</span><span style="color:#d08770;">0</span><span>)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>    group.</span><span style="color:#96b5b4;">add</span><span>(&amp;font_size);
</span><span>    
</span><span>    page.</span><span style="color:#96b5b4;">add</span><span>(&amp;group);
</span><span>    page
</span><span>}
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_advanced_page</span><span>() -&gt; adwaita::PreferencesPage {
</span><span>    </span><span style="color:#b48ead;">let</span><span> page = adwaita::PreferencesPage::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&quot;</span><span style="color:#a3be8c;">Advanced</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">icon_name</span><span>(&quot;</span><span style="color:#a3be8c;">preferences-other-symbolic</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> group = adwaita::PreferencesGroup::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&quot;</span><span style="color:#a3be8c;">Developer Options</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> debug_mode = adwaita::SwitchRow::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&quot;</span><span style="color:#a3be8c;">Debug Mode</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">subtitle</span><span>(&quot;</span><span style="color:#a3be8c;">Enable verbose logging</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>    group.</span><span style="color:#96b5b4;">add</span><span>(&amp;debug_mode);
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> expander = adwaita::ExpanderRow::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&quot;</span><span style="color:#a3be8c;">Cache Settings</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> clear_cache = adwaita::ActionRow::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&quot;</span><span style="color:#a3be8c;">Clear Cache</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">subtitle</span><span>(&quot;</span><span style="color:#a3be8c;">Remove all cached data</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">activatable</span><span>(</span><span style="color:#d08770;">true</span><span>)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>    </span><span style="color:#b48ead;">let</span><span> delete_icon = gtk::Image::from_icon_name(&quot;</span><span style="color:#a3be8c;">user-trash-symbolic</span><span>&quot;);
</span><span>    delete_icon.</span><span style="color:#96b5b4;">add_css_class</span><span>(&quot;</span><span style="color:#a3be8c;">error</span><span>&quot;);
</span><span>    clear_cache.</span><span style="color:#96b5b4;">add_suffix</span><span>(&amp;delete_icon);
</span><span>    expander.</span><span style="color:#96b5b4;">add_row</span><span>(&amp;clear_cache);
</span><span>    
</span><span>    group.</span><span style="color:#96b5b4;">add</span><span>(&amp;expander);
</span><span>    page.</span><span style="color:#96b5b4;">add</span><span>(&amp;group);
</span><span>    
</span><span>    page
</span><span>}
</span></code></pre>
<p><strong>Python Example</strong>:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_preferences_window</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">parent</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create a preferences window.&quot;&quot;&quot;
</span><span>    prefs = Adw.</span><span style="color:#bf616a;">PreferencesWindow</span><span>()
</span><span>    prefs.</span><span style="color:#bf616a;">set_transient_for</span><span>(parent)
</span><span>    prefs.</span><span style="color:#bf616a;">set_modal</span><span>(</span><span style="color:#d08770;">True</span><span>)
</span><span>    prefs.</span><span style="color:#bf616a;">set_search_enabled</span><span>(</span><span style="color:#d08770;">True</span><span>)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Add pages
</span><span>    prefs.</span><span style="color:#bf616a;">add</span><span>(</span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">create_general_page</span><span>())
</span><span>    prefs.</span><span style="color:#bf616a;">add</span><span>(</span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">create_appearance_page</span><span>())
</span><span>    prefs.</span><span style="color:#bf616a;">add</span><span>(</span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">create_advanced_page</span><span>())
</span><span>    
</span><span>    </span><span style="color:#b48ead;">return </span><span>prefs
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_general_page</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create general preferences page.&quot;&quot;&quot;
</span><span>    page = Adw.</span><span style="color:#bf616a;">PreferencesPage</span><span>(
</span><span>        </span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">General</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">icon_name</span><span>=&quot;</span><span style="color:#a3be8c;">preferences-system-symbolic</span><span>&quot;
</span><span>    )
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Create group
</span><span>    group = Adw.</span><span style="color:#bf616a;">PreferencesGroup</span><span>(
</span><span>        </span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Application</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">description</span><span>=&quot;</span><span style="color:#a3be8c;">Configure application behavior</span><span>&quot;
</span><span>    )
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Add rows
</span><span>    auto_save = Adw.</span><span style="color:#bf616a;">SwitchRow</span><span>(
</span><span>        </span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Auto Save</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">subtitle</span><span>=&quot;</span><span style="color:#a3be8c;">Automatically save changes</span><span>&quot;
</span><span>    )
</span><span>    group.</span><span style="color:#bf616a;">add</span><span>(auto_save)
</span><span>    
</span><span>    interval = Adw.</span><span style="color:#bf616a;">SpinRow</span><span>(
</span><span>        </span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Save Interval</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">subtitle</span><span>=&quot;</span><span style="color:#a3be8c;">Minutes between auto-saves</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">adjustment</span><span>=Gtk.</span><span style="color:#bf616a;">Adjustment</span><span>(
</span><span>            </span><span style="color:#bf616a;">value</span><span>=</span><span style="color:#d08770;">5</span><span>, </span><span style="color:#bf616a;">lower</span><span>=</span><span style="color:#d08770;">1</span><span>, </span><span style="color:#bf616a;">upper</span><span>=</span><span style="color:#d08770;">60</span><span>,
</span><span>            </span><span style="color:#bf616a;">step_increment</span><span>=</span><span style="color:#d08770;">1</span><span>, </span><span style="color:#bf616a;">page_increment</span><span>=</span><span style="color:#d08770;">5
</span><span>        )
</span><span>    )
</span><span>    group.</span><span style="color:#bf616a;">add</span><span>(interval)
</span><span>    
</span><span>    page.</span><span style="color:#bf616a;">add</span><span>(group)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Another group
</span><span>    files_group = Adw.</span><span style="color:#bf616a;">PreferencesGroup</span><span>(</span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Files</span><span>&quot;)
</span><span>    
</span><span>    default_folder = Adw.</span><span style="color:#bf616a;">ActionRow</span><span>(
</span><span>        </span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Default Folder</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">subtitle</span><span>=&quot;</span><span style="color:#a3be8c;">/home/user/Documents</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">activatable</span><span>=</span><span style="color:#d08770;">True
</span><span>    )
</span><span>    chevron = Gtk.Image.</span><span style="color:#bf616a;">new_from_icon_name</span><span>(&quot;</span><span style="color:#a3be8c;">go-next-symbolic</span><span>&quot;)
</span><span>    default_folder.</span><span style="color:#bf616a;">add_suffix</span><span>(chevron)
</span><span>    files_group.</span><span style="color:#bf616a;">add</span><span>(default_folder)
</span><span>    
</span><span>    page.</span><span style="color:#bf616a;">add</span><span>(files_group)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">return </span><span>page
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_appearance_page</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create appearance preferences page.&quot;&quot;&quot;
</span><span>    page = Adw.</span><span style="color:#bf616a;">PreferencesPage</span><span>(
</span><span>        </span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Appearance</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">icon_name</span><span>=&quot;</span><span style="color:#a3be8c;">preferences-desktop-theme-symbolic</span><span>&quot;
</span><span>    )
</span><span>    
</span><span>    group = Adw.</span><span style="color:#bf616a;">PreferencesGroup</span><span>(</span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Theme</span><span>&quot;)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Color scheme selection
</span><span>    color_scheme = Adw.</span><span style="color:#bf616a;">ComboRow</span><span>(
</span><span>        </span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Color Scheme</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">subtitle</span><span>=&quot;</span><span style="color:#a3be8c;">Choose light or dark theme</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">model</span><span>=Gtk.StringList.</span><span style="color:#bf616a;">new</span><span>([&quot;</span><span style="color:#a3be8c;">Light</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">Dark</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">Follow System</span><span>&quot;]),
</span><span>        </span><span style="color:#bf616a;">selected</span><span>=</span><span style="color:#d08770;">2
</span><span>    )
</span><span>    group.</span><span style="color:#bf616a;">add</span><span>(color_scheme)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Font size
</span><span>    font_size = Adw.</span><span style="color:#bf616a;">SpinRow</span><span>(
</span><span>        </span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Font Size</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">adjustment</span><span>=Gtk.</span><span style="color:#bf616a;">Adjustment</span><span>(
</span><span>            </span><span style="color:#bf616a;">value</span><span>=</span><span style="color:#d08770;">11</span><span>, </span><span style="color:#bf616a;">lower</span><span>=</span><span style="color:#d08770;">8</span><span>, </span><span style="color:#bf616a;">upper</span><span>=</span><span style="color:#d08770;">24</span><span>,
</span><span>            </span><span style="color:#bf616a;">step_increment</span><span>=</span><span style="color:#d08770;">1</span><span>, </span><span style="color:#bf616a;">page_increment</span><span>=</span><span style="color:#d08770;">2
</span><span>        ),
</span><span>        </span><span style="color:#bf616a;">digits</span><span>=</span><span style="color:#d08770;">0
</span><span>    )
</span><span>    group.</span><span style="color:#bf616a;">add</span><span>(font_size)
</span><span>    
</span><span>    page.</span><span style="color:#bf616a;">add</span><span>(group)
</span><span>    </span><span style="color:#b48ead;">return </span><span>page
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_advanced_page</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create advanced preferences page.&quot;&quot;&quot;
</span><span>    page = Adw.</span><span style="color:#bf616a;">PreferencesPage</span><span>(
</span><span>        </span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Advanced</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">icon_name</span><span>=&quot;</span><span style="color:#a3be8c;">preferences-other-symbolic</span><span>&quot;
</span><span>    )
</span><span>    
</span><span>    group = Adw.</span><span style="color:#bf616a;">PreferencesGroup</span><span>(</span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Developer Options</span><span>&quot;)
</span><span>    
</span><span>    debug_mode = Adw.</span><span style="color:#bf616a;">SwitchRow</span><span>(
</span><span>        </span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Debug Mode</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">subtitle</span><span>=&quot;</span><span style="color:#a3be8c;">Enable verbose logging</span><span>&quot;
</span><span>    )
</span><span>    group.</span><span style="color:#bf616a;">add</span><span>(debug_mode)
</span><span>    
</span><span>    expander = Adw.</span><span style="color:#bf616a;">ExpanderRow</span><span>(</span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Cache Settings</span><span>&quot;)
</span><span>    
</span><span>    clear_cache = Adw.</span><span style="color:#bf616a;">ActionRow</span><span>(
</span><span>        </span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Clear Cache</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">subtitle</span><span>=&quot;</span><span style="color:#a3be8c;">Remove all cached data</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">activatable</span><span>=</span><span style="color:#d08770;">True
</span><span>    )
</span><span>    delete_icon = Gtk.Image.</span><span style="color:#bf616a;">new_from_icon_name</span><span>(&quot;</span><span style="color:#a3be8c;">user-trash-symbolic</span><span>&quot;)
</span><span>    delete_icon.</span><span style="color:#bf616a;">add_css_class</span><span>(&quot;</span><span style="color:#a3be8c;">error</span><span>&quot;)
</span><span>    clear_cache.</span><span style="color:#bf616a;">add_suffix</span><span>(delete_icon)
</span><span>    expander.</span><span style="color:#bf616a;">add_row</span><span>(clear_cache)
</span><span>    
</span><span>    group.</span><span style="color:#bf616a;">add</span><span>(expander)
</span><span>    page.</span><span style="color:#bf616a;">add</span><span>(group)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">return </span><span>page
</span></code></pre>
<h2 id="chapter-8-layouts-and-containers">Chapter 8: Layouts and Containers</h2>
<h3 id="adwclamp">AdwClamp</h3>
<p>Clamps limit content width for better readability.</p>
<p><strong>Rust Example</strong>:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">use </span><span>adwaita::prelude::*;
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_clamped_content</span><span>() -&gt; adwaita::Clamp {
</span><span>    </span><span style="color:#b48ead;">let</span><span> content = gtk::Label::new(Some(
</span><span>        &quot;</span><span style="color:#a3be8c;">This text will be clamped to a maximum width for better readability. \
</span><span style="color:#a3be8c;">        On wide screens, it won&#39;t stretch too far.</span><span>&quot;
</span><span>    ));
</span><span>    content.</span><span style="color:#96b5b4;">set_wrap</span><span>(</span><span style="color:#d08770;">true</span><span>);
</span><span>    content.</span><span style="color:#96b5b4;">set_xalign</span><span>(</span><span style="color:#d08770;">0.0</span><span>);
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> clamp = adwaita::Clamp::new();
</span><span>    clamp.</span><span style="color:#96b5b4;">set_child</span><span>(Some(&amp;content));
</span><span>    clamp.</span><span style="color:#96b5b4;">set_maximum_size</span><span>(</span><span style="color:#d08770;">600</span><span>); </span><span style="color:#65737e;">// Maximum width in pixels
</span><span>    clamp.</span><span style="color:#96b5b4;">set_tightening_threshold</span><span>(</span><span style="color:#d08770;">400</span><span>); </span><span style="color:#65737e;">// Start tightening below this width
</span><span>    
</span><span>    clamp
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Clamp in scrolled window
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_scrolled_clamped_content</span><span>() -&gt; gtk::ScrolledWindow {
</span><span>    </span><span style="color:#b48ead;">let</span><span> list = gtk::ListBox::new();
</span><span>    list.</span><span style="color:#96b5b4;">add_css_class</span><span>(&quot;</span><span style="color:#a3be8c;">boxed-list</span><span>&quot;);
</span><span>    
</span><span>    </span><span style="color:#b48ead;">for</span><span> i in </span><span style="color:#d08770;">1</span><span>..=</span><span style="color:#d08770;">20 </span><span>{
</span><span>        </span><span style="color:#b48ead;">let</span><span> row = adwaita::ActionRow::builder()
</span><span>            .</span><span style="color:#96b5b4;">title</span><span>(&amp;format!(&quot;</span><span style="color:#a3be8c;">Item </span><span style="color:#d08770;">{}</span><span>&quot;, i))
</span><span>            .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>        list.</span><span style="color:#96b5b4;">append</span><span>(&amp;row);
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> clamp = adwaita::Clamp::new();
</span><span>    clamp.</span><span style="color:#96b5b4;">set_child</span><span>(Some(&amp;list));
</span><span>    clamp.</span><span style="color:#96b5b4;">set_maximum_size</span><span>(</span><span style="color:#d08770;">600</span><span>);
</span><span>
</span><span>    </span><span style="color:#b48ead;">let</span><span> scrolled = gtk::ScrolledWindow::new();
</span><span>    scrolled.</span><span style="color:#96b5b4;">set_child</span><span>(Some(&amp;clamp));
</span><span>    scrolled.</span><span style="color:#96b5b4;">set_vexpand</span><span>(</span><span style="color:#d08770;">true</span><span>);
</span><span>    
</span><span>    scrolled
</span><span>}
</span></code></pre>
<p><strong>Python Example</strong>:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_clamped_content</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create content with width clamping.&quot;&quot;&quot;
</span><span>    content = Gtk.</span><span style="color:#bf616a;">Label</span><span>(
</span><span>        </span><span style="color:#bf616a;">label</span><span>=&quot;</span><span style="color:#a3be8c;">This text will be clamped to a maximum width for better readability. </span><span>&quot;
</span><span>              &quot;</span><span style="color:#a3be8c;">On wide screens, it won&#39;t stretch too far.</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">wrap</span><span>=</span><span style="color:#d08770;">True</span><span>,
</span><span>        </span><span style="color:#bf616a;">xalign</span><span>=</span><span style="color:#d08770;">0.0
</span><span>    )
</span><span>    
</span><span>    clamp = Adw.</span><span style="color:#bf616a;">Clamp</span><span>()
</span><span>    clamp.</span><span style="color:#bf616a;">set_child</span><span>(content)
</span><span>    clamp.</span><span style="color:#bf616a;">set_maximum_size</span><span>(</span><span style="color:#d08770;">600</span><span>)  </span><span style="color:#65737e;"># Maximum width in pixels
</span><span>    clamp.</span><span style="color:#bf616a;">set_tightening_threshold</span><span>(</span><span style="color:#d08770;">400</span><span>)  </span><span style="color:#65737e;"># Start tightening below this width
</span><span>    
</span><span>    </span><span style="color:#b48ead;">return </span><span>clamp
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_scrolled_clamped_content</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create scrolled content with clamping.&quot;&quot;&quot;
</span><span>    list_box = Gtk.</span><span style="color:#bf616a;">ListBox</span><span>()
</span><span>    list_box.</span><span style="color:#bf616a;">add_css_class</span><span>(&#39;</span><span style="color:#a3be8c;">boxed-list</span><span>&#39;)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">for </span><span>i </span><span style="color:#b48ead;">in </span><span style="color:#96b5b4;">range</span><span>(</span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">21</span><span>):
</span><span>        row = Adw.</span><span style="color:#bf616a;">ActionRow</span><span>(</span><span style="color:#bf616a;">title</span><span>=</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">Item </span><span>{i}&quot;)
</span><span>        list_box.</span><span style="color:#bf616a;">append</span><span>(row)
</span><span>    
</span><span>    clamp = Adw.</span><span style="color:#bf616a;">Clamp</span><span>()
</span><span>    clamp.</span><span style="color:#bf616a;">set_child</span><span>(list_box)
</span><span>    clamp.</span><span style="color:#bf616a;">set_maximum_size</span><span>(</span><span style="color:#d08770;">600</span><span>)
</span><span>    
</span><span>    scrolled = Gtk.</span><span style="color:#bf616a;">ScrolledWindow</span><span>()
</span><span>    scrolled.</span><span style="color:#bf616a;">set_child</span><span>(clamp)
</span><span>    scrolled.</span><span style="color:#bf616a;">set_vexpand</span><span>(</span><span style="color:#d08770;">True</span><span>)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">return </span><span>scrolled
</span></code></pre>
<h3 id="adwbin">AdwBin</h3>
<p>Bins are simple containers that hold a single child.</p>
<p><strong>Rust Example</strong>:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">use </span><span>adwaita::prelude::*;
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_bin_example</span><span>() -&gt; adwaita::Bin {
</span><span>    </span><span style="color:#b48ead;">let</span><span> button = gtk::Button::with_label(&quot;</span><span style="color:#a3be8c;">Click me</span><span>&quot;);
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> bin = adwaita::Bin::new();
</span><span>    bin.</span><span style="color:#96b5b4;">set_child</span><span>(Some(&amp;button));
</span><span>    
</span><span>    bin
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Bin with dynamic content switching
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_dynamic_bin</span><span>() -&gt; adwaita::Bin {
</span><span>    </span><span style="color:#b48ead;">let</span><span> bin = adwaita::Bin::new();
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Initial content
</span><span>    </span><span style="color:#b48ead;">let</span><span> label = gtk::Label::new(Some(&quot;</span><span style="color:#a3be8c;">Initial content</span><span>&quot;));
</span><span>    bin.</span><span style="color:#96b5b4;">set_child</span><span>(Some(&amp;label));
</span><span>    
</span><span>    bin
</span><span>}
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">switch_bin_content</span><span>(</span><span style="color:#bf616a;">bin</span><span>: &amp;adwaita::Bin, </span><span style="color:#bf616a;">show_spinner</span><span>: </span><span style="color:#b48ead;">bool</span><span>) {
</span><span>    </span><span style="color:#b48ead;">if</span><span> show_spinner {
</span><span>        </span><span style="color:#b48ead;">let</span><span> spinner = gtk::Spinner::new();
</span><span>        spinner.</span><span style="color:#96b5b4;">start</span><span>();
</span><span>        bin.</span><span style="color:#96b5b4;">set_child</span><span>(Some(&amp;spinner));
</span><span>    } </span><span style="color:#b48ead;">else </span><span>{
</span><span>        </span><span style="color:#b48ead;">let</span><span> label = gtk::Label::new(Some(&quot;</span><span style="color:#a3be8c;">Content loaded</span><span>&quot;));
</span><span>        bin.</span><span style="color:#96b5b4;">set_child</span><span>(Some(&amp;label));
</span><span>    }
</span><span>}
</span></code></pre>
<p><strong>Python Example</strong>:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_bin_example</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create a simple bin container.&quot;&quot;&quot;
</span><span>    button = Gtk.</span><span style="color:#bf616a;">Button</span><span>(</span><span style="color:#bf616a;">label</span><span>=&quot;</span><span style="color:#a3be8c;">Click me</span><span>&quot;)
</span><span>    
</span><span>    bin_container = Adw.</span><span style="color:#bf616a;">Bin</span><span>()
</span><span>    bin_container.</span><span style="color:#bf616a;">set_child</span><span>(button)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">return </span><span>bin_container
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_dynamic_bin</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create bin with dynamic content.&quot;&quot;&quot;
</span><span>    </span><span style="color:#bf616a;">self</span><span>.bin = Adw.</span><span style="color:#bf616a;">Bin</span><span>()
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Initial content
</span><span>    label = Gtk.</span><span style="color:#bf616a;">Label</span><span>(</span><span style="color:#bf616a;">label</span><span>=&quot;</span><span style="color:#a3be8c;">Initial content</span><span>&quot;)
</span><span>    </span><span style="color:#bf616a;">self</span><span>.bin.</span><span style="color:#bf616a;">set_child</span><span>(label)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">self</span><span>.bin
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">switch_bin_content</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">show_spinner</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Switch content in bin.&quot;&quot;&quot;
</span><span>    </span><span style="color:#b48ead;">if </span><span>show_spinner:
</span><span>        spinner = Gtk.</span><span style="color:#bf616a;">Spinner</span><span>()
</span><span>        spinner.</span><span style="color:#bf616a;">start</span><span>()
</span><span>        </span><span style="color:#bf616a;">self</span><span>.bin.</span><span style="color:#bf616a;">set_child</span><span>(spinner)
</span><span>    </span><span style="color:#b48ead;">else</span><span>:
</span><span>        label = Gtk.</span><span style="color:#bf616a;">Label</span><span>(</span><span style="color:#bf616a;">label</span><span>=&quot;</span><span style="color:#a3be8c;">Content loaded</span><span>&quot;)
</span><span>        </span><span style="color:#bf616a;">self</span><span>.bin.</span><span style="color:#bf616a;">set_child</span><span>(label)
</span></code></pre>
<h3 id="adwtoolbarview">AdwToolbarView</h3>
<p>Toolbar views manage top and bottom bars around content.</p>
<p><strong>Rust Example</strong>:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">use </span><span>adwaita::prelude::*;
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_toolbar_view</span><span>() -&gt; adwaita::ToolbarView {
</span><span>    </span><span style="color:#b48ead;">let</span><span> toolbar_view = adwaita::ToolbarView::new();
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Add header bar
</span><span>    </span><span style="color:#b48ead;">let</span><span> header = adwaita::HeaderBar::new();
</span><span>    toolbar_view.</span><span style="color:#96b5b4;">add_top_bar</span><span>(&amp;header);
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Add content
</span><span>    </span><span style="color:#b48ead;">let</span><span> content = gtk::Label::new(Some(&quot;</span><span style="color:#a3be8c;">Main content area</span><span>&quot;));
</span><span>    content.</span><span style="color:#96b5b4;">set_vexpand</span><span>(</span><span style="color:#d08770;">true</span><span>);
</span><span>    toolbar_view.</span><span style="color:#96b5b4;">set_content</span><span>(Some(&amp;content));
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Add bottom bar
</span><span>    </span><span style="color:#b48ead;">let</span><span> bottom_bar = gtk::ActionBar::new();
</span><span>    </span><span style="color:#b48ead;">let</span><span> button = gtk::Button::with_label(&quot;</span><span style="color:#a3be8c;">Action</span><span>&quot;);
</span><span>    bottom_bar.</span><span style="color:#96b5b4;">pack_start</span><span>(&amp;button);
</span><span>    toolbar_view.</span><span style="color:#96b5b4;">add_bottom_bar</span><span>(&amp;bottom_bar);
</span><span>    
</span><span>    toolbar_view
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Toolbar view with multiple top bars
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_multi_bar_view</span><span>() -&gt; adwaita::ToolbarView {
</span><span>    </span><span style="color:#b48ead;">let</span><span> toolbar_view = adwaita::ToolbarView::new();
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Header bar
</span><span>    </span><span style="color:#b48ead;">let</span><span> header = adwaita::HeaderBar::new();
</span><span>    toolbar_view.</span><span style="color:#96b5b4;">add_top_bar</span><span>(&amp;header);
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Search bar
</span><span>    </span><span style="color:#b48ead;">let</span><span> search_bar = gtk::SearchBar::new();
</span><span>    </span><span style="color:#b48ead;">let</span><span> search_entry = gtk::SearchEntry::new();
</span><span>    search_bar.</span><span style="color:#96b5b4;">set_child</span><span>(Some(&amp;search_entry));
</span><span>    toolbar_view.</span><span style="color:#96b5b4;">add_top_bar</span><span>(&amp;search_bar);
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Info bar / Banner
</span><span>    </span><span style="color:#b48ead;">let</span><span> banner = adwaita::Banner::new(&quot;</span><span style="color:#a3be8c;">Updates available</span><span>&quot;);
</span><span>    banner.</span><span style="color:#96b5b4;">set_button_label</span><span>(Some(&quot;</span><span style="color:#a3be8c;">Install</span><span>&quot;));
</span><span>    toolbar_view.</span><span style="color:#96b5b4;">add_top_bar</span><span>(&amp;banner);
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Content
</span><span>    </span><span style="color:#b48ead;">let</span><span> content = gtk::Label::new(Some(&quot;</span><span style="color:#a3be8c;">Content</span><span>&quot;));
</span><span>    content.</span><span style="color:#96b5b4;">set_vexpand</span><span>(</span><span style="color:#d08770;">true</span><span>);
</span><span>    toolbar_view.</span><span style="color:#96b5b4;">set_content</span><span>(Some(&amp;content));
</span><span>    
</span><span>    toolbar_view
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Control reveal state
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">set_toolbar_revealed</span><span>(</span><span style="color:#bf616a;">toolbar_view</span><span>: &amp;adwaita::ToolbarView, </span><span style="color:#bf616a;">revealed</span><span>: </span><span style="color:#b48ead;">bool</span><span>) {
</span><span>    toolbar_view.</span><span style="color:#96b5b4;">set_reveal_top_bars</span><span>(revealed);
</span><span>    toolbar_view.</span><span style="color:#96b5b4;">set_reveal_bottom_bars</span><span>(revealed);
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Extend content into toolbar areas
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_extended_toolbar_view</span><span>() -&gt; adwaita::ToolbarView {
</span><span>    </span><span style="color:#b48ead;">let</span><span> toolbar_view = adwaita::ToolbarView::new();
</span><span>    toolbar_view.</span><span style="color:#96b5b4;">set_extend_content_to_top_edge</span><span>(</span><span style="color:#d08770;">true</span><span>);
</span><span>    toolbar_view.</span><span style="color:#96b5b4;">set_extend_content_to_bottom_edge</span><span>(</span><span style="color:#d08770;">true</span><span>);
</span><span>    
</span><span>    </span><span style="color:#65737e;">// This allows content like images to extend under transparent toolbars
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> header = adwaita::HeaderBar::new();
</span><span>    toolbar_view.</span><span style="color:#96b5b4;">add_top_bar</span><span>(&amp;header);
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> image = gtk::Picture::for_filename(&quot;</span><span style="color:#a3be8c;">background.jpg</span><span>&quot;);
</span><span>    toolbar_view.</span><span style="color:#96b5b4;">set_content</span><span>(Some(&amp;image));
</span><span>    
</span><span>    toolbar_view
</span><span>}
</span></code></pre>
<p><strong>Python Example</strong>:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_toolbar_view</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create a toolbar view with top and bottom bars.&quot;&quot;&quot;
</span><span>    toolbar_view = Adw.</span><span style="color:#bf616a;">ToolbarView</span><span>()
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Add header bar
</span><span>    header = Adw.</span><span style="color:#bf616a;">HeaderBar</span><span>()
</span><span>    toolbar_view.</span><span style="color:#bf616a;">add_top_bar</span><span>(header)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Add content
</span><span>    content = Gtk.</span><span style="color:#bf616a;">Label</span><span>(</span><span style="color:#bf616a;">label</span><span>=&quot;</span><span style="color:#a3be8c;">Main content area</span><span>&quot;)
</span><span>    content.</span><span style="color:#bf616a;">set_vexpand</span><span>(</span><span style="color:#d08770;">True</span><span>)
</span><span>    toolbar_view.</span><span style="color:#bf616a;">set_content</span><span>(content)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Add bottom bar
</span><span>    bottom_bar = Gtk.</span><span style="color:#bf616a;">ActionBar</span><span>()
</span><span>    button = Gtk.</span><span style="color:#bf616a;">Button</span><span>(</span><span style="color:#bf616a;">label</span><span>=&quot;</span><span style="color:#a3be8c;">Action</span><span>&quot;)
</span><span>    bottom_bar.</span><span style="color:#bf616a;">pack_start</span><span>(button)
</span><span>    toolbar_view.</span><span style="color:#bf616a;">add_bottom_bar</span><span>(bottom_bar)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">return </span><span>toolbar_view
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_multi_bar_view</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create toolbar view with multiple top bars.&quot;&quot;&quot;
</span><span>    toolbar_view = Adw.</span><span style="color:#bf616a;">ToolbarView</span><span>()
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Header bar
</span><span>    header = Adw.</span><span style="color:#bf616a;">HeaderBar</span><span>()
</span><span>    toolbar_view.</span><span style="color:#bf616a;">add_top_bar</span><span>(header)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Search bar
</span><span>    search_bar = Gtk.</span><span style="color:#bf616a;">SearchBar</span><span>()
</span><span>    search_entry = Gtk.</span><span style="color:#bf616a;">SearchEntry</span><span>()
</span><span>    search_bar.</span><span style="color:#bf616a;">set_child</span><span>(search_entry)
</span><span>    toolbar_view.</span><span style="color:#bf616a;">add_top_bar</span><span>(search_bar)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Banner
</span><span>    banner = Adw.</span><span style="color:#bf616a;">Banner</span><span>(</span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Updates available</span><span>&quot;)
</span><span>    banner.</span><span style="color:#bf616a;">set_button_label</span><span>(&quot;</span><span style="color:#a3be8c;">Install</span><span>&quot;)
</span><span>    toolbar_view.</span><span style="color:#bf616a;">add_top_bar</span><span>(banner)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Content
</span><span>    content = Gtk.</span><span style="color:#bf616a;">Label</span><span>(</span><span style="color:#bf616a;">label</span><span>=&quot;</span><span style="color:#a3be8c;">Content</span><span>&quot;)
</span><span>    content.</span><span style="color:#bf616a;">set_vexpand</span><span>(</span><span style="color:#d08770;">True</span><span>)
</span><span>    toolbar_view.</span><span style="color:#bf616a;">set_content</span><span>(content)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">return </span><span>toolbar_view
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">set_toolbar_revealed</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">toolbar_view</span><span>, </span><span style="color:#bf616a;">revealed</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Control toolbar reveal state.&quot;&quot;&quot;
</span><span>    toolbar_view.</span><span style="color:#bf616a;">set_reveal_top_bars</span><span>(revealed)
</span><span>    toolbar_view.</span><span style="color:#bf616a;">set_reveal_bottom_bars</span><span>(revealed)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_extended_toolbar_view</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create toolbar view with extended content.&quot;&quot;&quot;
</span><span>    toolbar_view = Adw.</span><span style="color:#bf616a;">ToolbarView</span><span>()
</span><span>    toolbar_view.</span><span style="color:#bf616a;">set_extend_content_to_top_edge</span><span>(</span><span style="color:#d08770;">True</span><span>)
</span><span>    toolbar_view.</span><span style="color:#bf616a;">set_extend_content_to_bottom_edge</span><span>(</span><span style="color:#d08770;">True</span><span>)
</span><span>    
</span><span>    header = Adw.</span><span style="color:#bf616a;">HeaderBar</span><span>()
</span><span>    toolbar_view.</span><span style="color:#bf616a;">add_top_bar</span><span>(header)
</span><span>    
</span><span>    image = Gtk.Picture.</span><span style="color:#bf616a;">new_for_filename</span><span>(&quot;</span><span style="color:#a3be8c;">background.jpg</span><span>&quot;)
</span><span>    toolbar_view.</span><span style="color:#bf616a;">set_content</span><span>(image)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">return </span><span>toolbar_view
</span></code></pre>
<h3 id="adwoverlaysplitview">AdwOverlaySplitView</h3>
<p>Overlay split views provide sidebar navigation that overlays on mobile.</p>
<p><strong>Rust Example</strong>:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">use </span><span>adwaita::prelude::*;
</span><span style="color:#b48ead;">use </span><span>gtk::glib;
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_overlay_split_view</span><span>() -&gt; adwaita::OverlaySplitView {
</span><span>    </span><span style="color:#b48ead;">let</span><span> split_view = adwaita::OverlaySplitView::new();
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Create sidebar
</span><span>    </span><span style="color:#b48ead;">let</span><span> sidebar = </span><span style="color:#96b5b4;">create_sidebar_list</span><span>();
</span><span>    split_view.</span><span style="color:#96b5b4;">set_sidebar</span><span>(Some(&amp;sidebar));
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Create content
</span><span>    </span><span style="color:#b48ead;">let</span><span> content = </span><span style="color:#96b5b4;">create_main_content</span><span>();
</span><span>    split_view.</span><span style="color:#96b5b4;">set_content</span><span>(Some(&amp;content));
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Configure
</span><span>    split_view.</span><span style="color:#96b5b4;">set_sidebar_position</span><span>(gtk::PackType::Start);
</span><span>    split_view.</span><span style="color:#96b5b4;">set_min_sidebar_width</span><span>(</span><span style="color:#d08770;">200.0</span><span>);
</span><span>    split_view.</span><span style="color:#96b5b4;">set_max_sidebar_width</span><span>(</span><span style="color:#d08770;">300.0</span><span>);
</span><span>    split_view.</span><span style="color:#96b5b4;">set_sidebar_width_fraction</span><span>(</span><span style="color:#d08770;">0.25</span><span>);
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Pin sidebar on desktop, overlay on mobile
</span><span>    split_view.</span><span style="color:#96b5b4;">set_pin_sidebar</span><span>(</span><span style="color:#d08770;">true</span><span>);
</span><span>    
</span><span>    split_view
</span><span>}
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_sidebar_list</span><span>() -&gt; gtk::Widget {
</span><span>    </span><span style="color:#b48ead;">let</span><span> list = gtk::ListBox::new();
</span><span>    list.</span><span style="color:#96b5b4;">add_css_class</span><span>(&quot;</span><span style="color:#a3be8c;">navigation-sidebar</span><span>&quot;);
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> items = vec![
</span><span>        (&quot;</span><span style="color:#a3be8c;">Inbox</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">mail-inbox-symbolic</span><span>&quot;),
</span><span>        (&quot;</span><span style="color:#a3be8c;">Sent</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">mail-sent-symbolic</span><span>&quot;),
</span><span>        (&quot;</span><span style="color:#a3be8c;">Drafts</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">document-edit-symbolic</span><span>&quot;),
</span><span>        (&quot;</span><span style="color:#a3be8c;">Trash</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">user-trash-symbolic</span><span>&quot;),
</span><span>    ];
</span><span>    
</span><span>    </span><span style="color:#b48ead;">for </span><span>(title, icon) in items {
</span><span>        </span><span style="color:#b48ead;">let</span><span> row = adwaita::ActionRow::builder()
</span><span>            .</span><span style="color:#96b5b4;">title</span><span>(title)
</span><span>            .</span><span style="color:#96b5b4;">activatable</span><span>(</span><span style="color:#d08770;">true</span><span>)
</span><span>            .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>        
</span><span>        </span><span style="color:#b48ead;">let</span><span> icon_widget = gtk::Image::from_icon_name(icon);
</span><span>        row.</span><span style="color:#96b5b4;">add_prefix</span><span>(&amp;icon_widget);
</span><span>        
</span><span>        list.</span><span style="color:#96b5b4;">append</span><span>(&amp;row);
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> scrolled = gtk::ScrolledWindow::new();
</span><span>    scrolled.</span><span style="color:#96b5b4;">set_child</span><span>(Some(&amp;list));
</span><span>    scrolled.</span><span style="color:#96b5b4;">upcast</span><span>()
</span><span>}
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_main_content</span><span>() -&gt; gtk::Widget {
</span><span>    adwaita::StatusPage::builder()
</span><span>        .</span><span style="color:#96b5b4;">title</span><span>(&quot;</span><span style="color:#a3be8c;">Select an Item</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">description</span><span>(&quot;</span><span style="color:#a3be8c;">Choose something from the sidebar</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">icon_name</span><span>(&quot;</span><span style="color:#a3be8c;">mail-inbox-symbolic</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>()
</span><span>        .</span><span style="color:#96b5b4;">upcast</span><span>()
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Toggle sidebar
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">toggle_sidebar</span><span>(</span><span style="color:#bf616a;">split_view</span><span>: &amp;adwaita::OverlaySplitView) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> shown = split_view.</span><span style="color:#96b5b4;">shows_sidebar</span><span>();
</span><span>    split_view.</span><span style="color:#96b5b4;">set_show_sidebar</span><span>(!shown);
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Handle adaptive behavior
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">setup_split_view_handlers</span><span>(</span><span style="color:#bf616a;">split_view</span><span>: &amp;adwaita::OverlaySplitView) {
</span><span>    split_view.</span><span style="color:#96b5b4;">connect_show_sidebar_notify</span><span>(|</span><span style="color:#bf616a;">view</span><span>| {
</span><span>        </span><span style="color:#b48ead;">let</span><span> shown = view.</span><span style="color:#96b5b4;">shows_sidebar</span><span>();
</span><span>        println!(&quot;</span><span style="color:#a3be8c;">Sidebar is now </span><span style="color:#d08770;">{}</span><span>&quot;, </span><span style="color:#b48ead;">if</span><span> shown { &quot;</span><span style="color:#a3be8c;">shown</span><span>&quot; } </span><span style="color:#b48ead;">else </span><span>{ &quot;</span><span style="color:#a3be8c;">hidden</span><span>&quot; });
</span><span>    });
</span><span>    
</span><span>    split_view.</span><span style="color:#96b5b4;">connect_collapsed_notify</span><span>(|</span><span style="color:#bf616a;">view</span><span>| {
</span><span>        </span><span style="color:#b48ead;">let</span><span> collapsed = view.</span><span style="color:#96b5b4;">is_collapsed</span><span>();
</span><span>        println!(&quot;</span><span style="color:#a3be8c;">View is </span><span style="color:#d08770;">{}</span><span>&quot;, </span><span style="color:#b48ead;">if</span><span> collapsed { &quot;</span><span style="color:#a3be8c;">collapsed</span><span>&quot; } </span><span style="color:#b48ead;">else </span><span>{ &quot;</span><span style="color:#a3be8c;">expanded</span><span>&quot; });
</span><span>    });
</span><span>}
</span></code></pre>
<p><strong>Python Example</strong>:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_overlay_split_view</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create an overlay split view.&quot;&quot;&quot;
</span><span>    </span><span style="color:#bf616a;">self</span><span>.split_view = Adw.</span><span style="color:#bf616a;">OverlaySplitView</span><span>()
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Create sidebar
</span><span>    sidebar = </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">create_sidebar_list</span><span>()
</span><span>    </span><span style="color:#bf616a;">self</span><span>.split_view.</span><span style="color:#bf616a;">set_sidebar</span><span>(sidebar)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Create content
</span><span>    content = </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">create_main_content</span><span>()
</span><span>    </span><span style="color:#bf616a;">self</span><span>.split_view.</span><span style="color:#bf616a;">set_content</span><span>(content)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Configure
</span><span>    </span><span style="color:#bf616a;">self</span><span>.split_view.</span><span style="color:#bf616a;">set_sidebar_position</span><span>(Gtk.PackType.</span><span style="color:#bf616a;">START</span><span>)
</span><span>    </span><span style="color:#bf616a;">self</span><span>.split_view.</span><span style="color:#bf616a;">set_min_sidebar_width</span><span>(</span><span style="color:#d08770;">200</span><span>)
</span><span>    </span><span style="color:#bf616a;">self</span><span>.split_view.</span><span style="color:#bf616a;">set_max_sidebar_width</span><span>(</span><span style="color:#d08770;">300</span><span>)
</span><span>    </span><span style="color:#bf616a;">self</span><span>.split_view.</span><span style="color:#bf616a;">set_sidebar_width_fraction</span><span>(</span><span style="color:#d08770;">0.25</span><span>)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Pin sidebar on desktop
</span><span>    </span><span style="color:#bf616a;">self</span><span>.split_view.</span><span style="color:#bf616a;">set_pin_sidebar</span><span>(</span><span style="color:#d08770;">True</span><span>)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">self</span><span>.split_view
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_sidebar_list</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create sidebar list.&quot;&quot;&quot;
</span><span>    list_box = Gtk.</span><span style="color:#bf616a;">ListBox</span><span>()
</span><span>    list_box.</span><span style="color:#bf616a;">add_css_class</span><span>(&#39;</span><span style="color:#a3be8c;">navigation-sidebar</span><span>&#39;)
</span><span>    
</span><span>    items = [
</span><span>        (&quot;</span><span style="color:#a3be8c;">Inbox</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">mail-inbox-symbolic</span><span>&quot;),
</span><span>        (&quot;</span><span style="color:#a3be8c;">Sent</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">mail-sent-symbolic</span><span>&quot;),
</span><span>        (&quot;</span><span style="color:#a3be8c;">Drafts</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">document-edit-symbolic</span><span>&quot;),
</span><span>        (&quot;</span><span style="color:#a3be8c;">Trash</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">user-trash-symbolic</span><span>&quot;),
</span><span>    ]
</span><span>    
</span><span>    </span><span style="color:#b48ead;">for </span><span>title, icon </span><span style="color:#b48ead;">in </span><span>items:
</span><span>        row = Adw.</span><span style="color:#bf616a;">ActionRow</span><span>(
</span><span>            </span><span style="color:#bf616a;">title</span><span>=title,
</span><span>            </span><span style="color:#bf616a;">activatable</span><span>=</span><span style="color:#d08770;">True
</span><span>        )
</span><span>        
</span><span>        icon_widget = Gtk.Image.</span><span style="color:#bf616a;">new_from_icon_name</span><span>(icon)
</span><span>        row.</span><span style="color:#bf616a;">add_prefix</span><span>(icon_widget)
</span><span>        
</span><span>        list_box.</span><span style="color:#bf616a;">append</span><span>(row)
</span><span>    
</span><span>    list_box.</span><span style="color:#bf616a;">connect</span><span>(&#39;</span><span style="color:#a3be8c;">row-activated</span><span>&#39;, </span><span style="color:#bf616a;">self</span><span>.on_sidebar_activated)
</span><span>    
</span><span>    scrolled = Gtk.</span><span style="color:#bf616a;">ScrolledWindow</span><span>()
</span><span>    scrolled.</span><span style="color:#bf616a;">set_child</span><span>(list_box)
</span><span>    </span><span style="color:#b48ead;">return </span><span>scrolled
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_main_content</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create main content area.&quot;&quot;&quot;
</span><span>    </span><span style="color:#b48ead;">return </span><span>Adw.</span><span style="color:#bf616a;">StatusPage</span><span>(
</span><span>        </span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Select an Item</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">description</span><span>=&quot;</span><span style="color:#a3be8c;">Choose something from the sidebar</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">icon_name</span><span>=&quot;</span><span style="color:#a3be8c;">mail-inbox-symbolic</span><span>&quot;
</span><span>    )
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">toggle_sidebar</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Toggle sidebar visibility.&quot;&quot;&quot;
</span><span>    shown = </span><span style="color:#bf616a;">self</span><span>.split_view.</span><span style="color:#bf616a;">get_show_sidebar</span><span>()
</span><span>    </span><span style="color:#bf616a;">self</span><span>.split_view.</span><span style="color:#bf616a;">set_show_sidebar</span><span>(not shown)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">on_sidebar_activated</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">list_box</span><span>, </span><span style="color:#bf616a;">row</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Handle sidebar item activation.&quot;&quot;&quot;
</span><span>    </span><span style="color:#65737e;"># On mobile, hide sidebar after selection
</span><span>    </span><span style="color:#b48ead;">if </span><span style="color:#bf616a;">self</span><span>.split_view.</span><span style="color:#bf616a;">get_collapsed</span><span>():
</span><span>        </span><span style="color:#bf616a;">self</span><span>.split_view.</span><span style="color:#bf616a;">set_show_sidebar</span><span>(</span><span style="color:#d08770;">False</span><span>)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">setup_split_view_handlers</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Setup split view property listeners.&quot;&quot;&quot;
</span><span>    </span><span style="color:#bf616a;">self</span><span>.split_view.</span><span style="color:#bf616a;">connect</span><span>(&#39;</span><span style="color:#a3be8c;">notify::show-sidebar</span><span>&#39;, </span><span style="color:#bf616a;">self</span><span>.on_sidebar_visibility_changed)
</span><span>    </span><span style="color:#bf616a;">self</span><span>.split_view.</span><span style="color:#bf616a;">connect</span><span>(&#39;</span><span style="color:#a3be8c;">notify::collapsed</span><span>&#39;, </span><span style="color:#bf616a;">self</span><span>.on_collapse_changed)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">on_sidebar_visibility_changed</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">split_view</span><span>, </span><span style="color:#bf616a;">_pspec</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Handle sidebar visibility change.&quot;&quot;&quot;
</span><span>    shown = split_view.</span><span style="color:#bf616a;">get_show_sidebar</span><span>()
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">Sidebar is now </span><span>{&#39;</span><span style="color:#a3be8c;">shown</span><span>&#39; </span><span style="color:#b48ead;">if </span><span>shown </span><span style="color:#b48ead;">else </span><span>&#39;</span><span style="color:#a3be8c;">hidden</span><span>&#39;}&quot;)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">on_collapse_changed</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">split_view</span><span>, </span><span style="color:#bf616a;">_pspec</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Handle collapse state change.&quot;&quot;&quot;
</span><span>    collapsed = split_view.</span><span style="color:#bf616a;">get_collapsed</span><span>()
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">View is </span><span>{&#39;</span><span style="color:#a3be8c;">collapsed</span><span>&#39; </span><span style="color:#b48ead;">if </span><span>collapsed </span><span style="color:#b48ead;">else </span><span>&#39;</span><span style="color:#a3be8c;">expanded</span><span>&#39;}&quot;)
</span></code></pre>
<h3 id="gtk-box-and-grid">GTK Box and Grid</h3>
<p>Standard GTK containers are still used for layout.</p>
<p><strong>Rust Example</strong>:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">use </span><span>gtk::prelude::*;
</span><span>
</span><span style="color:#65737e;">// Vertical box
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_vertical_box</span><span>() -&gt; gtk::Box {
</span><span>    </span><span style="color:#b48ead;">let</span><span> vbox = gtk::Box::new(gtk::Orientation::Vertical, </span><span style="color:#d08770;">12</span><span>);
</span><span>    vbox.</span><span style="color:#96b5b4;">set_margin_top</span><span>(</span><span style="color:#d08770;">12</span><span>);
</span><span>    vbox.</span><span style="color:#96b5b4;">set_margin_bottom</span><span>(</span><span style="color:#d08770;">12</span><span>);
</span><span>    vbox.</span><span style="color:#96b5b4;">set_margin_start</span><span>(</span><span style="color:#d08770;">12</span><span>);
</span><span>    vbox.</span><span style="color:#96b5b4;">set_margin_end</span><span>(</span><span style="color:#d08770;">12</span><span>);
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> label = gtk::Label::new(Some(&quot;</span><span style="color:#a3be8c;">Title</span><span>&quot;));
</span><span>    label.</span><span style="color:#96b5b4;">add_css_class</span><span>(&quot;</span><span style="color:#a3be8c;">title-1</span><span>&quot;);
</span><span>    vbox.</span><span style="color:#96b5b4;">append</span><span>(&amp;label);
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> entry = gtk::Entry::new();
</span><span>    entry.</span><span style="color:#96b5b4;">set_placeholder_text</span><span>(Some(&quot;</span><span style="color:#a3be8c;">Enter text...</span><span>&quot;));
</span><span>    vbox.</span><span style="color:#96b5b4;">append</span><span>(&amp;entry);
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> button = gtk::Button::with_label(&quot;</span><span style="color:#a3be8c;">Submit</span><span>&quot;);
</span><span>    button.</span><span style="color:#96b5b4;">add_css_class</span><span>(&quot;</span><span style="color:#a3be8c;">suggested-action</span><span>&quot;);
</span><span>    vbox.</span><span style="color:#96b5b4;">append</span><span>(&amp;button);
</span><span>    
</span><span>    vbox
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Horizontal box
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_horizontal_box</span><span>() -&gt; gtk::Box {
</span><span>    </span><span style="color:#b48ead;">let</span><span> hbox = gtk::Box::new(gtk::Orientation::Horizontal, </span><span style="color:#d08770;">6</span><span>);
</span><span>    hbox.</span><span style="color:#96b5b4;">set_homogeneous</span><span>(</span><span style="color:#d08770;">true</span><span>); </span><span style="color:#65737e;">// Equal width children
</span><span>    
</span><span>    </span><span style="color:#b48ead;">for</span><span> i in </span><span style="color:#d08770;">1</span><span>..=</span><span style="color:#d08770;">3 </span><span>{
</span><span>        </span><span style="color:#b48ead;">let</span><span> button = gtk::Button::with_label(&amp;format!(&quot;</span><span style="color:#a3be8c;">Button </span><span style="color:#d08770;">{}</span><span>&quot;, i));
</span><span>        hbox.</span><span style="color:#96b5b4;">append</span><span>(&amp;button);
</span><span>    }
</span><span>    
</span><span>    hbox
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Grid layout
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_grid</span><span>() -&gt; gtk::Grid {
</span><span>    </span><span style="color:#b48ead;">let</span><span> grid = gtk::Grid::new();
</span><span>    grid.</span><span style="color:#96b5b4;">set_row_spacing</span><span>(</span><span style="color:#d08770;">12</span><span>);
</span><span>    grid.</span><span style="color:#96b5b4;">set_column_spacing</span><span>(</span><span style="color:#d08770;">12</span><span>);
</span><span>    grid.</span><span style="color:#96b5b4;">set_margin_top</span><span>(</span><span style="color:#d08770;">12</span><span>);
</span><span>    grid.</span><span style="color:#96b5b4;">set_margin_bottom</span><span>(</span><span style="color:#d08770;">12</span><span>);
</span><span>    grid.</span><span style="color:#96b5b4;">set_margin_start</span><span>(</span><span style="color:#d08770;">12</span><span>);
</span><span>    grid.</span><span style="color:#96b5b4;">set_margin_end</span><span>(</span><span style="color:#d08770;">12</span><span>);
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Labels in first column
</span><span>    </span><span style="color:#b48ead;">let</span><span> name_label = gtk::Label::new(Some(&quot;</span><span style="color:#a3be8c;">Name:</span><span>&quot;));
</span><span>    name_label.</span><span style="color:#96b5b4;">set_xalign</span><span>(</span><span style="color:#d08770;">1.0</span><span>);
</span><span>    grid.</span><span style="color:#96b5b4;">attach</span><span>(&amp;name_label, </span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">1</span><span>);
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> email_label = gtk::Label::new(Some(&quot;</span><span style="color:#a3be8c;">Email:</span><span>&quot;));
</span><span>    email_label.</span><span style="color:#96b5b4;">set_xalign</span><span>(</span><span style="color:#d08770;">1.0</span><span>);
</span><span>    grid.</span><span style="color:#96b5b4;">attach</span><span>(&amp;email_label, </span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">1</span><span>);
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Entries in second column
</span><span>    </span><span style="color:#b48ead;">let</span><span> name_entry = gtk::Entry::new();
</span><span>    name_entry.</span><span style="color:#96b5b4;">set_hexpand</span><span>(</span><span style="color:#d08770;">true</span><span>);
</span><span>    grid.</span><span style="color:#96b5b4;">attach</span><span>(&amp;name_entry, </span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">1</span><span>);
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> email_entry = gtk::Entry::new();
</span><span>    email_entry.</span><span style="color:#96b5b4;">set_hexpand</span><span>(</span><span style="color:#d08770;">true</span><span>);
</span><span>    grid.</span><span style="color:#96b5b4;">attach</span><span>(&amp;email_entry, </span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">1</span><span>);
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Button spanning both columns
</span><span>    </span><span style="color:#b48ead;">let</span><span> button = gtk::Button::with_label(&quot;</span><span style="color:#a3be8c;">Submit</span><span>&quot;);
</span><span>    button.</span><span style="color:#96b5b4;">add_css_class</span><span>(&quot;</span><span style="color:#a3be8c;">suggested-action</span><span>&quot;);
</span><span>    grid.</span><span style="color:#96b5b4;">attach</span><span>(&amp;button, </span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">2</span><span>, </span><span style="color:#d08770;">2</span><span>, </span><span style="color:#d08770;">1</span><span>);
</span><span>    
</span><span>    grid
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Center box (start, center, end sections)
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_center_box</span><span>() -&gt; gtk::CenterBox {
</span><span>    </span><span style="color:#b48ead;">let</span><span> center_box = gtk::CenterBox::new();
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Start
</span><span>    </span><span style="color:#b48ead;">let</span><span> back_button = gtk::Button::from_icon_name(&quot;</span><span style="color:#a3be8c;">go-previous-symbolic</span><span>&quot;);
</span><span>    center_box.</span><span style="color:#96b5b4;">set_start_widget</span><span>(Some(&amp;back_button));
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Center
</span><span>    </span><span style="color:#b48ead;">let</span><span> title = gtk::Label::new(Some(&quot;</span><span style="color:#a3be8c;">Page Title</span><span>&quot;));
</span><span>    title.</span><span style="color:#96b5b4;">add_css_class</span><span>(&quot;</span><span style="color:#a3be8c;">title-3</span><span>&quot;);
</span><span>    center_box.</span><span style="color:#96b5b4;">set_center_widget</span><span>(Some(&amp;title));
</span><span>    
</span><span>    </span><span style="color:#65737e;">// End
</span><span>    </span><span style="color:#b48ead;">let</span><span> menu_button = gtk::MenuButton::new();
</span><span>    menu_button.</span><span style="color:#96b5b4;">set_icon_name</span><span>(&quot;</span><span style="color:#a3be8c;">open-menu-symbolic</span><span>&quot;);
</span><span>    center_box.</span><span style="color:#96b5b4;">set_end_widget</span><span>(Some(&amp;menu_button));
</span><span>    
</span><span>    center_box
</span><span>}
</span></code></pre>
<p><strong>Python Example</strong>:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_vertical_box</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create a vertical box layout.&quot;&quot;&quot;
</span><span>    vbox = Gtk.</span><span style="color:#bf616a;">Box</span><span>(</span><span style="color:#bf616a;">orientation</span><span>=Gtk.Orientation.</span><span style="color:#bf616a;">VERTICAL</span><span>, </span><span style="color:#bf616a;">spacing</span><span>=</span><span style="color:#d08770;">12</span><span>)
</span><span>    vbox.</span><span style="color:#bf616a;">set_margin_top</span><span>(</span><span style="color:#d08770;">12</span><span>)
</span><span>    vbox.</span><span style="color:#bf616a;">set_margin_bottom</span><span>(</span><span style="color:#d08770;">12</span><span>)
</span><span>    vbox.</span><span style="color:#bf616a;">set_margin_start</span><span>(</span><span style="color:#d08770;">12</span><span>)
</span><span>    vbox.</span><span style="color:#bf616a;">set_margin_end</span><span>(</span><span style="color:#d08770;">12</span><span>)
</span><span>    
</span><span>    label = Gtk.</span><span style="color:#bf616a;">Label</span><span>(</span><span style="color:#bf616a;">label</span><span>=&quot;</span><span style="color:#a3be8c;">Title</span><span>&quot;)
</span><span>    label.</span><span style="color:#bf616a;">add_css_class</span><span>(&quot;</span><span style="color:#a3be8c;">title-1</span><span>&quot;)
</span><span>    vbox.</span><span style="color:#bf616a;">append</span><span>(label)
</span><span>    
</span><span>    entry = Gtk.</span><span style="color:#bf616a;">Entry</span><span>()
</span><span>    entry.</span><span style="color:#bf616a;">set_placeholder_text</span><span>(&quot;</span><span style="color:#a3be8c;">Enter text...</span><span>&quot;)
</span><span>    vbox.</span><span style="color:#bf616a;">append</span><span>(entry)
</span><span>    
</span><span>    button = Gtk.</span><span style="color:#bf616a;">Button</span><span>(</span><span style="color:#bf616a;">label</span><span>=&quot;</span><span style="color:#a3be8c;">Submit</span><span>&quot;)
</span><span>    button.</span><span style="color:#bf616a;">add_css_class</span><span>(&quot;</span><span style="color:#a3be8c;">suggested-action</span><span>&quot;)
</span><span>    vbox.</span><span style="color:#bf616a;">append</span><span>(button)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">return </span><span>vbox
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_horizontal_box</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create a horizontal box layout.&quot;&quot;&quot;
</span><span>    hbox = Gtk.</span><span style="color:#bf616a;">Box</span><span>(</span><span style="color:#bf616a;">orientation</span><span>=Gtk.Orientation.</span><span style="color:#bf616a;">HORIZONTAL</span><span>, </span><span style="color:#bf616a;">spacing</span><span>=</span><span style="color:#d08770;">6</span><span>)
</span><span>    hbox.</span><span style="color:#bf616a;">set_homogeneous</span><span>(</span><span style="color:#d08770;">True</span><span>)  </span><span style="color:#65737e;"># Equal width children
</span><span>    
</span><span>    </span><span style="color:#b48ead;">for </span><span>i </span><span style="color:#b48ead;">in </span><span style="color:#96b5b4;">range</span><span>(</span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">4</span><span>):
</span><span>        button = Gtk.</span><span style="color:#bf616a;">Button</span><span>(</span><span style="color:#bf616a;">label</span><span>=</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">Button </span><span>{i}&quot;)
</span><span>        hbox.</span><span style="color:#bf616a;">append</span><span>(button)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">return </span><span>hbox
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_grid</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create a grid layout.&quot;&quot;&quot;
</span><span>    grid = Gtk.</span><span style="color:#bf616a;">Grid</span><span>()
</span><span>    grid.</span><span style="color:#bf616a;">set_row_spacing</span><span>(</span><span style="color:#d08770;">12</span><span>)
</span><span>    grid.</span><span style="color:#bf616a;">set_column_spacing</span><span>(</span><span style="color:#d08770;">12</span><span>)
</span><span>    grid.</span><span style="color:#bf616a;">set_margin_top</span><span>(</span><span style="color:#d08770;">12</span><span>)
</span><span>    grid.</span><span style="color:#bf616a;">set_margin_bottom</span><span>(</span><span style="color:#d08770;">12</span><span>)
</span><span>    grid.</span><span style="color:#bf616a;">set_margin_start</span><span>(</span><span style="color:#d08770;">12</span><span>)
</span><span>    grid.</span><span style="color:#bf616a;">set_margin_end</span><span>(</span><span style="color:#d08770;">12</span><span>)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Labels in first column
</span><span>    name_label = Gtk.</span><span style="color:#bf616a;">Label</span><span>(</span><span style="color:#bf616a;">label</span><span>=&quot;</span><span style="color:#a3be8c;">Name:</span><span>&quot;)
</span><span>    name_label.</span><span style="color:#bf616a;">set_xalign</span><span>(</span><span style="color:#d08770;">1.0</span><span>)
</span><span>    grid.</span><span style="color:#bf616a;">attach</span><span>(name_label, </span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">1</span><span>)
</span><span>    
</span><span>    email_label = Gtk.</span><span style="color:#bf616a;">Label</span><span>(</span><span style="color:#bf616a;">label</span><span>=&quot;</span><span style="color:#a3be8c;">Email:</span><span>&quot;)
</span><span>    email_label.</span><span style="color:#bf616a;">set_xalign</span><span>(</span><span style="color:#d08770;">1.0</span><span>)
</span><span>    grid.</span><span style="color:#bf616a;">attach</span><span>(email_label, </span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">1</span><span>)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Entries in second column
</span><span>    name_entry = Gtk.</span><span style="color:#bf616a;">Entry</span><span>()
</span><span>    name_entry.</span><span style="color:#bf616a;">set_hexpand</span><span>(</span><span style="color:#d08770;">True</span><span>)
</span><span>    grid.</span><span style="color:#bf616a;">attach</span><span>(name_entry, </span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">1</span><span>)
</span><span>    
</span><span>    email_entry = Gtk.</span><span style="color:#bf616a;">Entry</span><span>()
</span><span>    email_entry.</span><span style="color:#bf616a;">set_hexpand</span><span>(</span><span style="color:#d08770;">True</span><span>)
</span><span>    grid.</span><span style="color:#bf616a;">attach</span><span>(email_entry, </span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">1</span><span>)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Button spanning both columns
</span><span>    button = Gtk.</span><span style="color:#bf616a;">Button</span><span>(</span><span style="color:#bf616a;">label</span><span>=&quot;</span><span style="color:#a3be8c;">Submit</span><span>&quot;)
</span><span>    button.</span><span style="color:#bf616a;">add_css_class</span><span>(&quot;</span><span style="color:#a3be8c;">suggested-action</span><span>&quot;)
</span><span>    grid.</span><span style="color:#bf616a;">attach</span><span>(button, </span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">2</span><span>, </span><span style="color:#d08770;">2</span><span>, </span><span style="color:#d08770;">1</span><span>)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">return </span><span>grid
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_center_box</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create a center box layout.&quot;&quot;&quot;
</span><span>    center_box = Gtk.</span><span style="color:#bf616a;">CenterBox</span><span>()
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Start
</span><span>    back_button = Gtk.Button.</span><span style="color:#bf616a;">new_from_icon_name</span><span>(&quot;</span><span style="color:#a3be8c;">go-previous-symbolic</span><span>&quot;)
</span><span>    center_box.</span><span style="color:#bf616a;">set_start_widget</span><span>(back_button)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Center
</span><span>    title = Gtk.</span><span style="color:#bf616a;">Label</span><span>(</span><span style="color:#bf616a;">label</span><span>=&quot;</span><span style="color:#a3be8c;">Page Title</span><span>&quot;)
</span><span>    title.</span><span style="color:#bf616a;">add_css_class</span><span>(&quot;</span><span style="color:#a3be8c;">title-3</span><span>&quot;)
</span><span>    center_box.</span><span style="color:#bf616a;">set_center_widget</span><span>(title)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># End
</span><span>    menu_button = Gtk.</span><span style="color:#bf616a;">MenuButton</span><span>()
</span><span>    menu_button.</span><span style="color:#bf616a;">set_icon_name</span><span>(&quot;</span><span style="color:#a3be8c;">open-menu-symbolic</span><span>&quot;)
</span><span>    center_box.</span><span style="color:#bf616a;">set_end_widget</span><span>(menu_button)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">return </span><span>center_box
</span></code></pre>
<h2 id="chapter-9-application-patterns">Chapter 9: Application Patterns</h2>
<h3 id="dialogs-and-alerts">Dialogs and Alerts</h3>
<p>Modern GNOME applications use <code>AdwAlertDialog</code> instead of traditional dialogs.</p>
<p><strong>Rust Example</strong>:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">use </span><span>adwaita::prelude::*;
</span><span style="color:#b48ead;">use </span><span>gtk::glib;
</span><span>
</span><span style="color:#65737e;">// Simple alert dialog
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">show_simple_alert</span><span>(</span><span style="color:#bf616a;">parent</span><span>: &amp;impl IsA&lt;gtk::Window&gt;) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> dialog = adwaita::AlertDialog::builder()
</span><span>        .</span><span style="color:#96b5b4;">heading</span><span>(&quot;</span><span style="color:#a3be8c;">Delete File?</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">body</span><span>(&quot;</span><span style="color:#a3be8c;">This action cannot be undone.</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>    
</span><span>    dialog.</span><span style="color:#96b5b4;">add_response</span><span>(&quot;</span><span style="color:#a3be8c;">cancel</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">Cancel</span><span>&quot;);
</span><span>    dialog.</span><span style="color:#96b5b4;">add_response</span><span>(&quot;</span><span style="color:#a3be8c;">delete</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">Delete</span><span>&quot;);
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Make delete button red/destructive
</span><span>    dialog.</span><span style="color:#96b5b4;">set_response_appearance</span><span>(&quot;</span><span style="color:#a3be8c;">delete</span><span>&quot;, adwaita::ResponseAppearance::Destructive);
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Set default response (activated by Enter)
</span><span>    dialog.</span><span style="color:#96b5b4;">set_default_response</span><span>(Some(&quot;</span><span style="color:#a3be8c;">cancel</span><span>&quot;));
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Set close response (activated by Escape)
</span><span>    dialog.</span><span style="color:#96b5b4;">set_close_response</span><span>(&quot;</span><span style="color:#a3be8c;">cancel</span><span>&quot;);
</span><span>    
</span><span>    dialog.</span><span style="color:#96b5b4;">choose</span><span>(
</span><span>        Some(parent),
</span><span>        None::&lt;&amp;gtk::gio::Cancellable&gt;,
</span><span>        |</span><span style="color:#bf616a;">response</span><span>| {
</span><span>            </span><span style="color:#b48ead;">if</span><span> response == &quot;</span><span style="color:#a3be8c;">delete</span><span>&quot; {
</span><span>                println!(&quot;</span><span style="color:#a3be8c;">File deleted</span><span>&quot;);
</span><span>            }
</span><span>        },
</span><span>    );
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Alert with extra child widget
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">show_alert_with_extra_content</span><span>(</span><span style="color:#bf616a;">parent</span><span>: &amp;impl IsA&lt;gtk::Window&gt;) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> checkbox = gtk::CheckButton::with_label(&quot;</span><span style="color:#a3be8c;">Don&#39;t ask again</span><span>&quot;);
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> dialog = adwaita::AlertDialog::builder()
</span><span>        .</span><span style="color:#96b5b4;">heading</span><span>(&quot;</span><span style="color:#a3be8c;">Clear History?</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">body</span><span>(&quot;</span><span style="color:#a3be8c;">All browsing history will be removed.</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">extra_child</span><span>(&amp;checkbox)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>    
</span><span>    dialog.</span><span style="color:#96b5b4;">add_response</span><span>(&quot;</span><span style="color:#a3be8c;">cancel</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">Cancel</span><span>&quot;);
</span><span>    dialog.</span><span style="color:#96b5b4;">add_response</span><span>(&quot;</span><span style="color:#a3be8c;">clear</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">Clear</span><span>&quot;);
</span><span>    dialog.</span><span style="color:#96b5b4;">set_response_appearance</span><span>(&quot;</span><span style="color:#a3be8c;">clear</span><span>&quot;, adwaita::ResponseAppearance::Destructive);
</span><span>    dialog.</span><span style="color:#96b5b4;">set_default_response</span><span>(Some(&quot;</span><span style="color:#a3be8c;">cancel</span><span>&quot;));
</span><span>    dialog.</span><span style="color:#96b5b4;">set_close_response</span><span>(&quot;</span><span style="color:#a3be8c;">cancel</span><span>&quot;);
</span><span>    
</span><span>    dialog.</span><span style="color:#96b5b4;">choose</span><span>(
</span><span>        Some(parent),
</span><span>        None::&lt;&amp;gtk::gio::Cancellable&gt;,
</span><span>        glib::clone!(
</span><span>            #[</span><span style="color:#bf616a;">weak</span><span>]
</span><span>            checkbox,
</span><span>            </span><span style="color:#b48ead;">move </span><span>|response| {
</span><span>                </span><span style="color:#b48ead;">if</span><span> response == &quot;</span><span style="color:#a3be8c;">clear</span><span>&quot; {
</span><span>                    </span><span style="color:#b48ead;">let</span><span> dont_ask = checkbox.</span><span style="color:#96b5b4;">is_active</span><span>();
</span><span>                    println!(&quot;</span><span style="color:#a3be8c;">Clear history (don&#39;t ask: </span><span style="color:#d08770;">{}</span><span style="color:#a3be8c;">)</span><span>&quot;, dont_ask);
</span><span>                }
</span><span>            }
</span><span>        ),
</span><span>    );
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Async dialog
</span><span>async </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">show_async_alert</span><span>(</span><span style="color:#bf616a;">parent</span><span>: gtk::Window) -&gt; String {
</span><span>    </span><span style="color:#b48ead;">let</span><span> dialog = adwaita::AlertDialog::builder()
</span><span>        .</span><span style="color:#96b5b4;">heading</span><span>(&quot;</span><span style="color:#a3be8c;">Save Changes?</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">body</span><span>(&quot;</span><span style="color:#a3be8c;">Your changes will be lost if you don&#39;t save them.</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>    
</span><span>    dialog.</span><span style="color:#96b5b4;">add_response</span><span>(&quot;</span><span style="color:#a3be8c;">discard</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">Discard</span><span>&quot;);
</span><span>    dialog.</span><span style="color:#96b5b4;">add_response</span><span>(&quot;</span><span style="color:#a3be8c;">cancel</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">Cancel</span><span>&quot;);
</span><span>    dialog.</span><span style="color:#96b5b4;">add_response</span><span>(&quot;</span><span style="color:#a3be8c;">save</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">Save</span><span>&quot;);
</span><span>    
</span><span>    dialog.</span><span style="color:#96b5b4;">set_response_appearance</span><span>(&quot;</span><span style="color:#a3be8c;">discard</span><span>&quot;, adwaita::ResponseAppearance::Destructive);
</span><span>    dialog.</span><span style="color:#96b5b4;">set_response_appearance</span><span>(&quot;</span><span style="color:#a3be8c;">save</span><span>&quot;, adwaita::ResponseAppearance::Suggested);
</span><span>    
</span><span>    dialog.</span><span style="color:#96b5b4;">set_default_response</span><span>(Some(&quot;</span><span style="color:#a3be8c;">save</span><span>&quot;));
</span><span>    dialog.</span><span style="color:#96b5b4;">set_close_response</span><span>(&quot;</span><span style="color:#a3be8c;">cancel</span><span>&quot;);
</span><span>    
</span><span>    dialog
</span><span>        .</span><span style="color:#96b5b4;">choose_future</span><span>(Some(&amp;parent))
</span><span>        .await
</span><span>        .</span><span style="color:#96b5b4;">unwrap_or</span><span>(&quot;</span><span style="color:#a3be8c;">cancel</span><span>&quot;.</span><span style="color:#96b5b4;">to_string</span><span>())
</span><span>}
</span></code></pre>
<p><strong>Python Example</strong>:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">show_simple_alert</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">parent</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Show a simple alert dialog.&quot;&quot;&quot;
</span><span>    dialog = Adw.</span><span style="color:#bf616a;">AlertDialog</span><span>(
</span><span>        </span><span style="color:#bf616a;">heading</span><span>=&quot;</span><span style="color:#a3be8c;">Delete File?</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">body</span><span>=&quot;</span><span style="color:#a3be8c;">This action cannot be undone.</span><span>&quot;
</span><span>    )
</span><span>    
</span><span>    dialog.</span><span style="color:#bf616a;">add_response</span><span>(&quot;</span><span style="color:#a3be8c;">cancel</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">Cancel</span><span>&quot;)
</span><span>    dialog.</span><span style="color:#bf616a;">add_response</span><span>(&quot;</span><span style="color:#a3be8c;">delete</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">Delete</span><span>&quot;)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Make delete button red/destructive
</span><span>    dialog.</span><span style="color:#bf616a;">set_response_appearance</span><span>(&quot;</span><span style="color:#a3be8c;">delete</span><span>&quot;, Adw.ResponseAppearance.</span><span style="color:#bf616a;">DESTRUCTIVE</span><span>)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Set default response (activated by Enter)
</span><span>    dialog.</span><span style="color:#bf616a;">set_default_response</span><span>(&quot;</span><span style="color:#a3be8c;">cancel</span><span>&quot;)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Set close response (activated by Escape)
</span><span>    dialog.</span><span style="color:#bf616a;">set_close_response</span><span>(&quot;</span><span style="color:#a3be8c;">cancel</span><span>&quot;)
</span><span>    
</span><span>    dialog.</span><span style="color:#bf616a;">choose</span><span>(parent, </span><span style="color:#d08770;">None</span><span>, </span><span style="color:#bf616a;">self</span><span>.on_delete_response)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">on_delete_response</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">dialog</span><span>, </span><span style="color:#bf616a;">result</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Handle delete dialog response.&quot;&quot;&quot;
</span><span>    </span><span style="color:#b48ead;">try</span><span>:
</span><span>        response = dialog.</span><span style="color:#bf616a;">choose_finish</span><span>(result)
</span><span>        </span><span style="color:#b48ead;">if </span><span>response == &quot;</span><span style="color:#a3be8c;">delete</span><span>&quot;:
</span><span>            </span><span style="color:#96b5b4;">print</span><span>(&quot;</span><span style="color:#a3be8c;">File deleted</span><span>&quot;)
</span><span>    </span><span style="color:#b48ead;">except </span><span>Exception </span><span style="color:#b48ead;">as </span><span>e:
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">Error: </span><span>{e}&quot;)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">show_alert_with_extra_content</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">parent</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Show alert with extra content.&quot;&quot;&quot;
</span><span>    checkbox = Gtk.</span><span style="color:#bf616a;">CheckButton</span><span>(</span><span style="color:#bf616a;">label</span><span>=&quot;</span><span style="color:#a3be8c;">Don&#39;t ask again</span><span>&quot;)
</span><span>    
</span><span>    dialog = Adw.</span><span style="color:#bf616a;">AlertDialog</span><span>(
</span><span>        </span><span style="color:#bf616a;">heading</span><span>=&quot;</span><span style="color:#a3be8c;">Clear History?</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">body</span><span>=&quot;</span><span style="color:#a3be8c;">All browsing history will be removed.</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">extra_child</span><span>=checkbox
</span><span>    )
</span><span>    
</span><span>    dialog.</span><span style="color:#bf616a;">add_response</span><span>(&quot;</span><span style="color:#a3be8c;">cancel</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">Cancel</span><span>&quot;)
</span><span>    dialog.</span><span style="color:#bf616a;">add_response</span><span>(&quot;</span><span style="color:#a3be8c;">clear</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">Clear</span><span>&quot;)
</span><span>    dialog.</span><span style="color:#bf616a;">set_response_appearance</span><span>(&quot;</span><span style="color:#a3be8c;">clear</span><span>&quot;, Adw.ResponseAppearance.</span><span style="color:#bf616a;">DESTRUCTIVE</span><span>)
</span><span>    dialog.</span><span style="color:#bf616a;">set_default_response</span><span>(&quot;</span><span style="color:#a3be8c;">cancel</span><span>&quot;)
</span><span>    dialog.</span><span style="color:#bf616a;">set_close_response</span><span>(&quot;</span><span style="color:#a3be8c;">cancel</span><span>&quot;)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Store checkbox reference for callback
</span><span>    dialog.checkbox = checkbox
</span><span>    dialog.</span><span style="color:#bf616a;">choose</span><span>(parent, </span><span style="color:#d08770;">None</span><span>, </span><span style="color:#bf616a;">self</span><span>.on_clear_response)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">on_clear_response</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">dialog</span><span>, </span><span style="color:#bf616a;">result</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Handle clear history response.&quot;&quot;&quot;
</span><span>    </span><span style="color:#b48ead;">try</span><span>:
</span><span>        response = dialog.</span><span style="color:#bf616a;">choose_finish</span><span>(result)
</span><span>        </span><span style="color:#b48ead;">if </span><span>response == &quot;</span><span style="color:#a3be8c;">clear</span><span>&quot;:
</span><span>            dont_ask = dialog.checkbox.</span><span style="color:#bf616a;">get_active</span><span>()
</span><span>            </span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">Clear history (don&#39;t ask: </span><span>{dont_ask}</span><span style="color:#a3be8c;">)</span><span>&quot;)
</span><span>    </span><span style="color:#b48ead;">except </span><span>Exception </span><span style="color:#b48ead;">as </span><span>e:
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">Error: </span><span>{e}&quot;)
</span><span>
</span><span style="color:#b48ead;">async def </span><span style="color:#8fa1b3;">show_async_alert</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">parent</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Show alert dialog with async/await.&quot;&quot;&quot;
</span><span>    dialog = Adw.</span><span style="color:#bf616a;">AlertDialog</span><span>(
</span><span>        </span><span style="color:#bf616a;">heading</span><span>=&quot;</span><span style="color:#a3be8c;">Save Changes?</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">body</span><span>=&quot;</span><span style="color:#a3be8c;">Your changes will be lost if you don&#39;t save them.</span><span>&quot;
</span><span>    )
</span><span>    
</span><span>    dialog.</span><span style="color:#bf616a;">add_response</span><span>(&quot;</span><span style="color:#a3be8c;">discard</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">Discard</span><span>&quot;)
</span><span>    dialog.</span><span style="color:#bf616a;">add_response</span><span>(&quot;</span><span style="color:#a3be8c;">cancel</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">Cancel</span><span>&quot;)
</span><span>    dialog.</span><span style="color:#bf616a;">add_response</span><span>(&quot;</span><span style="color:#a3be8c;">save</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">Save</span><span>&quot;)
</span><span>    
</span><span>    dialog.</span><span style="color:#bf616a;">set_response_appearance</span><span>(&quot;</span><span style="color:#a3be8c;">discard</span><span>&quot;, Adw.ResponseAppearance.</span><span style="color:#bf616a;">DESTRUCTIVE</span><span>)
</span><span>    dialog.</span><span style="color:#bf616a;">set_response_appearance</span><span>(&quot;</span><span style="color:#a3be8c;">save</span><span>&quot;, Adw.ResponseAppearance.</span><span style="color:#bf616a;">SUGGESTED</span><span>)
</span><span>    
</span><span>    dialog.</span><span style="color:#bf616a;">set_default_response</span><span>(&quot;</span><span style="color:#a3be8c;">save</span><span>&quot;)
</span><span>    dialog.</span><span style="color:#bf616a;">set_close_response</span><span>(&quot;</span><span style="color:#a3be8c;">cancel</span><span>&quot;)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Note: Python async with GTK requires additional setup
</span><span>    </span><span style="color:#65737e;"># This is a simplified example
</span><span>    </span><span style="color:#b48ead;">return await </span><span>dialog.</span><span style="color:#bf616a;">choose_future</span><span>(parent)
</span></code></pre>
<h3 id="message-dialogs">Message Dialogs</h3>
<p>For displaying longer messages or information.</p>
<p><strong>Rust Example</strong>:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">show_message_dialog</span><span>(</span><span style="color:#bf616a;">parent</span><span>: &amp;impl IsA&lt;gtk::Window&gt;) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> dialog = adwaita::AlertDialog::builder()
</span><span>        .</span><span style="color:#96b5b4;">heading</span><span>(&quot;</span><span style="color:#a3be8c;">Welcome to the App</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">body</span><span>(
</span><span>            &quot;</span><span style="color:#a3be8c;">This application helps you manage your tasks efficiently.</span><span style="color:#96b5b4;">\n\n</span><span style="color:#a3be8c;">\
</span><span style="color:#a3be8c;">            Features:</span><span style="color:#96b5b4;">\n</span><span style="color:#a3be8c;">\
</span><span style="color:#a3be8c;">            • Create and organize tasks</span><span style="color:#96b5b4;">\n</span><span style="color:#a3be8c;">\
</span><span style="color:#a3be8c;">            • Set reminders</span><span style="color:#96b5b4;">\n</span><span style="color:#a3be8c;">\
</span><span style="color:#a3be8c;">            • Sync across devices</span><span style="color:#96b5b4;">\n\n</span><span style="color:#a3be8c;">\
</span><span style="color:#a3be8c;">            Get started by creating your first task!</span><span>&quot;
</span><span>        )
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>    
</span><span>    dialog.</span><span style="color:#96b5b4;">add_response</span><span>(&quot;</span><span style="color:#a3be8c;">ok</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">Get Started</span><span>&quot;);
</span><span>    dialog.</span><span style="color:#96b5b4;">set_response_appearance</span><span>(&quot;</span><span style="color:#a3be8c;">ok</span><span>&quot;, adwaita::ResponseAppearance::Suggested);
</span><span>    dialog.</span><span style="color:#96b5b4;">set_default_response</span><span>(Some(&quot;</span><span style="color:#a3be8c;">ok</span><span>&quot;));
</span><span>    
</span><span>    dialog.</span><span style="color:#96b5b4;">choose</span><span>(
</span><span>        Some(parent),
</span><span>        None::&lt;&amp;gtk::gio::Cancellable&gt;,
</span><span>        |_| {
</span><span>            </span><span style="color:#65737e;">// User clicked &quot;Get Started&quot;
</span><span>        },
</span><span>    );
</span><span>}
</span></code></pre>
<p><strong>Python Example</strong>:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">show_message_dialog</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">parent</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Show a message dialog with information.&quot;&quot;&quot;
</span><span>    dialog = Adw.</span><span style="color:#bf616a;">AlertDialog</span><span>(
</span><span>        </span><span style="color:#bf616a;">heading</span><span>=&quot;</span><span style="color:#a3be8c;">Welcome to the App</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">body</span><span>=&quot;</span><span style="color:#a3be8c;">This application helps you manage your tasks efficiently.</span><span style="color:#96b5b4;">\n\n</span><span>&quot;
</span><span>             &quot;</span><span style="color:#a3be8c;">Features:</span><span style="color:#96b5b4;">\n</span><span>&quot;
</span><span>             &quot;</span><span style="color:#a3be8c;">• Create and organize tasks</span><span style="color:#96b5b4;">\n</span><span>&quot;
</span><span>             &quot;</span><span style="color:#a3be8c;">• Set reminders</span><span style="color:#96b5b4;">\n</span><span>&quot;
</span><span>             &quot;</span><span style="color:#a3be8c;">• Sync across devices</span><span style="color:#96b5b4;">\n\n</span><span>&quot;
</span><span>             &quot;</span><span style="color:#a3be8c;">Get started by creating your first task!</span><span>&quot;
</span><span>    )
</span><span>    
</span><span>    dialog.</span><span style="color:#bf616a;">add_response</span><span>(&quot;</span><span style="color:#a3be8c;">ok</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">Get Started</span><span>&quot;)
</span><span>    dialog.</span><span style="color:#bf616a;">set_response_appearance</span><span>(&quot;</span><span style="color:#a3be8c;">ok</span><span>&quot;, Adw.ResponseAppearance.</span><span style="color:#bf616a;">SUGGESTED</span><span>)
</span><span>    dialog.</span><span style="color:#bf616a;">set_default_response</span><span>(&quot;</span><span style="color:#a3be8c;">ok</span><span>&quot;)
</span><span>    
</span><span>    dialog.</span><span style="color:#bf616a;">choose</span><span>(parent, </span><span style="color:#d08770;">None</span><span>, </span><span style="color:#b48ead;">lambda </span><span>*</span><span style="color:#bf616a;">args</span><span>: </span><span style="color:#d08770;">None</span><span>)
</span></code></pre>
<h3 id="file-choosers">File Choosers</h3>
<p><strong>Rust Example</strong>:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">use </span><span>gtk::gio;
</span><span>
</span><span style="color:#65737e;">// Open file dialog
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">show_open_file_dialog</span><span>(</span><span style="color:#bf616a;">parent</span><span>: &amp;impl IsA&lt;gtk::Window&gt;) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> dialog = gtk::FileDialog::new();
</span><span>    dialog.</span><span style="color:#96b5b4;">set_title</span><span>(&quot;</span><span style="color:#a3be8c;">Open File</span><span>&quot;);
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Set file filters
</span><span>    </span><span style="color:#b48ead;">let</span><span> filter = gtk::FileFilter::new();
</span><span>    filter.</span><span style="color:#96b5b4;">set_name</span><span>(Some(&quot;</span><span style="color:#a3be8c;">Text Files</span><span>&quot;));
</span><span>    filter.</span><span style="color:#96b5b4;">add_mime_type</span><span>(&quot;</span><span style="color:#a3be8c;">text/plain</span><span>&quot;);
</span><span>    filter.</span><span style="color:#96b5b4;">add_pattern</span><span>(&quot;</span><span style="color:#a3be8c;">*.txt</span><span>&quot;);
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> filters = gio::ListStore::new::&lt;gtk::FileFilter&gt;();
</span><span>    filters.</span><span style="color:#96b5b4;">append</span><span>(&amp;filter);
</span><span>    dialog.</span><span style="color:#96b5b4;">set_filters</span><span>(Some(&amp;filters));
</span><span>    
</span><span>    dialog.</span><span style="color:#96b5b4;">open</span><span>(
</span><span>        Some(parent),
</span><span>        None::&lt;&amp;gio::Cancellable&gt;,
</span><span>        |</span><span style="color:#bf616a;">result</span><span>| {
</span><span>            </span><span style="color:#b48ead;">if let </span><span>Ok(file) = result {
</span><span>                </span><span style="color:#b48ead;">let</span><span> path = file.</span><span style="color:#96b5b4;">path</span><span>().</span><span style="color:#96b5b4;">unwrap</span><span>();
</span><span>                println!(&quot;</span><span style="color:#a3be8c;">Selected: </span><span style="color:#d08770;">{:?}</span><span>&quot;, path);
</span><span>            }
</span><span>        },
</span><span>    );
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Save file dialog
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">show_save_file_dialog</span><span>(</span><span style="color:#bf616a;">parent</span><span>: &amp;impl IsA&lt;gtk::Window&gt;) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> dialog = gtk::FileDialog::new();
</span><span>    dialog.</span><span style="color:#96b5b4;">set_title</span><span>(&quot;</span><span style="color:#a3be8c;">Save File</span><span>&quot;);
</span><span>    dialog.</span><span style="color:#96b5b4;">set_initial_name</span><span>(Some(&quot;</span><span style="color:#a3be8c;">Untitled.txt</span><span>&quot;));
</span><span>    
</span><span>    dialog.</span><span style="color:#96b5b4;">save</span><span>(
</span><span>        Some(parent),
</span><span>        None::&lt;&amp;gio::Cancellable&gt;,
</span><span>        |</span><span style="color:#bf616a;">result</span><span>| {
</span><span>            </span><span style="color:#b48ead;">if let </span><span>Ok(file) = result {
</span><span>                </span><span style="color:#b48ead;">let</span><span> path = file.</span><span style="color:#96b5b4;">path</span><span>().</span><span style="color:#96b5b4;">unwrap</span><span>();
</span><span>                println!(&quot;</span><span style="color:#a3be8c;">Save to: </span><span style="color:#d08770;">{:?}</span><span>&quot;, path);
</span><span>            }
</span><span>        },
</span><span>    );
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Select folder dialog
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">show_select_folder_dialog</span><span>(</span><span style="color:#bf616a;">parent</span><span>: &amp;impl IsA&lt;gtk::Window&gt;) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> dialog = gtk::FileDialog::new();
</span><span>    dialog.</span><span style="color:#96b5b4;">set_title</span><span>(&quot;</span><span style="color:#a3be8c;">Select Folder</span><span>&quot;);
</span><span>    
</span><span>    dialog.</span><span style="color:#96b5b4;">select_folder</span><span>(
</span><span>        Some(parent),
</span><span>        None::&lt;&amp;gio::Cancellable&gt;,
</span><span>        |</span><span style="color:#bf616a;">result</span><span>| {
</span><span>            </span><span style="color:#b48ead;">if let </span><span>Ok(file) = result {
</span><span>                </span><span style="color:#b48ead;">let</span><span> path = file.</span><span style="color:#96b5b4;">path</span><span>().</span><span style="color:#96b5b4;">unwrap</span><span>();
</span><span>                println!(&quot;</span><span style="color:#a3be8c;">Selected folder: </span><span style="color:#d08770;">{:?}</span><span>&quot;, path);
</span><span>            }
</span><span>        },
</span><span>    );
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Multiple files selection
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">show_open_multiple_files_dialog</span><span>(</span><span style="color:#bf616a;">parent</span><span>: &amp;impl IsA&lt;gtk::Window&gt;) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> dialog = gtk::FileDialog::new();
</span><span>    dialog.</span><span style="color:#96b5b4;">set_title</span><span>(&quot;</span><span style="color:#a3be8c;">Select Files</span><span>&quot;);
</span><span>    
</span><span>    dialog.</span><span style="color:#96b5b4;">open_multiple</span><span>(
</span><span>        Some(parent),
</span><span>        None::&lt;&amp;gio::Cancellable&gt;,
</span><span>        |</span><span style="color:#bf616a;">result</span><span>| {
</span><span>            </span><span style="color:#b48ead;">if let </span><span>Ok(files) = result {
</span><span>                </span><span style="color:#b48ead;">for</span><span> i in </span><span style="color:#d08770;">0</span><span>..files.</span><span style="color:#96b5b4;">n_items</span><span>() {
</span><span>                    </span><span style="color:#b48ead;">if let </span><span>Some(file) = files.</span><span style="color:#96b5b4;">item</span><span>(i).and_downcast::&lt;gio::File&gt;() {
</span><span>                        println!(&quot;</span><span style="color:#a3be8c;">Selected: </span><span style="color:#d08770;">{:?}</span><span>&quot;, file.</span><span style="color:#96b5b4;">path</span><span>());
</span><span>                    }
</span><span>                }
</span><span>            }
</span><span>        },
</span><span>    );
</span><span>}
</span></code></pre>
<p><strong>Python Example</strong>:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">show_open_file_dialog</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">parent</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Show open file dialog.&quot;&quot;&quot;
</span><span>    dialog = Gtk.</span><span style="color:#bf616a;">FileDialog</span><span>(</span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Open File</span><span>&quot;)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Set file filters
</span><span>    filter_text = Gtk.</span><span style="color:#bf616a;">FileFilter</span><span>()
</span><span>    filter_text.</span><span style="color:#bf616a;">set_name</span><span>(&quot;</span><span style="color:#a3be8c;">Text Files</span><span>&quot;)
</span><span>    filter_text.</span><span style="color:#bf616a;">add_mime_type</span><span>(&quot;</span><span style="color:#a3be8c;">text/plain</span><span>&quot;)
</span><span>    filter_text.</span><span style="color:#bf616a;">add_pattern</span><span>(&quot;</span><span style="color:#a3be8c;">*.txt</span><span>&quot;)
</span><span>    
</span><span>    filters = Gio.ListStore.</span><span style="color:#bf616a;">new</span><span>(Gtk.FileFilter)
</span><span>    filters.</span><span style="color:#bf616a;">append</span><span>(filter_text)
</span><span>    dialog.</span><span style="color:#bf616a;">set_filters</span><span>(filters)
</span><span>    
</span><span>    dialog.</span><span style="color:#bf616a;">open</span><span>(parent, </span><span style="color:#d08770;">None</span><span>, </span><span style="color:#bf616a;">self</span><span>.on_open_file_response)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">on_open_file_response</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">dialog</span><span>, </span><span style="color:#bf616a;">result</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Handle open file response.&quot;&quot;&quot;
</span><span>    </span><span style="color:#b48ead;">try</span><span>:
</span><span>        file = dialog.</span><span style="color:#bf616a;">open_finish</span><span>(result)
</span><span>        </span><span style="color:#b48ead;">if </span><span>file:
</span><span>            path = file.</span><span style="color:#bf616a;">get_path</span><span>()
</span><span>            </span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">Selected: </span><span>{path}&quot;)
</span><span>    </span><span style="color:#b48ead;">except </span><span>Exception </span><span style="color:#b48ead;">as </span><span>e:
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">No file selected: </span><span>{e}&quot;)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">show_save_file_dialog</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">parent</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Show save file dialog.&quot;&quot;&quot;
</span><span>    dialog = Gtk.</span><span style="color:#bf616a;">FileDialog</span><span>(
</span><span>        </span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Save File</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">initial_name</span><span>=&quot;</span><span style="color:#a3be8c;">Untitled.txt</span><span>&quot;
</span><span>    )
</span><span>    
</span><span>    dialog.</span><span style="color:#bf616a;">save</span><span>(parent, </span><span style="color:#d08770;">None</span><span>, </span><span style="color:#bf616a;">self</span><span>.on_save_file_response)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">on_save_file_response</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">dialog</span><span>, </span><span style="color:#bf616a;">result</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Handle save file response.&quot;&quot;&quot;
</span><span>    </span><span style="color:#b48ead;">try</span><span>:
</span><span>        file = dialog.</span><span style="color:#bf616a;">save_finish</span><span>(result)
</span><span>        </span><span style="color:#b48ead;">if </span><span>file:
</span><span>            path = file.</span><span style="color:#bf616a;">get_path</span><span>()
</span><span>            </span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">Save to: </span><span>{path}&quot;)
</span><span>    </span><span style="color:#b48ead;">except </span><span>Exception </span><span style="color:#b48ead;">as </span><span>e:
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">Save cancelled: </span><span>{e}&quot;)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">show_select_folder_dialog</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">parent</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Show select folder dialog.&quot;&quot;&quot;
</span><span>    dialog = Gtk.</span><span style="color:#bf616a;">FileDialog</span><span>(</span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Select Folder</span><span>&quot;)
</span><span>    
</span><span>    dialog.</span><span style="color:#bf616a;">select_folder</span><span>(parent, </span><span style="color:#d08770;">None</span><span>, </span><span style="color:#bf616a;">self</span><span>.on_folder_selected)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">on_folder_selected</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">dialog</span><span>, </span><span style="color:#bf616a;">result</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Handle folder selection.&quot;&quot;&quot;
</span><span>    </span><span style="color:#b48ead;">try</span><span>:
</span><span>        file = dialog.</span><span style="color:#bf616a;">select_folder_finish</span><span>(result)
</span><span>        </span><span style="color:#b48ead;">if </span><span>file:
</span><span>            path = file.</span><span style="color:#bf616a;">get_path</span><span>()
</span><span>            </span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">Selected folder: </span><span>{path}&quot;)
</span><span>    </span><span style="color:#b48ead;">except </span><span>Exception </span><span style="color:#b48ead;">as </span><span>e:
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">No folder selected: </span><span>{e}&quot;)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">show_open_multiple_files_dialog</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">parent</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Show dialog to select multiple files.&quot;&quot;&quot;
</span><span>    dialog = Gtk.</span><span style="color:#bf616a;">FileDialog</span><span>(</span><span style="color:#bf616a;">title</span><span>=&quot;</span><span style="color:#a3be8c;">Select Files</span><span>&quot;)
</span><span>    
</span><span>    dialog.</span><span style="color:#bf616a;">open_multiple</span><span>(parent, </span><span style="color:#d08770;">None</span><span>, </span><span style="color:#bf616a;">self</span><span>.on_multiple_files_selected)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">on_multiple_files_selected</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">dialog</span><span>, </span><span style="color:#bf616a;">result</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Handle multiple files selection.&quot;&quot;&quot;
</span><span>    </span><span style="color:#b48ead;">try</span><span>:
</span><span>        files = dialog.</span><span style="color:#bf616a;">open_multiple_finish</span><span>(result)
</span><span>        </span><span style="color:#b48ead;">if </span><span>files:
</span><span>            </span><span style="color:#b48ead;">for </span><span>i </span><span style="color:#b48ead;">in </span><span style="color:#96b5b4;">range</span><span>(files.</span><span style="color:#bf616a;">get_n_items</span><span>()):
</span><span>                file = files.</span><span style="color:#bf616a;">get_item</span><span>(i)
</span><span>                </span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">Selected: </span><span>{file.</span><span style="color:#bf616a;">get_path</span><span>()}&quot;)
</span><span>    </span><span style="color:#b48ead;">except </span><span>Exception </span><span style="color:#b48ead;">as </span><span>e:
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">No files selected: </span><span>{e}&quot;)
</span></code></pre>
<h3 id="application-menu">Application Menu</h3>
<p><strong>Rust Example</strong>:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">use </span><span>gtk::gio;
</span><span style="color:#b48ead;">use </span><span>gtk::glib;
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_menu_model</span><span>() -&gt; gio::Menu {
</span><span>    </span><span style="color:#b48ead;">let</span><span> menu = gio::Menu::new();
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Add menu items
</span><span>    menu.</span><span style="color:#96b5b4;">append</span><span>(Some(&quot;</span><span style="color:#a3be8c;">New Window</span><span>&quot;), Some(&quot;</span><span style="color:#a3be8c;">app.new-window</span><span>&quot;));
</span><span>    menu.</span><span style="color:#96b5b4;">append</span><span>(Some(&quot;</span><span style="color:#a3be8c;">Preferences</span><span>&quot;), Some(&quot;</span><span style="color:#a3be8c;">app.preferences</span><span>&quot;));
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Add submenu
</span><span>    </span><span style="color:#b48ead;">let</span><span> help_menu = gio::Menu::new();
</span><span>    help_menu.</span><span style="color:#96b5b4;">append</span><span>(Some(&quot;</span><span style="color:#a3be8c;">Keyboard Shortcuts</span><span>&quot;), Some(&quot;</span><span style="color:#a3be8c;">win.show-help-overlay</span><span>&quot;));
</span><span>    help_menu.</span><span style="color:#96b5b4;">append</span><span>(Some(&quot;</span><span style="color:#a3be8c;">About</span><span>&quot;), Some(&quot;</span><span style="color:#a3be8c;">app.about</span><span>&quot;));
</span><span>    
</span><span>    menu.</span><span style="color:#96b5b4;">append_submenu</span><span>(Some(&quot;</span><span style="color:#a3be8c;">Help</span><span>&quot;), &amp;help_menu);
</span><span>    
</span><span>    menu.</span><span style="color:#96b5b4;">append</span><span>(Some(&quot;</span><span style="color:#a3be8c;">Quit</span><span>&quot;), Some(&quot;</span><span style="color:#a3be8c;">app.quit</span><span>&quot;));
</span><span>    
</span><span>    menu
</span><span>}
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">setup_menu_button</span><span>(</span><span style="color:#bf616a;">header</span><span>: &amp;adwaita::HeaderBar) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> menu_model = </span><span style="color:#96b5b4;">create_menu_model</span><span>();
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> menu_button = gtk::MenuButton::new();
</span><span>    menu_button.</span><span style="color:#96b5b4;">set_icon_name</span><span>(&quot;</span><span style="color:#a3be8c;">open-menu-symbolic</span><span>&quot;);
</span><span>    menu_button.</span><span style="color:#96b5b4;">set_menu_model</span><span>(Some(&amp;menu_model));
</span><span>    menu_button.</span><span style="color:#96b5b4;">set_tooltip_text</span><span>(Some(&quot;</span><span style="color:#a3be8c;">Main Menu</span><span>&quot;));
</span><span>    
</span><span>    header.</span><span style="color:#96b5b4;">pack_end</span><span>(&amp;menu_button);
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Primary menu (alternative pattern)
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_primary_menu</span><span>() -&gt; gio::Menu {
</span><span>    </span><span style="color:#b48ead;">let</span><span> menu = gio::Menu::new();
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Section 1: New items
</span><span>    </span><span style="color:#b48ead;">let</span><span> section1 = gio::Menu::new();
</span><span>    section1.</span><span style="color:#96b5b4;">append</span><span>(Some(&quot;</span><span style="color:#a3be8c;">New Tab</span><span>&quot;), Some(&quot;</span><span style="color:#a3be8c;">app.new-tab</span><span>&quot;));
</span><span>    section1.</span><span style="color:#96b5b4;">append</span><span>(Some(&quot;</span><span style="color:#a3be8c;">New Window</span><span>&quot;), Some(&quot;</span><span style="color:#a3be8c;">app.new-window</span><span>&quot;));
</span><span>    menu.</span><span style="color:#96b5b4;">append_section</span><span>(None, &amp;section1);
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Section 2: Settings
</span><span>    </span><span style="color:#b48ead;">let</span><span> section2 = gio::Menu::new();
</span><span>    section2.</span><span style="color:#96b5b4;">append</span><span>(Some(&quot;</span><span style="color:#a3be8c;">Preferences</span><span>&quot;), Some(&quot;</span><span style="color:#a3be8c;">app.preferences</span><span>&quot;));
</span><span>    menu.</span><span style="color:#96b5b4;">append_section</span><span>(None, &amp;section2);
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Section 3: Help
</span><span>    </span><span style="color:#b48ead;">let</span><span> section3 = gio::Menu::new();
</span><span>    section3.</span><span style="color:#96b5b4;">append</span><span>(Some(&quot;</span><span style="color:#a3be8c;">Keyboard Shortcuts</span><span>&quot;), Some(&quot;</span><span style="color:#a3be8c;">win.show-help-overlay</span><span>&quot;));
</span><span>    section3.</span><span style="color:#96b5b4;">append</span><span>(Some(&quot;</span><span style="color:#a3be8c;">About</span><span>&quot;), Some(&quot;</span><span style="color:#a3be8c;">app.about</span><span>&quot;));
</span><span>    menu.</span><span style="color:#96b5b4;">append_section</span><span>(None, &amp;section3);
</span><span>    
</span><span>    menu
</span><span>}
</span></code></pre>
<p><strong>Python Example</strong>:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_menu_model</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create application menu model.&quot;&quot;&quot;
</span><span>    menu = Gio.</span><span style="color:#bf616a;">Menu</span><span>()
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Add menu items
</span><span>    menu.</span><span style="color:#bf616a;">append</span><span>(&quot;</span><span style="color:#a3be8c;">New Window</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">app.new-window</span><span>&quot;)
</span><span>    menu.</span><span style="color:#bf616a;">append</span><span>(&quot;</span><span style="color:#a3be8c;">Preferences</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">app.preferences</span><span>&quot;)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Add submenu
</span><span>    help_menu = Gio.</span><span style="color:#bf616a;">Menu</span><span>()
</span><span>    help_menu.</span><span style="color:#bf616a;">append</span><span>(&quot;</span><span style="color:#a3be8c;">Keyboard Shortcuts</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">win.show-help-overlay</span><span>&quot;)
</span><span>    help_menu.</span><span style="color:#bf616a;">append</span><span>(&quot;</span><span style="color:#a3be8c;">About</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">app.about</span><span>&quot;)
</span><span>    
</span><span>    menu.</span><span style="color:#bf616a;">append_submenu</span><span>(&quot;</span><span style="color:#a3be8c;">Help</span><span>&quot;, help_menu)
</span><span>    
</span><span>    menu.</span><span style="color:#bf616a;">append</span><span>(&quot;</span><span style="color:#a3be8c;">Quit</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">app.quit</span><span>&quot;)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">return </span><span>menu
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">setup_menu_button</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">header</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Setup menu button in header bar.&quot;&quot;&quot;
</span><span>    menu_model = </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">create_menu_model</span><span>()
</span><span>    
</span><span>    menu_button = Gtk.</span><span style="color:#bf616a;">MenuButton</span><span>()
</span><span>    menu_button.</span><span style="color:#bf616a;">set_icon_name</span><span>(&quot;</span><span style="color:#a3be8c;">open-menu-symbolic</span><span>&quot;)
</span><span>    menu_button.</span><span style="color:#bf616a;">set_menu_model</span><span>(menu_model)
</span><span>    menu_button.</span><span style="color:#bf616a;">set_tooltip_text</span><span>(&quot;</span><span style="color:#a3be8c;">Main Menu</span><span>&quot;)
</span><span>    
</span><span>    header.</span><span style="color:#bf616a;">pack_end</span><span>(menu_button)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_primary_menu</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create primary menu with sections.&quot;&quot;&quot;
</span><span>    menu = Gio.</span><span style="color:#bf616a;">Menu</span><span>()
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Section 1: New items
</span><span>    section1 = Gio.</span><span style="color:#bf616a;">Menu</span><span>()
</span><span>    section1.</span><span style="color:#bf616a;">append</span><span>(&quot;</span><span style="color:#a3be8c;">New Tab</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">app.new-tab</span><span>&quot;)
</span><span>    section1.</span><span style="color:#bf616a;">append</span><span>(&quot;</span><span style="color:#a3be8c;">New Window</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">app.new-window</span><span>&quot;)
</span><span>    menu.</span><span style="color:#bf616a;">append_section</span><span>(</span><span style="color:#d08770;">None</span><span>, section1)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Section 2: Settings
</span><span>    section2 = Gio.</span><span style="color:#bf616a;">Menu</span><span>()
</span><span>    section2.</span><span style="color:#bf616a;">append</span><span>(&quot;</span><span style="color:#a3be8c;">Preferences</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">app.preferences</span><span>&quot;)
</span><span>    menu.</span><span style="color:#bf616a;">append_section</span><span>(</span><span style="color:#d08770;">None</span><span>, section2)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Section 3: Help
</span><span>    section3 = Gio.</span><span style="color:#bf616a;">Menu</span><span>()
</span><span>    section3.</span><span style="color:#bf616a;">append</span><span>(&quot;</span><span style="color:#a3be8c;">Keyboard Shortcuts</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">win.show-help-overlay</span><span>&quot;)
</span><span>    section3.</span><span style="color:#bf616a;">append</span><span>(&quot;</span><span style="color:#a3be8c;">About</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">app.about</span><span>&quot;)
</span><span>    menu.</span><span style="color:#bf616a;">append_section</span><span>(</span><span style="color:#d08770;">None</span><span>, section3)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">return </span><span>menu
</span></code></pre>
<h3 id="search">Search</h3>
<p><strong>Rust Example</strong>:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">use </span><span>gtk::prelude::*;
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_search_bar</span><span>() -&gt; (gtk::SearchBar, gtk::SearchEntry) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> search_bar = gtk::SearchBar::new();
</span><span>    </span><span style="color:#b48ead;">let</span><span> search_entry = gtk::SearchEntry::new();
</span><span>    
</span><span>    search_bar.</span><span style="color:#96b5b4;">set_child</span><span>(Some(&amp;search_entry));
</span><span>    search_bar.</span><span style="color:#96b5b4;">set_show_close_button</span><span>(</span><span style="color:#d08770;">true</span><span>);
</span><span>    search_bar.</span><span style="color:#96b5b4;">connect_entry</span><span>(&amp;search_entry);
</span><span>    
</span><span>    (search_bar, search_entry)
</span><span>}
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">setup_search_in_window</span><span>(</span><span style="color:#bf616a;">window</span><span>: &amp;adwaita::ApplicationWindow) {
</span><span>    </span><span style="color:#b48ead;">let </span><span>(search_bar, search_entry) = </span><span style="color:#96b5b4;">create_search_bar</span><span>();
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Create toggle button in header
</span><span>    </span><span style="color:#b48ead;">let</span><span> search_button = gtk::ToggleButton::new();
</span><span>    search_button.</span><span style="color:#96b5b4;">set_icon_name</span><span>(&quot;</span><span style="color:#a3be8c;">system-search-symbolic</span><span>&quot;);
</span><span>    search_button.</span><span style="color:#96b5b4;">set_tooltip_text</span><span>(Some(&quot;</span><span style="color:#a3be8c;">Search</span><span>&quot;));
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Bind button to search bar
</span><span>    search_button
</span><span>        .</span><span style="color:#96b5b4;">bind_property</span><span>(&quot;</span><span style="color:#a3be8c;">active</span><span>&quot;, &amp;search_bar, &quot;</span><span style="color:#a3be8c;">search-mode-enabled</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">flags</span><span>(glib::BindingFlags::</span><span style="color:#d08770;">BIDIRECTIONAL </span><span>| glib::BindingFlags::</span><span style="color:#d08770;">SYNC_CREATE</span><span>)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Connect search entry
</span><span>    search_entry.</span><span style="color:#96b5b4;">connect_search_changed</span><span>(|</span><span style="color:#bf616a;">entry</span><span>| {
</span><span>        </span><span style="color:#b48ead;">let</span><span> text = entry.</span><span style="color:#96b5b4;">text</span><span>();
</span><span>        println!(&quot;</span><span style="color:#a3be8c;">Search: </span><span style="color:#d08770;">{}</span><span>&quot;, text);
</span><span>        </span><span style="color:#65737e;">// Perform search here
</span><span>    });
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Keyboard shortcut
</span><span>    </span><span style="color:#b48ead;">let</span><span> search_action = gtk::gio::SimpleAction::new(&quot;</span><span style="color:#a3be8c;">search</span><span>&quot;, None);
</span><span>    search_action.</span><span style="color:#96b5b4;">connect_activate</span><span>(glib::clone!(
</span><span>        #[</span><span style="color:#bf616a;">weak</span><span>]
</span><span>        search_bar,
</span><span>        </span><span style="color:#b48ead;">move </span><span>|_, _| {
</span><span>            </span><span style="color:#b48ead;">let</span><span> mode = search_bar.</span><span style="color:#96b5b4;">is_search_mode</span><span>();
</span><span>            search_bar.</span><span style="color:#96b5b4;">set_search_mode</span><span>(!mode);
</span><span>        }
</span><span>    ));
</span><span>    window.</span><span style="color:#96b5b4;">add_action</span><span>(&amp;search_action);
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Search with popover
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_search_popover</span><span>() -&gt; gtk::Popover {
</span><span>    </span><span style="color:#b48ead;">let</span><span> search_entry = gtk::SearchEntry::new();
</span><span>    search_entry.</span><span style="color:#96b5b4;">set_placeholder_text</span><span>(Some(&quot;</span><span style="color:#a3be8c;">Search...</span><span>&quot;));
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> list = gtk::ListBox::new();
</span><span>    list.</span><span style="color:#96b5b4;">set_size_request</span><span>(</span><span style="color:#d08770;">300</span><span>, </span><span style="color:#d08770;">200</span><span>);
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> vbox = gtk::Box::new(gtk::Orientation::Vertical, </span><span style="color:#d08770;">6</span><span>);
</span><span>    vbox.</span><span style="color:#96b5b4;">set_margin_top</span><span>(</span><span style="color:#d08770;">6</span><span>);
</span><span>    vbox.</span><span style="color:#96b5b4;">set_margin_bottom</span><span>(</span><span style="color:#d08770;">6</span><span>);
</span><span>    vbox.</span><span style="color:#96b5b4;">set_margin_start</span><span>(</span><span style="color:#d08770;">6</span><span>);
</span><span>    vbox.</span><span style="color:#96b5b4;">set_margin_end</span><span>(</span><span style="color:#d08770;">6</span><span>);
</span><span>    vbox.</span><span style="color:#96b5b4;">append</span><span>(&amp;search_entry);
</span><span>    vbox.</span><span style="color:#96b5b4;">append</span><span>(&amp;list);
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> popover = gtk::Popover::new();
</span><span>    popover.</span><span style="color:#96b5b4;">set_child</span><span>(Some(&amp;vbox));
</span><span>    
</span><span>    search_entry.</span><span style="color:#96b5b4;">connect_search_changed</span><span>(glib::clone!(
</span><span>        #[</span><span style="color:#bf616a;">weak</span><span>]
</span><span>        list,
</span><span>        </span><span style="color:#b48ead;">move </span><span>|entry| {
</span><span>            </span><span style="color:#b48ead;">let</span><span> query = entry.</span><span style="color:#96b5b4;">text</span><span>();
</span><span>            </span><span style="color:#96b5b4;">update_search_results</span><span>(&amp;list, &amp;query);
</span><span>        }
</span><span>    ));
</span><span>    
</span><span>    popover
</span><span>}
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">update_search_results</span><span>(</span><span style="color:#bf616a;">list</span><span>: &amp;gtk::ListBox, </span><span style="color:#bf616a;">query</span><span>: &amp;</span><span style="color:#b48ead;">str</span><span>) {
</span><span>    </span><span style="color:#65737e;">// Clear existing results
</span><span>    </span><span style="color:#b48ead;">while let </span><span>Some(child) = list.</span><span style="color:#96b5b4;">first_child</span><span>() {
</span><span>        list.</span><span style="color:#96b5b4;">remove</span><span>(&amp;child);
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Add new results
</span><span>    </span><span style="color:#b48ead;">if </span><span>!query.</span><span style="color:#96b5b4;">is_empty</span><span>() {
</span><span>        </span><span style="color:#b48ead;">for</span><span> i in </span><span style="color:#d08770;">1</span><span>..=</span><span style="color:#d08770;">5 </span><span>{
</span><span>            </span><span style="color:#b48ead;">let</span><span> label = gtk::Label::new(Some(&amp;format!(&quot;</span><span style="color:#a3be8c;">Result </span><span style="color:#d08770;">{}</span><span style="color:#a3be8c;"> for &#39;</span><span style="color:#d08770;">{}</span><span style="color:#a3be8c;">&#39;</span><span>&quot;, i, query)));
</span><span>            label.</span><span style="color:#96b5b4;">set_xalign</span><span>(</span><span style="color:#d08770;">0.0</span><span>);
</span><span>            list.</span><span style="color:#96b5b4;">append</span><span>(&amp;label);
</span><span>        }
</span><span>    }
</span><span>}
</span></code></pre>
<p><strong>Python Example</strong>:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_search_bar</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create search bar with entry.&quot;&quot;&quot;
</span><span>    </span><span style="color:#bf616a;">self</span><span>.search_bar = Gtk.</span><span style="color:#bf616a;">SearchBar</span><span>()
</span><span>    </span><span style="color:#bf616a;">self</span><span>.search_entry = Gtk.</span><span style="color:#bf616a;">SearchEntry</span><span>()
</span><span>    
</span><span>    </span><span style="color:#bf616a;">self</span><span>.search_bar.</span><span style="color:#bf616a;">set_child</span><span>(</span><span style="color:#bf616a;">self</span><span>.search_entry)
</span><span>    </span><span style="color:#bf616a;">self</span><span>.search_bar.</span><span style="color:#bf616a;">set_show_close_button</span><span>(</span><span style="color:#d08770;">True</span><span>)
</span><span>    </span><span style="color:#bf616a;">self</span><span>.search_bar.</span><span style="color:#bf616a;">connect_entry</span><span>(</span><span style="color:#bf616a;">self</span><span>.search_entry)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">self</span><span>.search_bar
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">setup_search_in_window</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">window</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Setup search functionality in window.&quot;&quot;&quot;
</span><span>    search_bar = </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">create_search_bar</span><span>()
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Create toggle button in header
</span><span>    search_button = Gtk.</span><span style="color:#bf616a;">ToggleButton</span><span>()
</span><span>    search_button.</span><span style="color:#bf616a;">set_icon_name</span><span>(&quot;</span><span style="color:#a3be8c;">system-search-symbolic</span><span>&quot;)
</span><span>    search_button.</span><span style="color:#bf616a;">set_tooltip_text</span><span>(&quot;</span><span style="color:#a3be8c;">Search</span><span>&quot;)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Bind button to search bar
</span><span>    search_button.</span><span style="color:#bf616a;">bind_property</span><span>(
</span><span>        &quot;</span><span style="color:#a3be8c;">active</span><span>&quot;, search_bar, &quot;</span><span style="color:#a3be8c;">search-mode-enabled</span><span>&quot;,
</span><span>        GObject.BindingFlags.</span><span style="color:#bf616a;">BIDIRECTIONAL </span><span>| GObject.BindingFlags.</span><span style="color:#bf616a;">SYNC_CREATE
</span><span>    )
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Connect search entry
</span><span>    </span><span style="color:#bf616a;">self</span><span>.search_entry.</span><span style="color:#bf616a;">connect</span><span>(&#39;</span><span style="color:#a3be8c;">search-changed</span><span>&#39;, </span><span style="color:#bf616a;">self</span><span>.on_search_changed)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Keyboard shortcut
</span><span>    search_action = Gio.SimpleAction.</span><span style="color:#bf616a;">new</span><span>(&quot;</span><span style="color:#a3be8c;">search</span><span>&quot;, </span><span style="color:#d08770;">None</span><span>)
</span><span>    search_action.</span><span style="color:#bf616a;">connect</span><span>(&#39;</span><span style="color:#a3be8c;">activate</span><span>&#39;, </span><span style="color:#bf616a;">self</span><span>.on_search_activated)
</span><span>    window.</span><span style="color:#bf616a;">add_action</span><span>(search_action)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">on_search_changed</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">entry</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Handle search text change.&quot;&quot;&quot;
</span><span>    text = entry.</span><span style="color:#bf616a;">get_text</span><span>()
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">Search: </span><span>{text}&quot;)
</span><span>    </span><span style="color:#65737e;"># Perform search here
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">on_search_activated</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">action</span><span>, </span><span style="color:#bf616a;">param</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Toggle search mode.&quot;&quot;&quot;
</span><span>    mode = </span><span style="color:#bf616a;">self</span><span>.search_bar.</span><span style="color:#bf616a;">get_search_mode</span><span>()
</span><span>    </span><span style="color:#bf616a;">self</span><span>.search_bar.</span><span style="color:#bf616a;">set_search_mode</span><span>(not mode)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_search_popover</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create search popover with results.&quot;&quot;&quot;
</span><span>    search_entry = Gtk.</span><span style="color:#bf616a;">SearchEntry</span><span>()
</span><span>    search_entry.</span><span style="color:#bf616a;">set_placeholder_text</span><span>(&quot;</span><span style="color:#a3be8c;">Search...</span><span>&quot;)
</span><span>    
</span><span>    </span><span style="color:#bf616a;">self</span><span>.search_list = Gtk.</span><span style="color:#bf616a;">ListBox</span><span>()
</span><span>    </span><span style="color:#bf616a;">self</span><span>.search_list.</span><span style="color:#bf616a;">set_size_request</span><span>(</span><span style="color:#d08770;">300</span><span>, </span><span style="color:#d08770;">200</span><span>)
</span><span>    
</span><span>    vbox = Gtk.</span><span style="color:#bf616a;">Box</span><span>(</span><span style="color:#bf616a;">orientation</span><span>=Gtk.Orientation.</span><span style="color:#bf616a;">VERTICAL</span><span>, </span><span style="color:#bf616a;">spacing</span><span>=</span><span style="color:#d08770;">6</span><span>)
</span><span>    vbox.</span><span style="color:#bf616a;">set_margin_top</span><span>(</span><span style="color:#d08770;">6</span><span>)
</span><span>    vbox.</span><span style="color:#bf616a;">set_margin_bottom</span><span>(</span><span style="color:#d08770;">6</span><span>)
</span><span>    vbox.</span><span style="color:#bf616a;">set_margin_start</span><span>(</span><span style="color:#d08770;">6</span><span>)
</span><span>    vbox.</span><span style="color:#bf616a;">set_margin_end</span><span>(</span><span style="color:#d08770;">6</span><span>)
</span><span>    vbox.</span><span style="color:#bf616a;">append</span><span>(search_entry)
</span><span>    vbox.</span><span style="color:#bf616a;">append</span><span>(</span><span style="color:#bf616a;">self</span><span>.search_list)
</span><span>    
</span><span>    popover = Gtk.</span><span style="color:#bf616a;">Popover</span><span>()
</span><span>    popover.</span><span style="color:#bf616a;">set_child</span><span>(vbox)
</span><span>    
</span><span>    search_entry.</span><span style="color:#bf616a;">connect</span><span>(&#39;</span><span style="color:#a3be8c;">search-changed</span><span>&#39;, </span><span style="color:#bf616a;">self</span><span>.on_popover_search_changed)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">return </span><span>popover
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">on_popover_search_changed</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">entry</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Handle search in popover.&quot;&quot;&quot;
</span><span>    query = entry.</span><span style="color:#bf616a;">get_text</span><span>()
</span><span>    </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">update_search_results</span><span>(query)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">update_search_results</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">query</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Update search results list.&quot;&quot;&quot;
</span><span>    </span><span style="color:#65737e;"># Clear existing results
</span><span>    child = </span><span style="color:#bf616a;">self</span><span>.search_list.</span><span style="color:#bf616a;">get_first_child</span><span>()
</span><span>    </span><span style="color:#b48ead;">while </span><span>child:
</span><span>        next_child = child.</span><span style="color:#bf616a;">get_next_sibling</span><span>()
</span><span>        </span><span style="color:#bf616a;">self</span><span>.search_list.</span><span style="color:#bf616a;">remove</span><span>(child)
</span><span>        child = next_child
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Add new results
</span><span>    </span><span style="color:#b48ead;">if </span><span>query:
</span><span>        </span><span style="color:#b48ead;">for </span><span>i </span><span style="color:#b48ead;">in </span><span style="color:#96b5b4;">range</span><span>(</span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">6</span><span>):
</span><span>            label = Gtk.</span><span style="color:#bf616a;">Label</span><span>(</span><span style="color:#bf616a;">label</span><span>=</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">Result </span><span>{i}</span><span style="color:#a3be8c;"> for &#39;</span><span>{query}</span><span style="color:#a3be8c;">&#39;</span><span>&quot;)
</span><span>            label.</span><span style="color:#bf616a;">set_xalign</span><span>(</span><span style="color:#d08770;">0.0</span><span>)
</span><span>            </span><span style="color:#bf616a;">self</span><span>.search_list.</span><span style="color:#bf616a;">append</span><span>(label)
</span></code></pre>
<h3 id="keyboard-shortcuts">Keyboard Shortcuts</h3>
<p><strong>Rust Example</strong>:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">use </span><span>gtk::prelude::*;
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">setup_keyboard_shortcuts</span><span>(</span><span style="color:#bf616a;">app</span><span>: &amp;adwaita::Application) {
</span><span>    </span><span style="color:#65737e;">// Set accelerators for actions
</span><span>    app.</span><span style="color:#96b5b4;">set_accels_for_action</span><span>(&quot;</span><span style="color:#a3be8c;">app.quit</span><span>&quot;, &amp;[&quot;</span><span style="color:#a3be8c;">&lt;Ctrl&gt;Q</span><span>&quot;]);
</span><span>    app.</span><span style="color:#96b5b4;">set_accels_for_action</span><span>(&quot;</span><span style="color:#a3be8c;">app.preferences</span><span>&quot;, &amp;[&quot;</span><span style="color:#a3be8c;">&lt;Ctrl&gt;comma</span><span>&quot;]);
</span><span>    app.</span><span style="color:#96b5b4;">set_accels_for_action</span><span>(&quot;</span><span style="color:#a3be8c;">app.about</span><span>&quot;, &amp;[&quot;</span><span style="color:#a3be8c;">&lt;Ctrl&gt;question</span><span>&quot;]);
</span><span>    app.</span><span style="color:#96b5b4;">set_accels_for_action</span><span>(&quot;</span><span style="color:#a3be8c;">win.close</span><span>&quot;, &amp;[&quot;</span><span style="color:#a3be8c;">&lt;Ctrl&gt;W</span><span>&quot;]);
</span><span>    app.</span><span style="color:#96b5b4;">set_accels_for_action</span><span>(&quot;</span><span style="color:#a3be8c;">win.search</span><span>&quot;, &amp;[&quot;</span><span style="color:#a3be8c;">&lt;Ctrl&gt;F</span><span>&quot;]);
</span><span>    app.</span><span style="color:#96b5b4;">set_accels_for_action</span><span>(&quot;</span><span style="color:#a3be8c;">win.new-tab</span><span>&quot;, &amp;[&quot;</span><span style="color:#a3be8c;">&lt;Ctrl&gt;T</span><span>&quot;]);
</span><span>    app.</span><span style="color:#96b5b4;">set_accels_for_action</span><span>(&quot;</span><span style="color:#a3be8c;">win.close-tab</span><span>&quot;, &amp;[&quot;</span><span style="color:#a3be8c;">&lt;Ctrl&gt;W</span><span>&quot;]);
</span><span>    app.</span><span style="color:#96b5b4;">set_accels_for_action</span><span>(&quot;</span><span style="color:#a3be8c;">win.next-tab</span><span>&quot;, &amp;[&quot;</span><span style="color:#a3be8c;">&lt;Ctrl&gt;Page_Down</span><span>&quot;]);
</span><span>    app.</span><span style="color:#96b5b4;">set_accels_for_action</span><span>(&quot;</span><span style="color:#a3be8c;">win.prev-tab</span><span>&quot;, &amp;[&quot;</span><span style="color:#a3be8c;">&lt;Ctrl&gt;Page_Up</span><span>&quot;]);
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Keyboard shortcuts help overlay
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_shortcuts_window</span><span>(</span><span style="color:#bf616a;">parent</span><span>: &amp;impl IsA&lt;gtk::Window&gt;) -&gt; gtk::ShortcutsWindow {
</span><span>    </span><span style="color:#b48ead;">let</span><span> shortcuts = gtk::ShortcutsWindow::new();
</span><span>    shortcuts.</span><span style="color:#96b5b4;">set_transient_for</span><span>(Some(parent));
</span><span>    shortcuts.</span><span style="color:#96b5b4;">set_modal</span><span>(</span><span style="color:#d08770;">true</span><span>);
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> section = gtk::ShortcutsSection::new();
</span><span>    section.</span><span style="color:#96b5b4;">set_visible</span><span>(</span><span style="color:#d08770;">true</span><span>);
</span><span>    
</span><span>    </span><span style="color:#65737e;">// General group
</span><span>    </span><span style="color:#b48ead;">let</span><span> general_group = gtk::ShortcutsGroup::new();
</span><span>    general_group.</span><span style="color:#96b5b4;">set_title</span><span>(&quot;</span><span style="color:#a3be8c;">General</span><span>&quot;);
</span><span>    general_group.</span><span style="color:#96b5b4;">set_visible</span><span>(</span><span style="color:#d08770;">true</span><span>);
</span><span>    
</span><span>    </span><span style="color:#96b5b4;">add_shortcut</span><span>(&amp;general_group, &quot;</span><span style="color:#a3be8c;">Search</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">&lt;Ctrl&gt;F</span><span>&quot;);
</span><span>    </span><span style="color:#96b5b4;">add_shortcut</span><span>(&amp;general_group, &quot;</span><span style="color:#a3be8c;">Preferences</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">&lt;Ctrl&gt;comma</span><span>&quot;);
</span><span>    </span><span style="color:#96b5b4;">add_shortcut</span><span>(&amp;general_group, &quot;</span><span style="color:#a3be8c;">Quit</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">&lt;Ctrl&gt;Q</span><span>&quot;);
</span><span>    
</span><span>    section.</span><span style="color:#96b5b4;">append</span><span>(&amp;general_group);
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Tabs group
</span><span>    </span><span style="color:#b48ead;">let</span><span> tabs_group = gtk::ShortcutsGroup::new();
</span><span>    tabs_group.</span><span style="color:#96b5b4;">set_title</span><span>(&quot;</span><span style="color:#a3be8c;">Tabs</span><span>&quot;);
</span><span>    tabs_group.</span><span style="color:#96b5b4;">set_visible</span><span>(</span><span style="color:#d08770;">true</span><span>);
</span><span>    
</span><span>    </span><span style="color:#96b5b4;">add_shortcut</span><span>(&amp;tabs_group, &quot;</span><span style="color:#a3be8c;">New Tab</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">&lt;Ctrl&gt;T</span><span>&quot;);
</span><span>    </span><span style="color:#96b5b4;">add_shortcut</span><span>(&amp;tabs_group, &quot;</span><span style="color:#a3be8c;">Close Tab</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">&lt;Ctrl&gt;W</span><span>&quot;);
</span><span>    </span><span style="color:#96b5b4;">add_shortcut</span><span>(&amp;tabs_group, &quot;</span><span style="color:#a3be8c;">Next Tab</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">&lt;Ctrl&gt;Page_Down</span><span>&quot;);
</span><span>    </span><span style="color:#96b5b4;">add_shortcut</span><span>(&amp;tabs_group, &quot;</span><span style="color:#a3be8c;">Previous Tab</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">&lt;Ctrl&gt;Page_Up</span><span>&quot;);
</span><span>    
</span><span>    section.</span><span style="color:#96b5b4;">append</span><span>(&amp;tabs_group);
</span><span>    
</span><span>    shortcuts.</span><span style="color:#96b5b4;">add</span><span>(&amp;section);
</span><span>    shortcuts
</span><span>}
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">add_shortcut</span><span>(</span><span style="color:#bf616a;">group</span><span>: &amp;gtk::ShortcutsGroup, </span><span style="color:#bf616a;">title</span><span>: &amp;</span><span style="color:#b48ead;">str</span><span>, </span><span style="color:#bf616a;">accelerator</span><span>: &amp;</span><span style="color:#b48ead;">str</span><span>) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> shortcut = gtk::ShortcutsShortcut::new();
</span><span>    shortcut.</span><span style="color:#96b5b4;">set_title</span><span>(title);
</span><span>    shortcut.</span><span style="color:#96b5b4;">set_accelerator</span><span>(accelerator);
</span><span>    shortcut.</span><span style="color:#96b5b4;">set_visible</span><span>(</span><span style="color:#d08770;">true</span><span>);
</span><span>    group.</span><span style="color:#96b5b4;">append</span><span>(&amp;shortcut);
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Event controller for custom shortcuts
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">setup_custom_key_handler</span><span>(</span><span style="color:#bf616a;">window</span><span>: &amp;impl IsA&lt;gtk::Widget&gt;) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> controller = gtk::EventControllerKey::new();
</span><span>    
</span><span>    controller.</span><span style="color:#96b5b4;">connect_key_pressed</span><span>(|_, </span><span style="color:#bf616a;">keyval</span><span>, _, </span><span style="color:#bf616a;">modifier</span><span>| {
</span><span>        </span><span style="color:#b48ead;">if</span><span> modifier == gtk::gdk::ModifierType::</span><span style="color:#d08770;">CONTROL_MASK </span><span>{
</span><span>            </span><span style="color:#b48ead;">match</span><span> keyval {
</span><span>                gtk::gdk::Key::s =&gt; {
</span><span>                    println!(&quot;</span><span style="color:#a3be8c;">Save</span><span>&quot;);
</span><span>                    </span><span style="color:#b48ead;">return </span><span>glib::Propagation::Stop;
</span><span>                }
</span><span>                gtk::gdk::Key::o =&gt; {
</span><span>                    println!(&quot;</span><span style="color:#a3be8c;">Open</span><span>&quot;);
</span><span>                    </span><span style="color:#b48ead;">return </span><span>glib::Propagation::Stop;
</span><span>                }
</span><span>                _ =&gt; {}
</span><span>            }
</span><span>        }
</span><span>        glib::Propagation::Proceed
</span><span>    });
</span><span>    
</span><span>    window.</span><span style="color:#96b5b4;">add_controller</span><span>(controller);
</span><span>}
</span></code></pre>
<p><strong>Python Example</strong>:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">setup_keyboard_shortcuts</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">app</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Setup keyboard shortcuts for application.&quot;&quot;&quot;
</span><span>    </span><span style="color:#65737e;"># Set accelerators for actions
</span><span>    app.</span><span style="color:#bf616a;">set_accels_for_action</span><span>(&quot;</span><span style="color:#a3be8c;">app.quit</span><span>&quot;, [&quot;</span><span style="color:#a3be8c;">&lt;Ctrl&gt;Q</span><span>&quot;])
</span><span>    app.</span><span style="color:#bf616a;">set_accels_for_action</span><span>(&quot;</span><span style="color:#a3be8c;">app.preferences</span><span>&quot;, [&quot;</span><span style="color:#a3be8c;">&lt;Ctrl&gt;comma</span><span>&quot;])
</span><span>    app.</span><span style="color:#bf616a;">set_accels_for_action</span><span>(&quot;</span><span style="color:#a3be8c;">app.about</span><span>&quot;, [&quot;</span><span style="color:#a3be8c;">&lt;Ctrl&gt;question</span><span>&quot;])
</span><span>    app.</span><span style="color:#bf616a;">set_accels_for_action</span><span>(&quot;</span><span style="color:#a3be8c;">win.close</span><span>&quot;, [&quot;</span><span style="color:#a3be8c;">&lt;Ctrl&gt;W</span><span>&quot;])
</span><span>    app.</span><span style="color:#bf616a;">set_accels_for_action</span><span>(&quot;</span><span style="color:#a3be8c;">win.search</span><span>&quot;, [&quot;</span><span style="color:#a3be8c;">&lt;Ctrl&gt;F</span><span>&quot;])
</span><span>    app.</span><span style="color:#bf616a;">set_accels_for_action</span><span>(&quot;</span><span style="color:#a3be8c;">win.new-tab</span><span>&quot;, [&quot;</span><span style="color:#a3be8c;">&lt;Ctrl&gt;T</span><span>&quot;])
</span><span>    app.</span><span style="color:#bf616a;">set_accels_for_action</span><span>(&quot;</span><span style="color:#a3be8c;">win.close-tab</span><span>&quot;, [&quot;</span><span style="color:#a3be8c;">&lt;Ctrl&gt;W</span><span>&quot;])
</span><span>    app.</span><span style="color:#bf616a;">set_accels_for_action</span><span>(&quot;</span><span style="color:#a3be8c;">win.next-tab</span><span>&quot;, [&quot;</span><span style="color:#a3be8c;">&lt;Ctrl&gt;Page_Down</span><span>&quot;])
</span><span>    app.</span><span style="color:#bf616a;">set_accels_for_action</span><span>(&quot;</span><span style="color:#a3be8c;">win.prev-tab</span><span>&quot;, [&quot;</span><span style="color:#a3be8c;">&lt;Ctrl&gt;Page_Up</span><span>&quot;])
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_shortcuts_window</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">parent</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Create keyboard shortcuts help overlay.&quot;&quot;&quot;
</span><span>    shortcuts = Gtk.</span><span style="color:#bf616a;">ShortcutsWindow</span><span>()
</span><span>    shortcuts.</span><span style="color:#bf616a;">set_transient_for</span><span>(parent)
</span><span>    shortcuts.</span><span style="color:#bf616a;">set_modal</span><span>(</span><span style="color:#d08770;">True</span><span>)
</span><span>    
</span><span>    section = Gtk.</span><span style="color:#bf616a;">ShortcutsSection</span><span>()
</span><span>    section.</span><span style="color:#bf616a;">set_visible</span><span>(</span><span style="color:#d08770;">True</span><span>)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># General group
</span><span>    general_group = Gtk.</span><span style="color:#bf616a;">ShortcutsGroup</span><span>()
</span><span>    general_group.</span><span style="color:#bf616a;">set_title</span><span>(&quot;</span><span style="color:#a3be8c;">General</span><span>&quot;)
</span><span>    general_group.</span><span style="color:#bf616a;">set_visible</span><span>(</span><span style="color:#d08770;">True</span><span>)
</span><span>    
</span><span>    </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">add_shortcut</span><span>(general_group, &quot;</span><span style="color:#a3be8c;">Search</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">&lt;Ctrl&gt;F</span><span>&quot;)
</span><span>    </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">add_shortcut</span><span>(general_group, &quot;</span><span style="color:#a3be8c;">Preferences</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">&lt;Ctrl&gt;comma</span><span>&quot;)
</span><span>    </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">add_shortcut</span><span>(general_group, &quot;</span><span style="color:#a3be8c;">Quit</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">&lt;Ctrl&gt;Q</span><span>&quot;)
</span><span>    
</span><span>    section.</span><span style="color:#bf616a;">append</span><span>(general_group)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Tabs group
</span><span>    tabs_group = Gtk.</span><span style="color:#bf616a;">ShortcutsGroup</span><span>()
</span><span>    tabs_group.</span><span style="color:#bf616a;">set_title</span><span>(&quot;</span><span style="color:#a3be8c;">Tabs</span><span>&quot;)
</span><span>    tabs_group.</span><span style="color:#bf616a;">set_visible</span><span>(</span><span style="color:#d08770;">True</span><span>)
</span><span>    
</span><span>    </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">add_shortcut</span><span>(tabs_group, &quot;</span><span style="color:#a3be8c;">New Tab</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">&lt;Ctrl&gt;T</span><span>&quot;)
</span><span>    </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">add_shortcut</span><span>(tabs_group, &quot;</span><span style="color:#a3be8c;">Close Tab</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">&lt;Ctrl&gt;W</span><span>&quot;)
</span><span>    </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">add_shortcut</span><span>(tabs_group, &quot;</span><span style="color:#a3be8c;">Next Tab</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">&lt;Ctrl&gt;Page_Down</span><span>&quot;)
</span><span>    </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">add_shortcut</span><span>(tabs_group, &quot;</span><span style="color:#a3be8c;">Previous Tab</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">&lt;Ctrl&gt;Page_Up</span><span>&quot;)
</span><span>    
</span><span>    section.</span><span style="color:#bf616a;">append</span><span>(tabs_group)
</span><span>    
</span><span>    shortcuts.</span><span style="color:#bf616a;">add</span><span>(section)
</span><span>    </span><span style="color:#b48ead;">return </span><span>shortcuts
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">add_shortcut</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">group</span><span>, </span><span style="color:#bf616a;">title</span><span>, </span><span style="color:#bf616a;">accelerator</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Add a shortcut to a group.&quot;&quot;&quot;
</span><span>    shortcut = Gtk.</span><span style="color:#bf616a;">ShortcutsShortcut</span><span>()
</span><span>    shortcut.</span><span style="color:#bf616a;">set_title</span><span>(title)
</span><span>    shortcut.</span><span style="color:#bf616a;">set_accelerator</span><span>(accelerator)
</span><span>    shortcut.</span><span style="color:#bf616a;">set_visible</span><span>(</span><span style="color:#d08770;">True</span><span>)
</span><span>    group.</span><span style="color:#bf616a;">append</span><span>(shortcut)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">setup_custom_key_handler</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">window</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Setup custom key handler for window.&quot;&quot;&quot;
</span><span>    controller = Gtk.</span><span style="color:#bf616a;">EventControllerKey</span><span>()
</span><span>    
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">on_key_pressed</span><span>(</span><span style="color:#bf616a;">controller</span><span>, </span><span style="color:#bf616a;">keyval</span><span>, </span><span style="color:#bf616a;">keycode</span><span>, </span><span style="color:#bf616a;">state</span><span>):
</span><span>        </span><span style="color:#b48ead;">if </span><span>state &amp; Gdk.ModifierType.</span><span style="color:#bf616a;">CONTROL_MASK</span><span>:
</span><span>            </span><span style="color:#b48ead;">if </span><span>keyval == Gdk.KEY_s:
</span><span>                </span><span style="color:#96b5b4;">print</span><span>(&quot;</span><span style="color:#a3be8c;">Save</span><span>&quot;)
</span><span>                </span><span style="color:#b48ead;">return </span><span style="color:#d08770;">True
</span><span>            </span><span style="color:#b48ead;">elif </span><span>keyval == Gdk.KEY_o:
</span><span>                </span><span style="color:#96b5b4;">print</span><span>(&quot;</span><span style="color:#a3be8c;">Open</span><span>&quot;)
</span><span>                </span><span style="color:#b48ead;">return </span><span style="color:#d08770;">True
</span><span>        </span><span style="color:#b48ead;">return </span><span style="color:#d08770;">False
</span><span>    
</span><span>    controller.</span><span style="color:#bf616a;">connect</span><span>(&#39;</span><span style="color:#a3be8c;">key-pressed</span><span>&#39;, on_key_pressed)
</span><span>    window.</span><span style="color:#bf616a;">add_controller</span><span>(controller)
</span></code></pre>
<h2 id="chapter-10-system-integration">Chapter 10: System Integration</h2>
<h3 id="d-bus-communication">D-Bus Communication</h3>
<p>D-Bus is the inter-process communication system used in GNOME.</p>
<p><strong>Rust Example</strong>:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">use </span><span>gtk::gio;
</span><span style="color:#b48ead;">use </span><span>gtk::glib;
</span><span style="color:#b48ead;">use </span><span>gtk::prelude::*;
</span><span>
</span><span style="color:#65737e;">// Send notification via D-Bus
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">send_notification</span><span>(</span><span style="color:#bf616a;">app_name</span><span>: &amp;</span><span style="color:#b48ead;">str</span><span>, </span><span style="color:#bf616a;">summary</span><span>: &amp;</span><span style="color:#b48ead;">str</span><span>, </span><span style="color:#bf616a;">body</span><span>: &amp;</span><span style="color:#b48ead;">str</span><span>) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> connection = gio::bus_get_sync(gio::BusType::Session, None::&lt;&amp;gio::Cancellable&gt;).</span><span style="color:#96b5b4;">unwrap</span><span>();
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> message = gio::DBusMessage::new_method_call(
</span><span>        Some(&quot;</span><span style="color:#a3be8c;">org.freedesktop.Notifications</span><span>&quot;),
</span><span>        &quot;</span><span style="color:#a3be8c;">/org/freedesktop/Notifications</span><span>&quot;,
</span><span>        Some(&quot;</span><span style="color:#a3be8c;">org.freedesktop.Notifications</span><span>&quot;),
</span><span>        &quot;</span><span style="color:#a3be8c;">Notify</span><span>&quot;,
</span><span>    );
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Build parameters
</span><span>    </span><span style="color:#b48ead;">let</span><span> app_name_v = glib::Variant::from(app_name);
</span><span>    </span><span style="color:#b48ead;">let</span><span> replaces_id_v = glib::Variant::from(</span><span style="color:#d08770;">0</span><span style="color:#b48ead;">u32</span><span>);
</span><span>    </span><span style="color:#b48ead;">let</span><span> icon_v = glib::Variant::from(&quot;&quot;);
</span><span>    </span><span style="color:#b48ead;">let</span><span> summary_v = glib::Variant::from(summary);
</span><span>    </span><span style="color:#b48ead;">let</span><span> body_v = glib::Variant::from(body);
</span><span>    </span><span style="color:#b48ead;">let</span><span> actions_v = glib::Variant::array_from_iter::&lt;String&gt;(vec![]);
</span><span>    </span><span style="color:#b48ead;">let</span><span> hints_v = glib::Variant::array_from_dict_entries::&lt;String, glib::Variant&gt;(None);
</span><span>    </span><span style="color:#b48ead;">let</span><span> timeout_v = glib::Variant::from(-</span><span style="color:#d08770;">1</span><span style="color:#b48ead;">i32</span><span>);
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> params = glib::Variant::tuple_from_iter(vec![
</span><span>        app_name_v,
</span><span>        replaces_id_v,
</span><span>        icon_v,
</span><span>        summary_v,
</span><span>        body_v,
</span><span>        actions_v,
</span><span>        hints_v,
</span><span>        timeout_v,
</span><span>    ]);
</span><span>    
</span><span>    message.</span><span style="color:#96b5b4;">set_body</span><span>(&amp;params);
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let </span><span>_ = connection.</span><span style="color:#96b5b4;">send_message</span><span>(
</span><span>        &amp;message,
</span><span>        gio::DBusSendMessageFlags::</span><span style="color:#d08770;">NONE</span><span>,
</span><span>        None,
</span><span>    );
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Listen to D-Bus signals
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">listen_to_dbus_signals</span><span>() {
</span><span>    </span><span style="color:#b48ead;">let</span><span> connection = gio::bus_get_sync(gio::BusType::Session, None::&lt;&amp;gio::Cancellable&gt;()).</span><span style="color:#96b5b4;">unwrap</span><span>();
</span><span>    
</span><span>    connection.</span><span style="color:#96b5b4;">signal_subscribe</span><span>(
</span><span>        Some(&quot;</span><span style="color:#a3be8c;">org.freedesktop.Notifications</span><span>&quot;),
</span><span>        Some(&quot;</span><span style="color:#a3be8c;">org.freedesktop.Notifications</span><span>&quot;),
</span><span>        Some(&quot;</span><span style="color:#a3be8c;">NotificationClosed</span><span>&quot;),
</span><span>        Some(&quot;</span><span style="color:#a3be8c;">/org/freedesktop/Notifications</span><span>&quot;),
</span><span>        None,
</span><span>        gio::DBusSignalFlags::</span><span style="color:#d08770;">NONE</span><span>,
</span><span>        |_, _, _, _, </span><span style="color:#bf616a;">signal</span><span>, </span><span style="color:#bf616a;">params</span><span>| {
</span><span>            </span><span style="color:#b48ead;">if let </span><span>Some(id) = params.</span><span style="color:#96b5b4;">and_then</span><span>(|</span><span style="color:#bf616a;">p</span><span>| p.</span><span style="color:#96b5b4;">child_value</span><span>(</span><span style="color:#d08770;">0</span><span>).get::&lt;</span><span style="color:#b48ead;">u32</span><span>&gt;()) {
</span><span>                println!(&quot;</span><span style="color:#a3be8c;">Notification </span><span style="color:#d08770;">{}</span><span style="color:#a3be8c;"> closed</span><span>&quot;, id);
</span><span>            }
</span><span>        },
</span><span>    );
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Call D-Bus method
</span><span>async </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">call_dbus_method</span><span>() -&gt; Result&lt;String, glib::Error&gt; {
</span><span>    </span><span style="color:#b48ead;">let</span><span> connection = gio::bus_get_future(gio::BusType::Session).await?;
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> result = connection
</span><span>        .</span><span style="color:#96b5b4;">call_future</span><span>(
</span><span>            Some(&quot;</span><span style="color:#a3be8c;">org.freedesktop.DBus</span><span>&quot;),
</span><span>            &quot;</span><span style="color:#a3be8c;">/org/freedesktop/DBus</span><span>&quot;,
</span><span>            Some(&quot;</span><span style="color:#a3be8c;">org.freedesktop.DBus</span><span>&quot;),
</span><span>            &quot;</span><span style="color:#a3be8c;">ListNames</span><span>&quot;,
</span><span>            None,
</span><span>            Some(&amp;glib::VariantTy::new(&quot;</span><span style="color:#a3be8c;">(as)</span><span>&quot;).</span><span style="color:#96b5b4;">unwrap</span><span>()),
</span><span>            gio::DBusCallFlags::</span><span style="color:#d08770;">NONE</span><span>,
</span><span>            -</span><span style="color:#d08770;">1</span><span>,
</span><span>        )
</span><span>        .await?;
</span><span>    
</span><span>    </span><span style="color:#b48ead;">if let </span><span>Some(names) = result.</span><span style="color:#96b5b4;">child_value</span><span>(</span><span style="color:#d08770;">0</span><span>).get::&lt;Vec&lt;String&gt;&gt;() {
</span><span>        Ok(format!(&quot;</span><span style="color:#a3be8c;">Found </span><span style="color:#d08770;">{}</span><span style="color:#a3be8c;"> services</span><span>&quot;, names.</span><span style="color:#96b5b4;">len</span><span>()))
</span><span>    } </span><span style="color:#b48ead;">else </span><span>{
</span><span>        Ok(&quot;</span><span style="color:#a3be8c;">No services found</span><span>&quot;.</span><span style="color:#96b5b4;">to_string</span><span>())
</span><span>    }
</span><span>}
</span></code></pre>
<p><strong>Python Example</strong>:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">send_notification</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">app_name</span><span>, </span><span style="color:#bf616a;">summary</span><span>, </span><span style="color:#bf616a;">body</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Send notification via D-Bus.&quot;&quot;&quot;
</span><span>    </span><span style="color:#b48ead;">try</span><span>:
</span><span>        connection = Gio.</span><span style="color:#bf616a;">bus_get_sync</span><span>(Gio.BusType.</span><span style="color:#bf616a;">SESSION</span><span>, </span><span style="color:#d08770;">None</span><span>)
</span><span>        
</span><span>        message = Gio.DBusMessage.</span><span style="color:#bf616a;">new_method_call</span><span>(
</span><span>            &quot;</span><span style="color:#a3be8c;">org.freedesktop.Notifications</span><span>&quot;,
</span><span>            &quot;</span><span style="color:#a3be8c;">/org/freedesktop/Notifications</span><span>&quot;,
</span><span>            &quot;</span><span style="color:#a3be8c;">org.freedesktop.Notifications</span><span>&quot;,
</span><span>            &quot;</span><span style="color:#a3be8c;">Notify</span><span>&quot;
</span><span>        )
</span><span>        
</span><span>        </span><span style="color:#65737e;"># Build parameters
</span><span>        params = GLib.</span><span style="color:#bf616a;">Variant</span><span>(&#39;</span><span style="color:#a3be8c;">(susssasa</span><span style="color:#d08770;">{sv}</span><span style="color:#a3be8c;">i)</span><span>&#39;, (
</span><span>            app_name,      </span><span style="color:#65737e;"># app_name
</span><span>            </span><span style="color:#d08770;">0</span><span>,             </span><span style="color:#65737e;"># replaces_id
</span><span>            &quot;&quot;,            </span><span style="color:#65737e;"># icon
</span><span>            summary,       </span><span style="color:#65737e;"># summary
</span><span>            body,          </span><span style="color:#65737e;"># body
</span><span>            [],            </span><span style="color:#65737e;"># actions
</span><span>            {},            </span><span style="color:#65737e;"># hints
</span><span>            -</span><span style="color:#d08770;">1             </span><span style="color:#65737e;"># timeout
</span><span>        ))
</span><span>        
</span><span>        message.</span><span style="color:#bf616a;">set_body</span><span>(params)
</span><span>        
</span><span>        connection.</span><span style="color:#bf616a;">send_message</span><span>(
</span><span>            message,
</span><span>            Gio.DBusSendMessageFlags.</span><span style="color:#bf616a;">NONE</span><span>,
</span><span>            </span><span style="color:#d08770;">None
</span><span>        )
</span><span>    </span><span style="color:#b48ead;">except </span><span>Exception </span><span style="color:#b48ead;">as </span><span>e:
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">Failed to send notification: </span><span>{e}&quot;)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">listen_to_dbus_signals</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Listen to D-Bus signals.&quot;&quot;&quot;
</span><span>    </span><span style="color:#b48ead;">try</span><span>:
</span><span>        connection = Gio.</span><span style="color:#bf616a;">bus_get_sync</span><span>(Gio.BusType.</span><span style="color:#bf616a;">SESSION</span><span>, </span><span style="color:#d08770;">None</span><span>)
</span><span>        
</span><span>        connection.</span><span style="color:#bf616a;">signal_subscribe</span><span>(
</span><span>            &quot;</span><span style="color:#a3be8c;">org.freedesktop.Notifications</span><span>&quot;,
</span><span>            &quot;</span><span style="color:#a3be8c;">org.freedesktop.Notifications</span><span>&quot;,
</span><span>            &quot;</span><span style="color:#a3be8c;">NotificationClosed</span><span>&quot;,
</span><span>            &quot;</span><span style="color:#a3be8c;">/org/freedesktop/Notifications</span><span>&quot;,
</span><span>            </span><span style="color:#d08770;">None</span><span>,
</span><span>            Gio.DBusSignalFlags.</span><span style="color:#bf616a;">NONE</span><span>,
</span><span>            </span><span style="color:#bf616a;">self</span><span>.on_notification_closed,
</span><span>            </span><span style="color:#d08770;">None
</span><span>        )
</span><span>    </span><span style="color:#b48ead;">except </span><span>Exception </span><span style="color:#b48ead;">as </span><span>e:
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">Failed to subscribe to signals: </span><span>{e}&quot;)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">on_notification_closed</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">connection</span><span>, </span><span style="color:#bf616a;">sender</span><span>, </span><span style="color:#bf616a;">object_path</span><span>, 
</span><span>                           </span><span style="color:#bf616a;">interface</span><span>, </span><span style="color:#bf616a;">signal</span><span>, </span><span style="color:#bf616a;">params</span><span>, </span><span style="color:#bf616a;">user_data</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Handle notification closed signal.&quot;&quot;&quot;
</span><span>    </span><span style="color:#b48ead;">if </span><span>params:
</span><span>        notification_id = params[</span><span style="color:#d08770;">0</span><span>]
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">Notification </span><span>{notification_id}</span><span style="color:#a3be8c;"> closed</span><span>&quot;)
</span><span>
</span><span style="color:#b48ead;">async def </span><span style="color:#8fa1b3;">call_dbus_method</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Call D-Bus method asynchronously.&quot;&quot;&quot;
</span><span>    </span><span style="color:#b48ead;">try</span><span>:
</span><span>        connection = </span><span style="color:#b48ead;">await </span><span>Gio.</span><span style="color:#bf616a;">bus_get_async</span><span>(Gio.BusType.</span><span style="color:#bf616a;">SESSION</span><span>, </span><span style="color:#d08770;">None</span><span>)
</span><span>        
</span><span>        result = </span><span style="color:#b48ead;">await </span><span>connection.</span><span style="color:#bf616a;">call_async</span><span>(
</span><span>            &quot;</span><span style="color:#a3be8c;">org.freedesktop.DBus</span><span>&quot;,
</span><span>            &quot;</span><span style="color:#a3be8c;">/org/freedesktop/DBus</span><span>&quot;,
</span><span>            &quot;</span><span style="color:#a3be8c;">org.freedesktop.DBus</span><span>&quot;,
</span><span>            &quot;</span><span style="color:#a3be8c;">ListNames</span><span>&quot;,
</span><span>            </span><span style="color:#d08770;">None</span><span>,
</span><span>            GLib.VariantType.</span><span style="color:#bf616a;">new</span><span>(&quot;</span><span style="color:#a3be8c;">(as)</span><span>&quot;),
</span><span>            Gio.DBusCallFlags.</span><span style="color:#bf616a;">NONE</span><span>,
</span><span>            -</span><span style="color:#d08770;">1</span><span>,
</span><span>            </span><span style="color:#d08770;">None
</span><span>        )
</span><span>        
</span><span>        names = result[</span><span style="color:#d08770;">0</span><span>]
</span><span>        </span><span style="color:#b48ead;">return f</span><span>&quot;</span><span style="color:#a3be8c;">Found </span><span>{</span><span style="color:#96b5b4;">len</span><span>(names)}</span><span style="color:#a3be8c;"> services</span><span>&quot;
</span><span>    </span><span style="color:#b48ead;">except </span><span>Exception </span><span style="color:#b48ead;">as </span><span>e:
</span><span>        </span><span style="color:#b48ead;">return f</span><span>&quot;</span><span style="color:#a3be8c;">Error: </span><span>{e}&quot;
</span></code></pre>
<h3 id="notifications">Notifications</h3>
<p><strong>Rust Example</strong>:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">use </span><span>gtk::gio;
</span><span style="color:#b48ead;">use </span><span>gtk::glib;
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">send_simple_notification</span><span>(</span><span style="color:#bf616a;">app</span><span>: &amp;gio::Application, </span><span style="color:#bf616a;">title</span><span>: &amp;</span><span style="color:#b48ead;">str</span><span>, </span><span style="color:#bf616a;">body</span><span>: &amp;</span><span style="color:#b48ead;">str</span><span>) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> notification = gio::Notification::new(title);
</span><span>    notification.</span><span style="color:#96b5b4;">set_body</span><span>(Some(body));
</span><span>    app.</span><span style="color:#96b5b4;">send_notification</span><span>(None, &amp;notification);
</span><span>}
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">send_notification_with_action</span><span>(</span><span style="color:#bf616a;">app</span><span>: &amp;gio::Application) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> notification = gio::Notification::new(&quot;</span><span style="color:#a3be8c;">New Message</span><span>&quot;);
</span><span>    notification.</span><span style="color:#96b5b4;">set_body</span><span>(Some(&quot;</span><span style="color:#a3be8c;">You have a new message from Alice</span><span>&quot;));
</span><span>    notification.</span><span style="color:#96b5b4;">set_icon</span><span>(&amp;gio::ThemedIcon::new(&quot;</span><span style="color:#a3be8c;">mail-unread-symbolic</span><span>&quot;));
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Add action
</span><span>    notification.</span><span style="color:#96b5b4;">add_button</span><span>(&quot;</span><span style="color:#a3be8c;">Reply</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">app.reply</span><span>&quot;);
</span><span>    notification.</span><span style="color:#96b5b4;">set_default_action</span><span>(&quot;</span><span style="color:#a3be8c;">app.open-message</span><span>&quot;);
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Set priority
</span><span>    notification.</span><span style="color:#96b5b4;">set_priority</span><span>(gio::NotificationPriority::High);
</span><span>    
</span><span>    app.</span><span style="color:#96b5b4;">send_notification</span><span>(Some(&quot;</span><span style="color:#a3be8c;">message-1</span><span>&quot;), &amp;notification);
</span><span>}
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">withdraw_notification</span><span>(</span><span style="color:#bf616a;">app</span><span>: &amp;gio::Application, </span><span style="color:#bf616a;">id</span><span>: &amp;</span><span style="color:#b48ead;">str</span><span>) {
</span><span>    app.</span><span style="color:#96b5b4;">withdraw_notification</span><span>(id);
</span><span>}
</span></code></pre>
<p><strong>Python Example</strong>:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">send_simple_notification</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">app</span><span>, </span><span style="color:#bf616a;">title</span><span>, </span><span style="color:#bf616a;">body</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Send a simple notification.&quot;&quot;&quot;
</span><span>    notification = Gio.Notification.</span><span style="color:#bf616a;">new</span><span>(title)
</span><span>    notification.</span><span style="color:#bf616a;">set_body</span><span>(body)
</span><span>    app.</span><span style="color:#bf616a;">send_notification</span><span>(</span><span style="color:#d08770;">None</span><span>, notification)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">send_notification_with_action</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">app</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Send notification with actions.&quot;&quot;&quot;
</span><span>    notification = Gio.Notification.</span><span style="color:#bf616a;">new</span><span>(&quot;</span><span style="color:#a3be8c;">New Message</span><span>&quot;)
</span><span>    notification.</span><span style="color:#bf616a;">set_body</span><span>(&quot;</span><span style="color:#a3be8c;">You have a new message from Alice</span><span>&quot;)
</span><span>    notification.</span><span style="color:#bf616a;">set_icon</span><span>(Gio.ThemedIcon.</span><span style="color:#bf616a;">new</span><span>(&quot;</span><span style="color:#a3be8c;">mail-unread-symbolic</span><span>&quot;))
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Add action
</span><span>    notification.</span><span style="color:#bf616a;">add_button</span><span>(&quot;</span><span style="color:#a3be8c;">Reply</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">app.reply</span><span>&quot;)
</span><span>    notification.</span><span style="color:#bf616a;">set_default_action</span><span>(&quot;</span><span style="color:#a3be8c;">app.open-message</span><span>&quot;)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Set priority
</span><span>    notification.</span><span style="color:#bf616a;">set_priority</span><span>(Gio.NotificationPriority.</span><span style="color:#bf616a;">HIGH</span><span>)
</span><span>    
</span><span>    app.</span><span style="color:#bf616a;">send_notification</span><span>(&quot;</span><span style="color:#a3be8c;">message-1</span><span>&quot;, notification)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">withdraw_notification</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">app</span><span>, </span><span style="color:#bf616a;">notification_id</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Withdraw a notification.&quot;&quot;&quot;
</span><span>    app.</span><span style="color:#bf616a;">withdraw_notification</span><span>(notification_id)
</span></code></pre>
<h3 id="portal-integration">Portal Integration</h3>
<p>GNOME applications use portals for system integration in sandboxed environments (Flatpak).</p>
<p><strong>Rust Example</strong>:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">use </span><span>gtk::gio;
</span><span style="color:#b48ead;">use </span><span>gtk::glib;
</span><span style="color:#b48ead;">use </span><span>gtk::prelude::*;
</span><span>
</span><span style="color:#65737e;">// Open URI with portal
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">open_uri_with_portal</span><span>(</span><span style="color:#bf616a;">parent</span><span>: &amp;impl IsA&lt;gtk::Window&gt;, </span><span style="color:#bf616a;">uri</span><span>: &amp;</span><span style="color:#b48ead;">str</span><span>) {
</span><span>    gtk::UriLauncher::new(uri).</span><span style="color:#96b5b4;">launch</span><span>(
</span><span>        Some(parent),
</span><span>        None::&lt;&amp;gio::Cancellable&gt;,
</span><span>        |</span><span style="color:#bf616a;">result</span><span>| {
</span><span>            </span><span style="color:#b48ead;">match</span><span> result {
</span><span>                Ok(_) =&gt; println!(&quot;</span><span style="color:#a3be8c;">URI opened successfully</span><span>&quot;),
</span><span>                Err(e) =&gt; println!(&quot;</span><span style="color:#a3be8c;">Failed to open URI: </span><span style="color:#d08770;">{}</span><span>&quot;, e),
</span><span>            }
</span><span>        },
</span><span>    );
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Open file with default application
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">open_file_with_portal</span><span>(</span><span style="color:#bf616a;">parent</span><span>: &amp;impl IsA&lt;gtk::Window&gt;, </span><span style="color:#bf616a;">file</span><span>: &amp;gio::File) {
</span><span>    gtk::FileLauncher::new(Some(file)).</span><span style="color:#96b5b4;">open</span><span>(
</span><span>        Some(parent),
</span><span>        None::&lt;&amp;gio::Cancellable&gt;,
</span><span>        |</span><span style="color:#bf616a;">result</span><span>| {
</span><span>            </span><span style="color:#b48ead;">match</span><span> result {
</span><span>                Ok(_) =&gt; println!(&quot;</span><span style="color:#a3be8c;">File opened successfully</span><span>&quot;),
</span><span>                Err(e) =&gt; println!(&quot;</span><span style="color:#a3be8c;">Failed to open file: </span><span style="color:#d08770;">{}</span><span>&quot;, e),
</span><span>            }
</span><span>        },
</span><span>    );
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Take screenshot (portal)
</span><span>async </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">take_screenshot</span><span>(</span><span style="color:#bf616a;">parent</span><span>: &amp;gtk::Window) -&gt; Result&lt;String, glib::Error&gt; {
</span><span>    </span><span style="color:#b48ead;">let</span><span> connection = gio::bus_get_future(gio::BusType::Session).await?;
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Call screenshot portal
</span><span>    </span><span style="color:#b48ead;">let</span><span> result = connection
</span><span>        .</span><span style="color:#96b5b4;">call_future</span><span>(
</span><span>            Some(&quot;</span><span style="color:#a3be8c;">org.freedesktop.portal.Desktop</span><span>&quot;),
</span><span>            &quot;</span><span style="color:#a3be8c;">/org/freedesktop/portal/desktop</span><span>&quot;,
</span><span>            Some(&quot;</span><span style="color:#a3be8c;">org.freedesktop.portal.Screenshot</span><span>&quot;),
</span><span>            &quot;</span><span style="color:#a3be8c;">Screenshot</span><span>&quot;,
</span><span>            Some(&amp;glib::Variant::tuple_from_iter(vec![
</span><span>                glib::Variant::from(&quot;&quot;),  </span><span style="color:#65737e;">// parent_window
</span><span>                glib::Variant::from_dict_entry(
</span><span>                    glib::Variant::from(&quot;</span><span style="color:#a3be8c;">modal</span><span>&quot;),
</span><span>                    glib::Variant::from(&amp;glib::Variant::from(</span><span style="color:#d08770;">true</span><span>)),
</span><span>                ),
</span><span>            ])),
</span><span>            Some(&amp;glib::VariantTy::new(&quot;</span><span style="color:#a3be8c;">(o)</span><span>&quot;).</span><span style="color:#96b5b4;">unwrap</span><span>()),
</span><span>            gio::DBusCallFlags::</span><span style="color:#d08770;">NONE</span><span>,
</span><span>            -</span><span style="color:#d08770;">1</span><span>,
</span><span>        )
</span><span>        .await?;
</span><span>    
</span><span>    Ok(&quot;</span><span style="color:#a3be8c;">Screenshot taken</span><span>&quot;.</span><span style="color:#96b5b4;">to_string</span><span>())
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Access camera (portal)
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">request_camera_access</span><span>(</span><span style="color:#bf616a;">parent</span><span>: &amp;impl IsA&lt;gtk::Window&gt;) {
</span><span>    </span><span style="color:#65737e;">// This would typically use the Camera portal
</span><span>    </span><span style="color:#65737e;">// Implementation depends on specific portal API
</span><span>    println!(&quot;</span><span style="color:#a3be8c;">Requesting camera access via portal</span><span>&quot;);
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Request location access
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">request_location_access</span><span>() {
</span><span>    </span><span style="color:#65737e;">// Use Geoclue or Location portal
</span><span>    println!(&quot;</span><span style="color:#a3be8c;">Requesting location access</span><span>&quot;);
</span><span>}
</span></code></pre>
<p><strong>Python Example</strong>:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">open_uri_with_portal</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">parent</span><span>, </span><span style="color:#bf616a;">uri</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Open URI using portal.&quot;&quot;&quot;
</span><span>    launcher = Gtk.UriLauncher.</span><span style="color:#bf616a;">new</span><span>(uri)
</span><span>    launcher.</span><span style="color:#bf616a;">launch</span><span>(parent, </span><span style="color:#d08770;">None</span><span>, </span><span style="color:#bf616a;">self</span><span>.on_uri_opened)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">on_uri_opened</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">launcher</span><span>, </span><span style="color:#bf616a;">result</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Handle URI opened result.&quot;&quot;&quot;
</span><span>    </span><span style="color:#b48ead;">try</span><span>:
</span><span>        launcher.</span><span style="color:#bf616a;">launch_finish</span><span>(result)
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(&quot;</span><span style="color:#a3be8c;">URI opened successfully</span><span>&quot;)
</span><span>    </span><span style="color:#b48ead;">except </span><span>Exception </span><span style="color:#b48ead;">as </span><span>e:
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">Failed to open URI: </span><span>{e}&quot;)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">open_file_with_portal</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">parent</span><span>, </span><span style="color:#bf616a;">file</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Open file with default application.&quot;&quot;&quot;
</span><span>    launcher = Gtk.FileLauncher.</span><span style="color:#bf616a;">new</span><span>(file)
</span><span>    launcher.</span><span style="color:#bf616a;">open</span><span>(parent, </span><span style="color:#d08770;">None</span><span>, </span><span style="color:#bf616a;">self</span><span>.on_file_opened)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">on_file_opened</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">launcher</span><span>, </span><span style="color:#bf616a;">result</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Handle file opened result.&quot;&quot;&quot;
</span><span>    </span><span style="color:#b48ead;">try</span><span>:
</span><span>        launcher.</span><span style="color:#bf616a;">open_finish</span><span>(result)
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(&quot;</span><span style="color:#a3be8c;">File opened successfully</span><span>&quot;)
</span><span>    </span><span style="color:#b48ead;">except </span><span>Exception </span><span style="color:#b48ead;">as </span><span>e:
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">Failed to open file: </span><span>{e}&quot;)
</span><span>
</span><span style="color:#b48ead;">async def </span><span style="color:#8fa1b3;">take_screenshot</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">parent</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Take screenshot using portal.&quot;&quot;&quot;
</span><span>    </span><span style="color:#b48ead;">try</span><span>:
</span><span>        connection = </span><span style="color:#b48ead;">await </span><span>Gio.</span><span style="color:#bf616a;">bus_get_async</span><span>(Gio.BusType.</span><span style="color:#bf616a;">SESSION</span><span>, </span><span style="color:#d08770;">None</span><span>)
</span><span>        
</span><span>        </span><span style="color:#65737e;"># Call screenshot portal
</span><span>        result = </span><span style="color:#b48ead;">await </span><span>connection.</span><span style="color:#bf616a;">call_async</span><span>(
</span><span>            &quot;</span><span style="color:#a3be8c;">org.freedesktop.portal.Desktop</span><span>&quot;,
</span><span>            &quot;</span><span style="color:#a3be8c;">/org/freedesktop/portal/desktop</span><span>&quot;,
</span><span>            &quot;</span><span style="color:#a3be8c;">org.freedesktop.portal.Screenshot</span><span>&quot;,
</span><span>            &quot;</span><span style="color:#a3be8c;">Screenshot</span><span>&quot;,
</span><span>            GLib.</span><span style="color:#bf616a;">Variant</span><span>(&#39;</span><span style="color:#a3be8c;">(sa</span><span style="color:#d08770;">{sv}</span><span style="color:#a3be8c;">)</span><span>&#39;, (&quot;&quot;, {&quot;</span><span style="color:#a3be8c;">modal</span><span>&quot;: GLib.</span><span style="color:#bf616a;">Variant</span><span>(&#39;</span><span style="color:#a3be8c;">b</span><span>&#39;, </span><span style="color:#d08770;">True</span><span>)})),
</span><span>            GLib.VariantType.</span><span style="color:#bf616a;">new</span><span>(&quot;</span><span style="color:#a3be8c;">(o)</span><span>&quot;),
</span><span>            Gio.DBusCallFlags.</span><span style="color:#bf616a;">NONE</span><span>,
</span><span>            -</span><span style="color:#d08770;">1</span><span>,
</span><span>            </span><span style="color:#d08770;">None
</span><span>        )
</span><span>        
</span><span>        </span><span style="color:#b48ead;">return </span><span>&quot;</span><span style="color:#a3be8c;">Screenshot taken</span><span>&quot;
</span><span>    </span><span style="color:#b48ead;">except </span><span>Exception </span><span style="color:#b48ead;">as </span><span>e:
</span><span>        </span><span style="color:#b48ead;">return f</span><span>&quot;</span><span style="color:#a3be8c;">Error: </span><span>{e}&quot;
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">request_camera_access</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">parent</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Request camera access via portal.&quot;&quot;&quot;
</span><span>    </span><span style="color:#65737e;"># Implementation depends on specific portal API
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(&quot;</span><span style="color:#a3be8c;">Requesting camera access via portal</span><span>&quot;)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">request_location_access</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Request location access.&quot;&quot;&quot;
</span><span>    </span><span style="color:#65737e;"># Use Geoclue or Location portal
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(&quot;</span><span style="color:#a3be8c;">Requesting location access</span><span>&quot;)
</span></code></pre>
<h3 id="background-tasks">Background Tasks</h3>
<p><strong>Rust Example</strong>:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">use </span><span>gtk::gio;
</span><span style="color:#b48ead;">use </span><span>gtk::glib;
</span><span style="color:#b48ead;">use </span><span>std::cell::RefCell;
</span><span style="color:#b48ead;">use </span><span>std::rc::Rc;
</span><span>
</span><span style="color:#65737e;">// Run task in background thread
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">run_background_task</span><span>&lt;F, R&gt;(</span><span style="color:#bf616a;">task</span><span>: F) -&gt; glib::JoinHandle&lt;R&gt;
</span><span style="color:#b48ead;">where
</span><span>    F: FnOnce() -&gt; R + Send + </span><span style="color:#b48ead;">&#39;static</span><span>,
</span><span>    R: Send + </span><span style="color:#b48ead;">&#39;static</span><span>,
</span><span>{
</span><span>    gio::spawn_blocking(task)
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Example: Load file in background
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">load_file_async</span><span>(</span><span style="color:#bf616a;">path</span><span>: String, </span><span style="color:#bf616a;">callback</span><span>: impl FnOnce(</span><span style="color:#bf616a;">Result</span><span>&lt;</span><span style="color:#bf616a;">String</span><span>, </span><span style="color:#bf616a;">String</span><span>&gt;) + </span><span style="color:#b48ead;">&#39;static</span><span>) {
</span><span>    gio::spawn_blocking(</span><span style="color:#b48ead;">move </span><span>|| {
</span><span>        std::fs::read_to_string(&amp;path)
</span><span>            .</span><span style="color:#96b5b4;">map_err</span><span>(|</span><span style="color:#bf616a;">e</span><span>| e.</span><span style="color:#96b5b4;">to_string</span><span>())
</span><span>    })
</span><span>    .</span><span style="color:#96b5b4;">then</span><span>(</span><span style="color:#b48ead;">move </span><span>|result| {
</span><span>        </span><span style="color:#96b5b4;">callback</span><span>(result);
</span><span>    });
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Progress tracking for long operations
</span><span style="color:#b48ead;">struct </span><span>TaskProgress {
</span><span>    </span><span style="color:#bf616a;">progress</span><span>: Rc&lt;RefCell&lt;</span><span style="color:#b48ead;">f64</span><span>&gt;&gt;,
</span><span>    </span><span style="color:#bf616a;">cancelled</span><span>: Rc&lt;RefCell&lt;</span><span style="color:#b48ead;">bool</span><span>&gt;&gt;,
</span><span>}
</span><span>
</span><span style="color:#b48ead;">impl </span><span>TaskProgress {
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">new</span><span>() -&gt; </span><span style="color:#b48ead;">Self </span><span>{
</span><span>        </span><span style="color:#b48ead;">Self </span><span>{
</span><span>            progress: Rc::new(RefCell::new(</span><span style="color:#d08770;">0.0</span><span>)),
</span><span>            cancelled: Rc::new(RefCell::new(</span><span style="color:#d08770;">false</span><span>)),
</span><span>        }
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">set_progress</span><span>(&amp;</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">value</span><span>: </span><span style="color:#b48ead;">f64</span><span>) {
</span><span>        *</span><span style="color:#bf616a;">self</span><span>.progress.</span><span style="color:#96b5b4;">borrow_mut</span><span>() = value;
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">get_progress</span><span>(&amp;</span><span style="color:#bf616a;">self</span><span>) -&gt; </span><span style="color:#b48ead;">f64 </span><span>{
</span><span>        *</span><span style="color:#bf616a;">self</span><span>.progress.</span><span style="color:#96b5b4;">borrow</span><span>()
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">cancel</span><span>(&amp;</span><span style="color:#bf616a;">self</span><span>) {
</span><span>        *</span><span style="color:#bf616a;">self</span><span>.cancelled.</span><span style="color:#96b5b4;">borrow_mut</span><span>() = </span><span style="color:#d08770;">true</span><span>;
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">is_cancelled</span><span>(&amp;</span><span style="color:#bf616a;">self</span><span>) -&gt; </span><span style="color:#b48ead;">bool </span><span>{
</span><span>        *</span><span style="color:#bf616a;">self</span><span>.cancelled.</span><span style="color:#96b5b4;">borrow</span><span>()
</span><span>    }
</span><span>}
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">perform_long_task</span><span>(</span><span style="color:#bf616a;">progress</span><span>: TaskProgress) {
</span><span>    gio::spawn_blocking(</span><span style="color:#b48ead;">move </span><span>|| {
</span><span>        </span><span style="color:#b48ead;">for</span><span> i in </span><span style="color:#d08770;">0</span><span>..</span><span style="color:#d08770;">100 </span><span>{
</span><span>            </span><span style="color:#b48ead;">if</span><span> progress.</span><span style="color:#96b5b4;">is_cancelled</span><span>() {
</span><span>                </span><span style="color:#b48ead;">return </span><span>Err(&quot;</span><span style="color:#a3be8c;">Cancelled</span><span>&quot;);
</span><span>            }
</span><span>            
</span><span>            </span><span style="color:#65737e;">// Simulate work
</span><span>            std::thread::sleep(std::time::Duration::from_millis(</span><span style="color:#d08770;">50</span><span>));
</span><span>            
</span><span>            </span><span style="color:#65737e;">// Update progress
</span><span>            </span><span style="color:#b48ead;">let</span><span> percent = (i as </span><span style="color:#b48ead;">f64</span><span>) / </span><span style="color:#d08770;">100.0</span><span>;
</span><span>            glib::idle_add_once(glib::clone!(
</span><span>                #[</span><span style="color:#bf616a;">weak</span><span>]
</span><span>                progress,
</span><span>                </span><span style="color:#b48ead;">move </span><span>|| {
</span><span>                    progress.</span><span style="color:#96b5b4;">set_progress</span><span>(percent);
</span><span>                }
</span><span>            ));
</span><span>        }
</span><span>        Ok(&quot;</span><span style="color:#a3be8c;">Complete</span><span>&quot;)
</span><span>    });
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Async with futures
</span><span>async </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">async_task_example</span><span>() -&gt; Result&lt;String, String&gt; {
</span><span>    </span><span style="color:#65737e;">// Simulate async work
</span><span>    glib::timeout_future(std::time::Duration::from_secs(</span><span style="color:#d08770;">2</span><span>)).await;
</span><span>    Ok(&quot;</span><span style="color:#a3be8c;">Task completed</span><span>&quot;.</span><span style="color:#96b5b4;">to_string</span><span>())
</span><span>}
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">run_async_task</span><span>(
</span><span>    </span><span style="color:#bf616a;">callback</span><span>: impl FnOnce(</span><span style="color:#bf616a;">Result</span><span>&lt;</span><span style="color:#bf616a;">String</span><span>, </span><span style="color:#bf616a;">String</span><span>&gt;) + </span><span style="color:#b48ead;">&#39;static
</span><span>) {
</span><span>    glib::spawn_future_local(async </span><span style="color:#b48ead;">move </span><span>{
</span><span>        </span><span style="color:#b48ead;">let</span><span> result = </span><span style="color:#96b5b4;">async_task_example</span><span>().await;
</span><span>        </span><span style="color:#96b5b4;">callback</span><span>(result);
</span><span>    });
</span><span>}
</span></code></pre>
<p><strong>Python Example</strong>:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">import </span><span>threading
</span><span style="color:#b48ead;">from </span><span>gi.repository </span><span style="color:#b48ead;">import </span><span>GLib
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">run_background_task</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">task</span><span>, </span><span style="color:#bf616a;">callback</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Run task in background thread.&quot;&quot;&quot;
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">worker</span><span>():
</span><span>        result = </span><span style="color:#bf616a;">task</span><span>()
</span><span>        GLib.</span><span style="color:#bf616a;">idle_add</span><span>(callback, result)
</span><span>    
</span><span>    thread = threading.</span><span style="color:#bf616a;">Thread</span><span>(</span><span style="color:#bf616a;">target</span><span>=worker)
</span><span>    thread.daemon = </span><span style="color:#d08770;">True
</span><span>    thread.</span><span style="color:#bf616a;">start</span><span>()
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">load_file_async</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">path</span><span>, </span><span style="color:#bf616a;">callback</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Load file asynchronously.&quot;&quot;&quot;
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">task</span><span>():
</span><span>        </span><span style="color:#b48ead;">try</span><span>:
</span><span>            </span><span style="color:#b48ead;">with </span><span style="color:#96b5b4;">open</span><span>(path, &#39;</span><span style="color:#a3be8c;">r</span><span>&#39;) </span><span style="color:#b48ead;">as </span><span>f:
</span><span>                </span><span style="color:#b48ead;">return </span><span>f.</span><span style="color:#bf616a;">read</span><span>()
</span><span>        </span><span style="color:#b48ead;">except </span><span>Exception </span><span style="color:#b48ead;">as </span><span>e:
</span><span>            </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">str</span><span>(e)
</span><span>    
</span><span>    </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">run_background_task</span><span>(task, callback)
</span><span>
</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">TaskProgress</span><span style="color:#eff1f5;">:
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Track progress of long-running tasks.&quot;&quot;&quot;
</span><span>    
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#96b5b4;">__init__</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>        </span><span style="color:#bf616a;">self</span><span>.progress = </span><span style="color:#d08770;">0.0
</span><span>        </span><span style="color:#bf616a;">self</span><span>.cancelled = </span><span style="color:#d08770;">False
</span><span>        </span><span style="color:#bf616a;">self</span><span>._lock = threading.</span><span style="color:#bf616a;">Lock</span><span>()
</span><span>    
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">set_progress</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">value</span><span>):
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Set progress value (0.0 to 1.0).&quot;&quot;&quot;
</span><span>        </span><span style="color:#b48ead;">with </span><span style="color:#bf616a;">self</span><span>._lock:
</span><span>            </span><span style="color:#bf616a;">self</span><span>.progress = value
</span><span>    
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">get_progress</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Get current progress.&quot;&quot;&quot;
</span><span>        </span><span style="color:#b48ead;">with </span><span style="color:#bf616a;">self</span><span>._lock:
</span><span>            </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">self</span><span>.progress
</span><span>    
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">cancel</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Cancel the task.&quot;&quot;&quot;
</span><span>        </span><span style="color:#b48ead;">with </span><span style="color:#bf616a;">self</span><span>._lock:
</span><span>            </span><span style="color:#bf616a;">self</span><span>.cancelled = </span><span style="color:#d08770;">True
</span><span>    
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">is_cancelled</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Check if task is cancelled.&quot;&quot;&quot;
</span><span>        </span><span style="color:#b48ead;">with </span><span style="color:#bf616a;">self</span><span>._lock:
</span><span>            </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">self</span><span>.cancelled
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">perform_long_task</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">progress_tracker</span><span>, </span><span style="color:#bf616a;">callback</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Perform a long-running task with progress tracking.&quot;&quot;&quot;
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">task</span><span>():
</span><span>        </span><span style="color:#b48ead;">import </span><span>time
</span><span>        </span><span style="color:#b48ead;">for </span><span>i </span><span style="color:#b48ead;">in </span><span style="color:#96b5b4;">range</span><span>(</span><span style="color:#d08770;">100</span><span>):
</span><span>            </span><span style="color:#b48ead;">if </span><span>progress_tracker.</span><span style="color:#bf616a;">is_cancelled</span><span>():
</span><span>                </span><span style="color:#b48ead;">return </span><span>&quot;</span><span style="color:#a3be8c;">Cancelled</span><span>&quot;
</span><span>            
</span><span>            </span><span style="color:#65737e;"># Simulate work
</span><span>            time.</span><span style="color:#bf616a;">sleep</span><span>(</span><span style="color:#d08770;">0.05</span><span>)
</span><span>            
</span><span>            </span><span style="color:#65737e;"># Update progress on main thread
</span><span>            percent = i / </span><span style="color:#d08770;">100.0
</span><span>            GLib.</span><span style="color:#bf616a;">idle_add</span><span>(progress_tracker.set_progress, percent)
</span><span>        
</span><span>        </span><span style="color:#b48ead;">return </span><span>&quot;</span><span style="color:#a3be8c;">Complete</span><span>&quot;
</span><span>    
</span><span>    </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">run_background_task</span><span>(task, callback)
</span><span>
</span><span style="color:#b48ead;">async def </span><span style="color:#8fa1b3;">async_task_example</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Example async task.&quot;&quot;&quot;
</span><span>    </span><span style="color:#b48ead;">import </span><span>asyncio
</span><span>    </span><span style="color:#b48ead;">await </span><span>asyncio.</span><span style="color:#bf616a;">sleep</span><span>(</span><span style="color:#d08770;">2</span><span>)
</span><span>    </span><span style="color:#b48ead;">return </span><span>&quot;</span><span style="color:#a3be8c;">Task completed</span><span>&quot;
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">run_async_task</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">callback</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Run async task.&quot;&quot;&quot;
</span><span>    </span><span style="color:#b48ead;">import </span><span>asyncio
</span><span>    
</span><span>    </span><span style="color:#b48ead;">async def </span><span style="color:#8fa1b3;">wrapper</span><span>():
</span><span>        result = </span><span style="color:#b48ead;">await </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">async_task_example</span><span>()
</span><span>        GLib.</span><span style="color:#bf616a;">idle_add</span><span>(callback, result)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Note: Requires asyncio integration with GLib main loop
</span><span>    asyncio.</span><span style="color:#bf616a;">create_task</span><span>(</span><span style="color:#bf616a;">wrapper</span><span>())
</span></code></pre>
<h3 id="system-settings-integration">System Settings Integration</h3>
<p><strong>Rust Example</strong>:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">use </span><span>gtk::gio;
</span><span style="color:#b48ead;">use </span><span>gtk::glib;
</span><span style="color:#b48ead;">use </span><span>gtk::prelude::*;
</span><span>
</span><span style="color:#65737e;">// Read system color scheme
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">get_color_scheme</span><span>() -&gt; adwaita::ColorScheme {
</span><span>    </span><span style="color:#b48ead;">let</span><span> settings = adwaita::StyleManager::default();
</span><span>    settings.</span><span style="color:#96b5b4;">color_scheme</span><span>()
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Listen to color scheme changes
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">watch_color_scheme_changes</span><span>&lt;F&gt;(</span><span style="color:#bf616a;">callback</span><span>: F)
</span><span style="color:#b48ead;">where
</span><span>    F: Fn(adwaita::ColorScheme) + </span><span style="color:#b48ead;">&#39;static</span><span>,
</span><span>{
</span><span>    </span><span style="color:#b48ead;">let</span><span> style_manager = adwaita::StyleManager::default();
</span><span>    style_manager.</span><span style="color:#96b5b4;">connect_color_scheme_notify</span><span>(</span><span style="color:#b48ead;">move </span><span>|manager| {
</span><span>        </span><span style="color:#b48ead;">let</span><span> scheme = manager.</span><span style="color:#96b5b4;">color_scheme</span><span>();
</span><span>        </span><span style="color:#96b5b4;">callback</span><span>(scheme);
</span><span>    });
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Force dark mode
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">set_dark_mode</span><span>(</span><span style="color:#bf616a;">enabled</span><span>: </span><span style="color:#b48ead;">bool</span><span>) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> style_manager = adwaita::StyleManager::default();
</span><span>    </span><span style="color:#b48ead;">if</span><span> enabled {
</span><span>        style_manager.</span><span style="color:#96b5b4;">set_color_scheme</span><span>(adwaita::ColorScheme::ForceDark);
</span><span>    } </span><span style="color:#b48ead;">else </span><span>{
</span><span>        style_manager.</span><span style="color:#96b5b4;">set_color_scheme</span><span>(adwaita::ColorScheme::Default);
</span><span>    }
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Get system font
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">get_system_font</span><span>() -&gt; Option&lt;String&gt; {
</span><span>    </span><span style="color:#b48ead;">let</span><span> settings = gio::Settings::new(&quot;</span><span style="color:#a3be8c;">org.gnome.desktop.interface</span><span>&quot;);
</span><span>    settings.</span><span style="color:#96b5b4;">string</span><span>(&quot;</span><span style="color:#a3be8c;">font-name</span><span>&quot;).</span><span style="color:#96b5b4;">as_str</span><span>().</span><span style="color:#96b5b4;">to_owned</span><span>().</span><span style="color:#96b5b4;">into</span><span>()
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Get text scaling factor
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">get_text_scale_factor</span><span>() -&gt; </span><span style="color:#b48ead;">f64 </span><span>{
</span><span>    </span><span style="color:#b48ead;">let</span><span> settings = gio::Settings::new(&quot;</span><span style="color:#a3be8c;">org.gnome.desktop.interface</span><span>&quot;);
</span><span>    settings.</span><span style="color:#96b5b4;">double</span><span>(&quot;</span><span style="color:#a3be8c;">text-scaling-factor</span><span>&quot;)
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Listen to system settings
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">watch_system_settings</span><span>&lt;F&gt;(</span><span style="color:#bf616a;">callback</span><span>: F)
</span><span style="color:#b48ead;">where
</span><span>    F: Fn() + </span><span style="color:#b48ead;">&#39;static</span><span>,
</span><span>{
</span><span>    </span><span style="color:#b48ead;">let</span><span> settings = gio::Settings::new(&quot;</span><span style="color:#a3be8c;">org.gnome.desktop.interface</span><span>&quot;);
</span><span>    settings.</span><span style="color:#96b5b4;">connect_changed</span><span>(None, </span><span style="color:#b48ead;">move </span><span>|_, _| {
</span><span>        </span><span style="color:#96b5b4;">callback</span><span>();
</span><span>    });
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Check if running under Wayland
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">is_wayland</span><span>() -&gt; </span><span style="color:#b48ead;">bool </span><span>{
</span><span>    std::env::var(&quot;</span><span style="color:#a3be8c;">WAYLAND_DISPLAY</span><span>&quot;).</span><span style="color:#96b5b4;">is_ok</span><span>()
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Check if running under X11
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">is_x11</span><span>() -&gt; </span><span style="color:#b48ead;">bool </span><span>{
</span><span>    std::env::var(&quot;</span><span style="color:#a3be8c;">DISPLAY</span><span>&quot;).</span><span style="color:#96b5b4;">is_ok</span><span>() &amp;&amp; !</span><span style="color:#96b5b4;">is_wayland</span><span>()
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Get session type
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">get_session_type</span><span>() -&gt; String {
</span><span>    std::env::var(&quot;</span><span style="color:#a3be8c;">XDG_SESSION_TYPE</span><span>&quot;).</span><span style="color:#96b5b4;">unwrap_or_else</span><span>(|_| &quot;</span><span style="color:#a3be8c;">unknown</span><span>&quot;.</span><span style="color:#96b5b4;">to_string</span><span>())
</span><span>}
</span></code></pre>
<p><strong>Python Example</strong>:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">import </span><span>os
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">get_color_scheme</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Get current system color scheme.&quot;&quot;&quot;
</span><span>    style_manager = Adw.StyleManager.</span><span style="color:#bf616a;">get_default</span><span>()
</span><span>    </span><span style="color:#b48ead;">return </span><span>style_manager.</span><span style="color:#bf616a;">get_color_scheme</span><span>()
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">watch_color_scheme_changes</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">callback</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Listen to color scheme changes.&quot;&quot;&quot;
</span><span>    style_manager = Adw.StyleManager.</span><span style="color:#bf616a;">get_default</span><span>()
</span><span>    style_manager.</span><span style="color:#bf616a;">connect</span><span>(&#39;</span><span style="color:#a3be8c;">notify::color-scheme</span><span>&#39;, </span><span style="color:#b48ead;">lambda </span><span>*</span><span style="color:#bf616a;">args</span><span>: </span><span style="color:#bf616a;">callback</span><span>())
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">set_dark_mode</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">enabled</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Force dark or light mode.&quot;&quot;&quot;
</span><span>    style_manager = Adw.StyleManager.</span><span style="color:#bf616a;">get_default</span><span>()
</span><span>    </span><span style="color:#b48ead;">if </span><span>enabled:
</span><span>        style_manager.</span><span style="color:#bf616a;">set_color_scheme</span><span>(Adw.ColorScheme.</span><span style="color:#bf616a;">FORCE_DARK</span><span>)
</span><span>    </span><span style="color:#b48ead;">else</span><span>:
</span><span>        style_manager.</span><span style="color:#bf616a;">set_color_scheme</span><span>(Adw.ColorScheme.</span><span style="color:#bf616a;">DEFAULT</span><span>)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">get_system_font</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Get system font setting.&quot;&quot;&quot;
</span><span>    settings = Gio.Settings.</span><span style="color:#bf616a;">new</span><span>(&quot;</span><span style="color:#a3be8c;">org.gnome.desktop.interface</span><span>&quot;)
</span><span>    </span><span style="color:#b48ead;">return </span><span>settings.</span><span style="color:#bf616a;">get_string</span><span>(&quot;</span><span style="color:#a3be8c;">font-name</span><span>&quot;)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">get_text_scale_factor</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Get text scaling factor.&quot;&quot;&quot;
</span><span>    settings = Gio.Settings.</span><span style="color:#bf616a;">new</span><span>(&quot;</span><span style="color:#a3be8c;">org.gnome.desktop.interface</span><span>&quot;)
</span><span>    </span><span style="color:#b48ead;">return </span><span>settings.</span><span style="color:#bf616a;">get_double</span><span>(&quot;</span><span style="color:#a3be8c;">text-scaling-factor</span><span>&quot;)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">watch_system_settings</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">callback</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Listen to system settings changes.&quot;&quot;&quot;
</span><span>    settings = Gio.Settings.</span><span style="color:#bf616a;">new</span><span>(&quot;</span><span style="color:#a3be8c;">org.gnome.desktop.interface</span><span>&quot;)
</span><span>    settings.</span><span style="color:#bf616a;">connect</span><span>(&#39;</span><span style="color:#a3be8c;">changed</span><span>&#39;, </span><span style="color:#b48ead;">lambda </span><span>*</span><span style="color:#bf616a;">args</span><span>: </span><span style="color:#bf616a;">callback</span><span>())
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">is_wayland</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Check if running under Wayland.&quot;&quot;&quot;
</span><span>    </span><span style="color:#b48ead;">return </span><span>&#39;</span><span style="color:#a3be8c;">WAYLAND_DISPLAY</span><span>&#39; in os.environ
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">is_x11</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Check if running under X11.&quot;&quot;&quot;
</span><span>    </span><span style="color:#b48ead;">return </span><span>&#39;</span><span style="color:#a3be8c;">DISPLAY</span><span>&#39; in os.environ and not </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">is_wayland</span><span>()
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">get_session_type</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Get session type.&quot;&quot;&quot;
</span><span>    </span><span style="color:#b48ead;">return </span><span>os.environ.</span><span style="color:#bf616a;">get</span><span>(&#39;</span><span style="color:#a3be8c;">XDG_SESSION_TYPE</span><span>&#39;, &#39;</span><span style="color:#a3be8c;">unknown</span><span>&#39;)
</span></code></pre>
<h3 id="custom-uri-schemes">Custom URI Schemes</h3>
<p><strong>Rust Example</strong>:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">use </span><span>gtk::gio;
</span><span style="color:#b48ead;">use </span><span>gtk::glib;
</span><span>
</span><span style="color:#65737e;">// Register custom URI scheme handler
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">register_uri_scheme_handler</span><span>(</span><span style="color:#bf616a;">app</span><span>: &amp;gio::Application) {
</span><span>    app.</span><span style="color:#96b5b4;">connect_open</span><span>(|</span><span style="color:#bf616a;">app</span><span>, </span><span style="color:#bf616a;">files</span><span>, </span><span style="color:#bf616a;">hint</span><span>| {
</span><span>        </span><span style="color:#b48ead;">for</span><span> file in files {
</span><span>            </span><span style="color:#b48ead;">if let </span><span>Some(uri) = file.</span><span style="color:#96b5b4;">uri</span><span>().</span><span style="color:#96b5b4;">as_str</span><span>().</span><span style="color:#96b5b4;">strip_prefix</span><span>(&quot;</span><span style="color:#a3be8c;">myapp://</span><span>&quot;) {
</span><span>                </span><span style="color:#96b5b4;">handle_custom_uri</span><span>(app, uri);
</span><span>            }
</span><span>        }
</span><span>    });
</span><span>}
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">handle_custom_uri</span><span>(</span><span style="color:#bf616a;">app</span><span>: &amp;gio::Application, </span><span style="color:#bf616a;">uri</span><span>: &amp;</span><span style="color:#b48ead;">str</span><span>) {
</span><span>    println!(&quot;</span><span style="color:#a3be8c;">Handling custom URI: </span><span style="color:#d08770;">{}</span><span>&quot;, uri);
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Parse URI
</span><span>    </span><span style="color:#b48ead;">let</span><span> parts: Vec&lt;&amp;</span><span style="color:#b48ead;">str</span><span>&gt; = uri.</span><span style="color:#96b5b4;">split</span><span>(&#39;</span><span style="color:#a3be8c;">/</span><span>&#39;).</span><span style="color:#96b5b4;">collect</span><span>();
</span><span>    </span><span style="color:#b48ead;">match</span><span> parts.</span><span style="color:#96b5b4;">get</span><span>(</span><span style="color:#d08770;">0</span><span>) {
</span><span>        Some(&amp;&quot;</span><span style="color:#a3be8c;">open</span><span>&quot;) =&gt; {
</span><span>            </span><span style="color:#b48ead;">if let </span><span>Some(id) = parts.</span><span style="color:#96b5b4;">get</span><span>(</span><span style="color:#d08770;">1</span><span>) {
</span><span>                println!(&quot;</span><span style="color:#a3be8c;">Opening item: </span><span style="color:#d08770;">{}</span><span>&quot;, id);
</span><span>                </span><span style="color:#65737e;">// Open specific item
</span><span>            }
</span><span>        }
</span><span>        Some(&amp;&quot;</span><span style="color:#a3be8c;">action</span><span>&quot;) =&gt; {
</span><span>            </span><span style="color:#b48ead;">if let </span><span>Some(action) = parts.</span><span style="color:#96b5b4;">get</span><span>(</span><span style="color:#d08770;">1</span><span>) {
</span><span>                println!(&quot;</span><span style="color:#a3be8c;">Performing action: </span><span style="color:#d08770;">{}</span><span>&quot;, action);
</span><span>                </span><span style="color:#65737e;">// Perform action
</span><span>            }
</span><span>        }
</span><span>        _ =&gt; {
</span><span>            println!(&quot;</span><span style="color:#a3be8c;">Unknown URI scheme</span><span>&quot;);
</span><span>        }
</span><span>    }
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Desktop file entry for URI scheme:
</span><span style="color:#65737e;">// Add to .desktop file:
</span><span style="color:#65737e;">// MimeType=x-scheme-handler/myapp;
</span></code></pre>
<p><strong>Python Example</strong>:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">register_uri_scheme_handler</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">app</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Register custom URI scheme handler.&quot;&quot;&quot;
</span><span>    app.</span><span style="color:#bf616a;">connect</span><span>(&#39;</span><span style="color:#a3be8c;">open</span><span>&#39;, </span><span style="color:#bf616a;">self</span><span>.on_open_files)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">on_open_files</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">app</span><span>, </span><span style="color:#bf616a;">files</span><span>, </span><span style="color:#bf616a;">n_files</span><span>, </span><span style="color:#bf616a;">hint</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Handle file open (including custom URIs).&quot;&quot;&quot;
</span><span>    </span><span style="color:#b48ead;">for </span><span>file </span><span style="color:#b48ead;">in </span><span>files:
</span><span>        uri = file.</span><span style="color:#bf616a;">get_uri</span><span>()
</span><span>        </span><span style="color:#b48ead;">if </span><span>uri.</span><span style="color:#bf616a;">startswith</span><span>(&quot;</span><span style="color:#a3be8c;">myapp://</span><span>&quot;):
</span><span>            custom_uri = uri[</span><span style="color:#d08770;">8</span><span>:]  </span><span style="color:#65737e;"># Remove &quot;myapp://&quot;
</span><span>            </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">handle_custom_uri</span><span>(app, custom_uri)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">handle_custom_uri</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">app</span><span>, </span><span style="color:#bf616a;">uri</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Handle custom URI.&quot;&quot;&quot;
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">Handling custom URI: </span><span>{uri}&quot;)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Parse URI
</span><span>    parts = uri.</span><span style="color:#bf616a;">split</span><span>(&#39;</span><span style="color:#a3be8c;">/</span><span>&#39;)
</span><span>    </span><span style="color:#b48ead;">if </span><span style="color:#96b5b4;">len</span><span>(parts) &gt; </span><span style="color:#d08770;">0</span><span>:
</span><span>        </span><span style="color:#b48ead;">if </span><span>parts[</span><span style="color:#d08770;">0</span><span>] == &quot;</span><span style="color:#a3be8c;">open</span><span>&quot; and </span><span style="color:#96b5b4;">len</span><span>(parts) &gt; </span><span style="color:#d08770;">1</span><span>:
</span><span>            item_id = parts[</span><span style="color:#d08770;">1</span><span>]
</span><span>            </span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">Opening item: </span><span>{item_id}&quot;)
</span><span>            </span><span style="color:#65737e;"># Open specific item
</span><span>        </span><span style="color:#b48ead;">elif </span><span>parts[</span><span style="color:#d08770;">0</span><span>] == &quot;</span><span style="color:#a3be8c;">action</span><span>&quot; and </span><span style="color:#96b5b4;">len</span><span>(parts) &gt; </span><span style="color:#d08770;">1</span><span>:
</span><span>            action = parts[</span><span style="color:#d08770;">1</span><span>]
</span><span>            </span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">Performing action: </span><span>{action}&quot;)
</span><span>            </span><span style="color:#65737e;"># Perform action
</span><span>        </span><span style="color:#b48ead;">else</span><span>:
</span><span>            </span><span style="color:#96b5b4;">print</span><span>(&quot;</span><span style="color:#a3be8c;">Unknown URI scheme</span><span>&quot;)
</span><span>
</span><span style="color:#65737e;"># Desktop file entry for URI scheme:
</span><span style="color:#65737e;"># Add to .desktop file:
</span><span style="color:#65737e;"># MimeType=x-scheme-handler/myapp;
</span></code></pre>
<h2 id="chapter-11-data-management">Chapter 11: Data Management</h2>
<h3 id="gsettings-preferences">GSettings (Preferences)</h3>
<p>GSettings is the standard way to store application preferences.</p>
<p><strong>Rust Example</strong>:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">use </span><span>gtk::gio;
</span><span style="color:#b48ead;">use </span><span>gtk::glib;
</span><span style="color:#b48ead;">use </span><span>gtk::prelude::*;
</span><span>
</span><span style="color:#65737e;">// Define settings keys
</span><span style="color:#b48ead;">struct </span><span>AppSettings {
</span><span>    </span><span style="color:#bf616a;">settings</span><span>: gio::Settings,
</span><span>}
</span><span>
</span><span style="color:#b48ead;">impl </span><span>AppSettings {
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">new</span><span>(</span><span style="color:#bf616a;">app_id</span><span>: &amp;</span><span style="color:#b48ead;">str</span><span>) -&gt; </span><span style="color:#b48ead;">Self </span><span>{
</span><span>        </span><span style="color:#b48ead;">Self </span><span>{
</span><span>            settings: gio::Settings::new(app_id),
</span><span>        }
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Boolean settings
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">get_dark_mode</span><span>(&amp;</span><span style="color:#bf616a;">self</span><span>) -&gt; </span><span style="color:#b48ead;">bool </span><span>{
</span><span>        </span><span style="color:#bf616a;">self</span><span>.settings.</span><span style="color:#96b5b4;">boolean</span><span>(&quot;</span><span style="color:#a3be8c;">dark-mode</span><span>&quot;)
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">set_dark_mode</span><span>(&amp;</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">value</span><span>: </span><span style="color:#b48ead;">bool</span><span>) {
</span><span>        </span><span style="color:#bf616a;">self</span><span>.settings.</span><span style="color:#96b5b4;">set_boolean</span><span>(&quot;</span><span style="color:#a3be8c;">dark-mode</span><span>&quot;, value).</span><span style="color:#96b5b4;">ok</span><span>();
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#65737e;">// String settings
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">get_theme</span><span>(&amp;</span><span style="color:#bf616a;">self</span><span>) -&gt; String {
</span><span>        </span><span style="color:#bf616a;">self</span><span>.settings.</span><span style="color:#96b5b4;">string</span><span>(&quot;</span><span style="color:#a3be8c;">theme</span><span>&quot;).</span><span style="color:#96b5b4;">to_string</span><span>()
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">set_theme</span><span>(&amp;</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">value</span><span>: &amp;</span><span style="color:#b48ead;">str</span><span>) {
</span><span>        </span><span style="color:#bf616a;">self</span><span>.settings.</span><span style="color:#96b5b4;">set_string</span><span>(&quot;</span><span style="color:#a3be8c;">theme</span><span>&quot;, value).</span><span style="color:#96b5b4;">ok</span><span>();
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Integer settings
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">get_window_width</span><span>(&amp;</span><span style="color:#bf616a;">self</span><span>) -&gt; </span><span style="color:#b48ead;">i32 </span><span>{
</span><span>        </span><span style="color:#bf616a;">self</span><span>.settings.</span><span style="color:#96b5b4;">int</span><span>(&quot;</span><span style="color:#a3be8c;">window-width</span><span>&quot;)
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">set_window_width</span><span>(&amp;</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">value</span><span>: </span><span style="color:#b48ead;">i32</span><span>) {
</span><span>        </span><span style="color:#bf616a;">self</span><span>.settings.</span><span style="color:#96b5b4;">set_int</span><span>(&quot;</span><span style="color:#a3be8c;">window-width</span><span>&quot;, value).</span><span style="color:#96b5b4;">ok</span><span>();
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Array settings
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">get_recent_files</span><span>(&amp;</span><span style="color:#bf616a;">self</span><span>) -&gt; Vec&lt;String&gt; {
</span><span>        </span><span style="color:#bf616a;">self</span><span>.settings
</span><span>            .</span><span style="color:#96b5b4;">strv</span><span>(&quot;</span><span style="color:#a3be8c;">recent-files</span><span>&quot;)
</span><span>            .</span><span style="color:#96b5b4;">iter</span><span>()
</span><span>            .</span><span style="color:#96b5b4;">map</span><span>(|</span><span style="color:#bf616a;">s</span><span>| s.</span><span style="color:#96b5b4;">to_string</span><span>())
</span><span>            .</span><span style="color:#96b5b4;">collect</span><span>()
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">set_recent_files</span><span>(&amp;</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">files</span><span>: &amp;[String]) {
</span><span>        </span><span style="color:#b48ead;">let</span><span> strs: Vec&lt;&amp;</span><span style="color:#b48ead;">str</span><span>&gt; = files.</span><span style="color:#96b5b4;">iter</span><span>().</span><span style="color:#96b5b4;">map</span><span>(|</span><span style="color:#bf616a;">s</span><span>| s.</span><span style="color:#96b5b4;">as_str</span><span>()).</span><span style="color:#96b5b4;">collect</span><span>();
</span><span>        </span><span style="color:#bf616a;">self</span><span>.settings.</span><span style="color:#96b5b4;">set_strv</span><span>(&quot;</span><span style="color:#a3be8c;">recent-files</span><span>&quot;, &amp;strs).</span><span style="color:#96b5b4;">ok</span><span>();
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Enum settings
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">get_sort_order</span><span>(&amp;</span><span style="color:#bf616a;">self</span><span>) -&gt; String {
</span><span>        </span><span style="color:#bf616a;">self</span><span>.settings.</span><span style="color:#96b5b4;">enum_</span><span>(&quot;</span><span style="color:#a3be8c;">sort-order</span><span>&quot;).</span><span style="color:#96b5b4;">to_string</span><span>()
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">set_sort_order</span><span>(&amp;</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">value</span><span>: &amp;</span><span style="color:#b48ead;">str</span><span>) {
</span><span>        </span><span style="color:#bf616a;">self</span><span>.settings.</span><span style="color:#96b5b4;">set_enum</span><span>(&quot;</span><span style="color:#a3be8c;">sort-order</span><span>&quot;, value).</span><span style="color:#96b5b4;">ok</span><span>();
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Listen to changes
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">connect_changed</span><span>&lt;F&gt;(&amp;</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">key</span><span>: Option&lt;&amp;</span><span style="color:#b48ead;">str</span><span>&gt;, </span><span style="color:#bf616a;">callback</span><span>: F)
</span><span>    </span><span style="color:#b48ead;">where
</span><span>        F: Fn(&amp;</span><span style="color:#b48ead;">str</span><span>) + </span><span style="color:#b48ead;">&#39;static</span><span>,
</span><span>    {
</span><span>        </span><span style="color:#bf616a;">self</span><span>.settings.</span><span style="color:#96b5b4;">connect_changed</span><span>(key, </span><span style="color:#b48ead;">move </span><span>|_, key| {
</span><span>            </span><span style="color:#96b5b4;">callback</span><span>(key);
</span><span>        });
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Reset to defaults
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">reset</span><span>(&amp;</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">key</span><span>: &amp;</span><span style="color:#b48ead;">str</span><span>) {
</span><span>        </span><span style="color:#bf616a;">self</span><span>.settings.</span><span style="color:#96b5b4;">reset</span><span>(key);
</span><span>    }
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Bind setting to widget
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">bind_setting_to_widget</span><span>(</span><span style="color:#bf616a;">settings</span><span>: &amp;gio::Settings, </span><span style="color:#bf616a;">widget</span><span>: &amp;adwaita::SwitchRow) {
</span><span>    settings
</span><span>        .</span><span style="color:#96b5b4;">bind</span><span>(&quot;</span><span style="color:#a3be8c;">dark-mode</span><span>&quot;, widget, &quot;</span><span style="color:#a3be8c;">active</span><span>&quot;)
</span><span>        .</span><span style="color:#96b5b4;">build</span><span>();
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Settings with custom change handler
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">setup_settings_with_handler</span><span>(</span><span style="color:#bf616a;">settings</span><span>: &amp;gio::Settings) {
</span><span>    settings.</span><span style="color:#96b5b4;">connect_changed</span><span>(Some(&quot;</span><span style="color:#a3be8c;">theme</span><span>&quot;), |</span><span style="color:#bf616a;">settings</span><span>, </span><span style="color:#bf616a;">key</span><span>| {
</span><span>        </span><span style="color:#b48ead;">let</span><span> theme = settings.</span><span style="color:#96b5b4;">string</span><span>(key);
</span><span>        println!(&quot;</span><span style="color:#a3be8c;">Theme changed to: </span><span style="color:#d08770;">{}</span><span>&quot;, theme);
</span><span>        </span><span style="color:#65737e;">// Apply theme
</span><span>    });
</span><span>}
</span></code></pre>
<p><strong>Python Example</strong>:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">AppSettings</span><span style="color:#eff1f5;">:
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Application settings manager.&quot;&quot;&quot;
</span><span>    
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#96b5b4;">__init__</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">app_id</span><span>):
</span><span>        </span><span style="color:#bf616a;">self</span><span>.settings = Gio.Settings.</span><span style="color:#bf616a;">new</span><span>(app_id)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Boolean settings
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">get_dark_mode</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Get dark mode preference.&quot;&quot;&quot;
</span><span>        </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">self</span><span>.settings.</span><span style="color:#bf616a;">get_boolean</span><span>(&#39;</span><span style="color:#a3be8c;">dark-mode</span><span>&#39;)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">set_dark_mode</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">value</span><span>):
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Set dark mode preference.&quot;&quot;&quot;
</span><span>        </span><span style="color:#bf616a;">self</span><span>.settings.</span><span style="color:#bf616a;">set_boolean</span><span>(&#39;</span><span style="color:#a3be8c;">dark-mode</span><span>&#39;, value)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># String settings
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">get_theme</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Get theme preference.&quot;&quot;&quot;
</span><span>        </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">self</span><span>.settings.</span><span style="color:#bf616a;">get_string</span><span>(&#39;</span><span style="color:#a3be8c;">theme</span><span>&#39;)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">set_theme</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">value</span><span>):
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Set theme preference.&quot;&quot;&quot;
</span><span>        </span><span style="color:#bf616a;">self</span><span>.settings.</span><span style="color:#bf616a;">set_string</span><span>(&#39;</span><span style="color:#a3be8c;">theme</span><span>&#39;, value)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Integer settings
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">get_window_width</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Get window width.&quot;&quot;&quot;
</span><span>        </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">self</span><span>.settings.</span><span style="color:#bf616a;">get_int</span><span>(&#39;</span><span style="color:#a3be8c;">window-width</span><span>&#39;)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">set_window_width</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">value</span><span>):
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Set window width.&quot;&quot;&quot;
</span><span>        </span><span style="color:#bf616a;">self</span><span>.settings.</span><span style="color:#bf616a;">set_int</span><span>(&#39;</span><span style="color:#a3be8c;">window-width</span><span>&#39;, value)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Array settings
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">get_recent_files</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Get recent files list.&quot;&quot;&quot;
</span><span>        </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">self</span><span>.settings.</span><span style="color:#bf616a;">get_strv</span><span>(&#39;</span><span style="color:#a3be8c;">recent-files</span><span>&#39;)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">set_recent_files</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">files</span><span>):
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Set recent files list.&quot;&quot;&quot;
</span><span>        </span><span style="color:#bf616a;">self</span><span>.settings.</span><span style="color:#bf616a;">set_strv</span><span>(&#39;</span><span style="color:#a3be8c;">recent-files</span><span>&#39;, files)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Enum settings
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">get_sort_order</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Get sort order.&quot;&quot;&quot;
</span><span>        </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">self</span><span>.settings.</span><span style="color:#bf616a;">get_enum</span><span>(&#39;</span><span style="color:#a3be8c;">sort-order</span><span>&#39;)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">set_sort_order</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">value</span><span>):
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Set sort order.&quot;&quot;&quot;
</span><span>        </span><span style="color:#bf616a;">self</span><span>.settings.</span><span style="color:#bf616a;">set_enum</span><span>(&#39;</span><span style="color:#a3be8c;">sort-order</span><span>&#39;, value)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Listen to changes
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">connect_changed</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">key</span><span>, </span><span style="color:#bf616a;">callback</span><span>):
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Connect to setting change signal.&quot;&quot;&quot;
</span><span>        </span><span style="color:#bf616a;">self</span><span>.settings.</span><span style="color:#bf616a;">connect</span><span>(</span><span style="color:#b48ead;">f</span><span>&#39;</span><span style="color:#a3be8c;">changed::</span><span>{key}&#39;, 
</span><span>                            </span><span style="color:#b48ead;">lambda </span><span style="color:#bf616a;">settings</span><span>, </span><span style="color:#bf616a;">key</span><span>: </span><span style="color:#bf616a;">callback</span><span>(key))
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Reset to defaults
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">reset</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">key</span><span>):
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Reset setting to default.&quot;&quot;&quot;
</span><span>        </span><span style="color:#bf616a;">self</span><span>.settings.</span><span style="color:#bf616a;">reset</span><span>(key)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">bind_setting_to_widget</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">settings</span><span>, </span><span style="color:#bf616a;">widget</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Bind setting to widget.&quot;&quot;&quot;
</span><span>    settings.</span><span style="color:#bf616a;">bind</span><span>(&#39;</span><span style="color:#a3be8c;">dark-mode</span><span>&#39;, widget, &#39;</span><span style="color:#a3be8c;">active</span><span>&#39;,
</span><span>                  Gio.SettingsBindFlags.</span><span style="color:#bf616a;">DEFAULT</span><span>)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">setup_settings_with_handler</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">settings</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Setup settings with change handler.&quot;&quot;&quot;
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">on_theme_changed</span><span>(</span><span style="color:#bf616a;">settings</span><span>, </span><span style="color:#bf616a;">key</span><span>):
</span><span>        theme = settings.</span><span style="color:#bf616a;">get_string</span><span>(key)
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">Theme changed to: </span><span>{theme}&quot;)
</span><span>        </span><span style="color:#65737e;"># Apply theme
</span><span>    
</span><span>    settings.</span><span style="color:#bf616a;">connect</span><span>(&#39;</span><span style="color:#a3be8c;">changed::theme</span><span>&#39;, on_theme_changed)
</span></code></pre>
<h4 id="gsettings-schema-definition">GSettings Schema Definition</h4>
<p><strong>com.example.MyApp.gschema.xml</strong>:</p>
<pre data-lang="xml" style="background-color:#2b303b;color:#c0c5ce;" class="language-xml "><code class="language-xml" data-lang="xml"><span>&lt;?</span><span style="color:#bf616a;">xml </span><span style="color:#d08770;">version</span><span>=&quot;</span><span style="color:#a3be8c;">1.0</span><span>&quot; </span><span style="color:#d08770;">encoding</span><span>=&quot;</span><span style="color:#a3be8c;">UTF-8</span><span>&quot;?&gt;
</span><span>&lt;</span><span style="color:#bf616a;">schemalist</span><span>&gt;
</span><span>  &lt;</span><span style="color:#bf616a;">schema </span><span style="color:#d08770;">id</span><span>=&quot;</span><span style="color:#a3be8c;">com.example.MyApp</span><span>&quot; </span><span style="color:#d08770;">path</span><span>=&quot;</span><span style="color:#a3be8c;">/com/example/MyApp/</span><span>&quot;&gt;
</span><span>    </span><span style="color:#65737e;">&lt;!-- Boolean setting --&gt;
</span><span>    &lt;</span><span style="color:#bf616a;">key </span><span style="color:#d08770;">name</span><span>=&quot;</span><span style="color:#a3be8c;">dark-mode</span><span>&quot; </span><span style="color:#d08770;">type</span><span>=&quot;</span><span style="color:#a3be8c;">b</span><span>&quot;&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">default</span><span>&gt;false&lt;/</span><span style="color:#bf616a;">default</span><span>&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">summary</span><span>&gt;Dark mode&lt;/</span><span style="color:#bf616a;">summary</span><span>&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">description</span><span>&gt;Use dark color scheme&lt;/</span><span style="color:#bf616a;">description</span><span>&gt;
</span><span>    &lt;/</span><span style="color:#bf616a;">key</span><span>&gt;
</span><span>    
</span><span>    </span><span style="color:#65737e;">&lt;!-- String setting --&gt;
</span><span>    &lt;</span><span style="color:#bf616a;">key </span><span style="color:#d08770;">name</span><span>=&quot;</span><span style="color:#a3be8c;">theme</span><span>&quot; </span><span style="color:#d08770;">type</span><span>=&quot;</span><span style="color:#a3be8c;">s</span><span>&quot;&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">default</span><span>&gt;&quot;default&quot;&lt;/</span><span style="color:#bf616a;">default</span><span>&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">summary</span><span>&gt;Theme&lt;/</span><span style="color:#bf616a;">summary</span><span>&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">description</span><span>&gt;Application theme&lt;/</span><span style="color:#bf616a;">description</span><span>&gt;
</span><span>    &lt;/</span><span style="color:#bf616a;">key</span><span>&gt;
</span><span>    
</span><span>    </span><span style="color:#65737e;">&lt;!-- Integer setting --&gt;
</span><span>    &lt;</span><span style="color:#bf616a;">key </span><span style="color:#d08770;">name</span><span>=&quot;</span><span style="color:#a3be8c;">window-width</span><span>&quot; </span><span style="color:#d08770;">type</span><span>=&quot;</span><span style="color:#a3be8c;">i</span><span>&quot;&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">default</span><span>&gt;800&lt;/</span><span style="color:#bf616a;">default</span><span>&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">summary</span><span>&gt;Window width&lt;/</span><span style="color:#bf616a;">summary</span><span>&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">description</span><span>&gt;The width of the main window&lt;/</span><span style="color:#bf616a;">description</span><span>&gt;
</span><span>    &lt;/</span><span style="color:#bf616a;">key</span><span>&gt;
</span><span>    
</span><span>    &lt;</span><span style="color:#bf616a;">key </span><span style="color:#d08770;">name</span><span>=&quot;</span><span style="color:#a3be8c;">window-height</span><span>&quot; </span><span style="color:#d08770;">type</span><span>=&quot;</span><span style="color:#a3be8c;">i</span><span>&quot;&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">default</span><span>&gt;600&lt;/</span><span style="color:#bf616a;">default</span><span>&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">summary</span><span>&gt;Window height&lt;/</span><span style="color:#bf616a;">summary</span><span>&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">description</span><span>&gt;The height of the main window&lt;/</span><span style="color:#bf616a;">description</span><span>&gt;
</span><span>    &lt;/</span><span style="color:#bf616a;">key</span><span>&gt;
</span><span>    
</span><span>    </span><span style="color:#65737e;">&lt;!-- Array setting --&gt;
</span><span>    &lt;</span><span style="color:#bf616a;">key </span><span style="color:#d08770;">name</span><span>=&quot;</span><span style="color:#a3be8c;">recent-files</span><span>&quot; </span><span style="color:#d08770;">type</span><span>=&quot;</span><span style="color:#a3be8c;">as</span><span>&quot;&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">default</span><span>&gt;[]&lt;/</span><span style="color:#bf616a;">default</span><span>&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">summary</span><span>&gt;Recent files&lt;/</span><span style="color:#bf616a;">summary</span><span>&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">description</span><span>&gt;List of recently opened files&lt;/</span><span style="color:#bf616a;">description</span><span>&gt;
</span><span>    &lt;/</span><span style="color:#bf616a;">key</span><span>&gt;
</span><span>    
</span><span>    </span><span style="color:#65737e;">&lt;!-- Enum setting --&gt;
</span><span>    &lt;</span><span style="color:#bf616a;">key </span><span style="color:#d08770;">name</span><span>=&quot;</span><span style="color:#a3be8c;">sort-order</span><span>&quot; </span><span style="color:#d08770;">enum</span><span>=&quot;</span><span style="color:#a3be8c;">com.example.MyApp.SortOrder</span><span>&quot;&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">default</span><span>&gt;&#39;name&#39;&lt;/</span><span style="color:#bf616a;">default</span><span>&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">summary</span><span>&gt;Sort order&lt;/</span><span style="color:#bf616a;">summary</span><span>&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">description</span><span>&gt;How to sort items&lt;/</span><span style="color:#bf616a;">description</span><span>&gt;
</span><span>    &lt;/</span><span style="color:#bf616a;">key</span><span>&gt;
</span><span>    
</span><span>    </span><span style="color:#65737e;">&lt;!-- Double setting --&gt;
</span><span>    &lt;</span><span style="color:#bf616a;">key </span><span style="color:#d08770;">name</span><span>=&quot;</span><span style="color:#a3be8c;">zoom-level</span><span>&quot; </span><span style="color:#d08770;">type</span><span>=&quot;</span><span style="color:#a3be8c;">d</span><span>&quot;&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">default</span><span>&gt;1.0&lt;/</span><span style="color:#bf616a;">default</span><span>&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">summary</span><span>&gt;Zoom level&lt;/</span><span style="color:#bf616a;">summary</span><span>&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">description</span><span>&gt;Current zoom level&lt;/</span><span style="color:#bf616a;">description</span><span>&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">range </span><span style="color:#d08770;">min</span><span>=&quot;</span><span style="color:#a3be8c;">0.5</span><span>&quot; </span><span style="color:#d08770;">max</span><span>=&quot;</span><span style="color:#a3be8c;">3.0</span><span>&quot;/&gt;
</span><span>    &lt;/</span><span style="color:#bf616a;">key</span><span>&gt;
</span><span>  &lt;/</span><span style="color:#bf616a;">schema</span><span>&gt;
</span><span>  
</span><span>  </span><span style="color:#65737e;">&lt;!-- Enum definition --&gt;
</span><span>  &lt;</span><span style="color:#bf616a;">enum </span><span style="color:#d08770;">id</span><span>=&quot;</span><span style="color:#a3be8c;">com.example.MyApp.SortOrder</span><span>&quot;&gt;
</span><span>    &lt;</span><span style="color:#bf616a;">value </span><span style="color:#d08770;">nick</span><span>=&quot;</span><span style="color:#a3be8c;">name</span><span>&quot; </span><span style="color:#d08770;">value</span><span>=&quot;</span><span style="color:#a3be8c;">0</span><span>&quot;/&gt;
</span><span>    &lt;</span><span style="color:#bf616a;">value </span><span style="color:#d08770;">nick</span><span>=&quot;</span><span style="color:#a3be8c;">date</span><span>&quot; </span><span style="color:#d08770;">value</span><span>=&quot;</span><span style="color:#a3be8c;">1</span><span>&quot;/&gt;
</span><span>    &lt;</span><span style="color:#bf616a;">value </span><span style="color:#d08770;">nick</span><span>=&quot;</span><span style="color:#a3be8c;">size</span><span>&quot; </span><span style="color:#d08770;">value</span><span>=&quot;</span><span style="color:#a3be8c;">2</span><span>&quot;/&gt;
</span><span>  &lt;/</span><span style="color:#bf616a;">enum</span><span>&gt;
</span><span>&lt;/</span><span style="color:#bf616a;">schemalist</span><span>&gt;
</span></code></pre>
<h3 id="json-configuration-files">JSON Configuration Files</h3>
<p><strong>Rust Example</strong>:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">use </span><span>serde::{Deserialize, Serialize};
</span><span style="color:#b48ead;">use </span><span>std::fs;
</span><span style="color:#b48ead;">use </span><span>std::path::PathBuf;
</span><span>
</span><span>#[</span><span style="color:#bf616a;">derive</span><span>(Debug, Serialize, Deserialize, Default)]
</span><span style="color:#b48ead;">struct </span><span>AppConfig {
</span><span>    </span><span style="color:#bf616a;">version</span><span>: String,
</span><span>    </span><span style="color:#bf616a;">window</span><span>: WindowConfig,
</span><span>    </span><span style="color:#bf616a;">editor</span><span>: EditorConfig,
</span><span>}
</span><span>
</span><span>#[</span><span style="color:#bf616a;">derive</span><span>(Debug, Serialize, Deserialize)]
</span><span style="color:#b48ead;">struct </span><span>WindowConfig {
</span><span>    </span><span style="color:#bf616a;">width</span><span>: </span><span style="color:#b48ead;">i32</span><span>,
</span><span>    </span><span style="color:#bf616a;">height</span><span>: </span><span style="color:#b48ead;">i32</span><span>,
</span><span>    </span><span style="color:#bf616a;">maximized</span><span>: </span><span style="color:#b48ead;">bool</span><span>,
</span><span>}
</span><span>
</span><span style="color:#b48ead;">impl </span><span>Default </span><span style="color:#b48ead;">for </span><span>WindowConfig {
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">default</span><span>() -&gt; </span><span style="color:#b48ead;">Self </span><span>{
</span><span>        </span><span style="color:#b48ead;">Self </span><span>{
</span><span>            width: </span><span style="color:#d08770;">800</span><span>,
</span><span>            height: </span><span style="color:#d08770;">600</span><span>,
</span><span>            maximized: </span><span style="color:#d08770;">false</span><span>,
</span><span>        }
</span><span>    }
</span><span>}
</span><span>
</span><span>#[</span><span style="color:#bf616a;">derive</span><span>(Debug, Serialize, Deserialize)]
</span><span style="color:#b48ead;">struct </span><span>EditorConfig {
</span><span>    </span><span style="color:#bf616a;">font_size</span><span>: </span><span style="color:#b48ead;">i32</span><span>,
</span><span>    </span><span style="color:#bf616a;">show_line_numbers</span><span>: </span><span style="color:#b48ead;">bool</span><span>,
</span><span>    </span><span style="color:#bf616a;">theme</span><span>: String,
</span><span>}
</span><span>
</span><span style="color:#b48ead;">impl </span><span>Default </span><span style="color:#b48ead;">for </span><span>EditorConfig {
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">default</span><span>() -&gt; </span><span style="color:#b48ead;">Self </span><span>{
</span><span>        </span><span style="color:#b48ead;">Self </span><span>{
</span><span>            font_size: </span><span style="color:#d08770;">12</span><span>,
</span><span>            show_line_numbers: </span><span style="color:#d08770;">true</span><span>,
</span><span>            theme: &quot;</span><span style="color:#a3be8c;">default</span><span>&quot;.</span><span style="color:#96b5b4;">to_string</span><span>(),
</span><span>        }
</span><span>    }
</span><span>}
</span><span>
</span><span style="color:#b48ead;">impl </span><span>AppConfig {
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">config_path</span><span>() -&gt; PathBuf {
</span><span>        </span><span style="color:#b48ead;">let mut</span><span> path = glib::user_config_dir();
</span><span>        path.</span><span style="color:#96b5b4;">push</span><span>(&quot;</span><span style="color:#a3be8c;">my-app</span><span>&quot;);
</span><span>        path.</span><span style="color:#96b5b4;">push</span><span>(&quot;</span><span style="color:#a3be8c;">config.json</span><span>&quot;);
</span><span>        path
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">load</span><span>() -&gt; Result&lt;</span><span style="color:#b48ead;">Self</span><span>, String&gt; {
</span><span>        </span><span style="color:#b48ead;">let</span><span> path = </span><span style="color:#b48ead;">Self</span><span>::config_path();
</span><span>        
</span><span>        </span><span style="color:#b48ead;">if </span><span>!path.</span><span style="color:#96b5b4;">exists</span><span>() {
</span><span>            </span><span style="color:#b48ead;">return </span><span>Ok(</span><span style="color:#b48ead;">Self</span><span>::default());
</span><span>        }
</span><span>        
</span><span>        </span><span style="color:#b48ead;">let</span><span> content = fs::read_to_string(&amp;path)
</span><span>            .</span><span style="color:#96b5b4;">map_err</span><span>(|</span><span style="color:#bf616a;">e</span><span>| format!(&quot;</span><span style="color:#a3be8c;">Failed to read config: </span><span style="color:#d08770;">{}</span><span>&quot;, e))?;
</span><span>        
</span><span>        serde_json::from_str(&amp;content)
</span><span>            .</span><span style="color:#96b5b4;">map_err</span><span>(|</span><span style="color:#bf616a;">e</span><span>| format!(&quot;</span><span style="color:#a3be8c;">Failed to parse config: </span><span style="color:#d08770;">{}</span><span>&quot;, e))
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">save</span><span>(&amp;</span><span style="color:#bf616a;">self</span><span>) -&gt; Result&lt;(), String&gt; {
</span><span>        </span><span style="color:#b48ead;">let</span><span> path = </span><span style="color:#b48ead;">Self</span><span>::config_path();
</span><span>        
</span><span>        </span><span style="color:#65737e;">// Ensure directory exists
</span><span>        </span><span style="color:#b48ead;">if let </span><span>Some(parent) = path.</span><span style="color:#96b5b4;">parent</span><span>() {
</span><span>            fs::create_dir_all(parent)
</span><span>                .</span><span style="color:#96b5b4;">map_err</span><span>(|</span><span style="color:#bf616a;">e</span><span>| format!(&quot;</span><span style="color:#a3be8c;">Failed to create config dir: </span><span style="color:#d08770;">{}</span><span>&quot;, e))?;
</span><span>        }
</span><span>        
</span><span>        </span><span style="color:#b48ead;">let</span><span> content = serde_json::to_string_pretty(</span><span style="color:#bf616a;">self</span><span>)
</span><span>            .</span><span style="color:#96b5b4;">map_err</span><span>(|</span><span style="color:#bf616a;">e</span><span>| format!(&quot;</span><span style="color:#a3be8c;">Failed to serialize config: </span><span style="color:#d08770;">{}</span><span>&quot;, e))?;
</span><span>        
</span><span>        fs::write(&amp;path, content)
</span><span>            .</span><span style="color:#96b5b4;">map_err</span><span>(|</span><span style="color:#bf616a;">e</span><span>| format!(&quot;</span><span style="color:#a3be8c;">Failed to write config: </span><span style="color:#d08770;">{}</span><span>&quot;, e))
</span><span>    }
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Usage
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">config_example</span><span>() {
</span><span>    </span><span style="color:#65737e;">// Load config
</span><span>    </span><span style="color:#b48ead;">let mut</span><span> config = AppConfig::load().</span><span style="color:#96b5b4;">unwrap_or_default</span><span>();
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Modify
</span><span>    config.window.width = </span><span style="color:#d08770;">1024</span><span>;
</span><span>    config.editor.font_size = </span><span style="color:#d08770;">14</span><span>;
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Save
</span><span>    config.</span><span style="color:#96b5b4;">save</span><span>().</span><span style="color:#96b5b4;">ok</span><span>();
</span><span>}
</span></code></pre>
<p><strong>Python Example</strong>:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">import </span><span>json
</span><span style="color:#b48ead;">import </span><span>os
</span><span style="color:#b48ead;">from </span><span>pathlib </span><span style="color:#b48ead;">import </span><span>Path
</span><span style="color:#b48ead;">from </span><span>dataclasses </span><span style="color:#b48ead;">import </span><span>dataclass, asdict
</span><span>
</span><span>@</span><span style="color:#bf616a;">dataclass
</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">WindowConfig</span><span style="color:#eff1f5;">:
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Window configuration.&quot;&quot;&quot;
</span><span>    width: int = </span><span style="color:#d08770;">800
</span><span>    height: int = </span><span style="color:#d08770;">600
</span><span>    maximized: bool = </span><span style="color:#d08770;">False
</span><span>
</span><span>@</span><span style="color:#bf616a;">dataclass
</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">EditorConfig</span><span style="color:#eff1f5;">:
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Editor configuration.&quot;&quot;&quot;
</span><span>    font_size: int = </span><span style="color:#d08770;">12
</span><span>    show_line_numbers: bool = </span><span style="color:#d08770;">True
</span><span>    theme: str = &quot;</span><span style="color:#a3be8c;">default</span><span>&quot;
</span><span>
</span><span>@</span><span style="color:#bf616a;">dataclass
</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">AppConfig</span><span style="color:#eff1f5;">:
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Application configuration.&quot;&quot;&quot;
</span><span>    version: str = &quot;</span><span style="color:#a3be8c;">1.0</span><span>&quot;
</span><span>    window: WindowConfig = </span><span style="color:#d08770;">None
</span><span>    editor: EditorConfig = </span><span style="color:#d08770;">None
</span><span>    
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#96b5b4;">__post_init__</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>        </span><span style="color:#b48ead;">if </span><span style="color:#bf616a;">self</span><span>.window is </span><span style="color:#d08770;">None</span><span>:
</span><span>            </span><span style="color:#bf616a;">self</span><span>.window = </span><span style="color:#bf616a;">WindowConfig</span><span>()
</span><span>        </span><span style="color:#b48ead;">if </span><span style="color:#bf616a;">self</span><span>.editor is </span><span style="color:#d08770;">None</span><span>:
</span><span>            </span><span style="color:#bf616a;">self</span><span>.editor = </span><span style="color:#bf616a;">EditorConfig</span><span>()
</span><span>    
</span><span>    @</span><span style="color:#96b5b4;">staticmethod
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">config_path</span><span>():
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Get configuration file path.&quot;&quot;&quot;
</span><span>        config_dir = </span><span style="color:#bf616a;">Path</span><span>(GLib.</span><span style="color:#bf616a;">get_user_config_dir</span><span>()) / &quot;</span><span style="color:#a3be8c;">my-app</span><span>&quot;
</span><span>        </span><span style="color:#b48ead;">return </span><span>config_dir / &quot;</span><span style="color:#a3be8c;">config.json</span><span>&quot;
</span><span>    
</span><span>    @</span><span style="color:#96b5b4;">classmethod
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">load</span><span>(</span><span style="color:#bf616a;">cls</span><span>):
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Load configuration from file.&quot;&quot;&quot;
</span><span>        path = </span><span style="color:#bf616a;">cls</span><span>.</span><span style="color:#bf616a;">config_path</span><span>()
</span><span>        
</span><span>        </span><span style="color:#b48ead;">if </span><span>not path.</span><span style="color:#bf616a;">exists</span><span>():
</span><span>            </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">cls</span><span>()
</span><span>        
</span><span>        </span><span style="color:#b48ead;">try</span><span>:
</span><span>            </span><span style="color:#b48ead;">with </span><span style="color:#96b5b4;">open</span><span>(path, &#39;</span><span style="color:#a3be8c;">r</span><span>&#39;) </span><span style="color:#b48ead;">as </span><span>f:
</span><span>                data = json.</span><span style="color:#bf616a;">load</span><span>(f)
</span><span>            
</span><span>            </span><span style="color:#65737e;"># Convert nested dicts to dataclasses
</span><span>            </span><span style="color:#b48ead;">if </span><span>&#39;</span><span style="color:#a3be8c;">window</span><span>&#39; in data:
</span><span>                data[&#39;</span><span style="color:#a3be8c;">window</span><span>&#39;] = </span><span style="color:#bf616a;">WindowConfig</span><span>(**data[&#39;</span><span style="color:#a3be8c;">window</span><span>&#39;])
</span><span>            </span><span style="color:#b48ead;">if </span><span>&#39;</span><span style="color:#a3be8c;">editor</span><span>&#39; in data:
</span><span>                data[&#39;</span><span style="color:#a3be8c;">editor</span><span>&#39;] = </span><span style="color:#bf616a;">EditorConfig</span><span>(**data[&#39;</span><span style="color:#a3be8c;">editor</span><span>&#39;])
</span><span>            
</span><span>            </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">cls</span><span>(**data)
</span><span>        </span><span style="color:#b48ead;">except </span><span>Exception </span><span style="color:#b48ead;">as </span><span>e:
</span><span>            </span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">Failed to load config: </span><span>{e}&quot;)
</span><span>            </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">cls</span><span>()
</span><span>    
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">save</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Save configuration to file.&quot;&quot;&quot;
</span><span>        path = </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">config_path</span><span>()
</span><span>        
</span><span>        </span><span style="color:#65737e;"># Ensure directory exists
</span><span>        path.parent.</span><span style="color:#bf616a;">mkdir</span><span>(</span><span style="color:#bf616a;">parents</span><span>=</span><span style="color:#d08770;">True</span><span>, </span><span style="color:#bf616a;">exist_ok</span><span>=</span><span style="color:#d08770;">True</span><span>)
</span><span>        
</span><span>        </span><span style="color:#b48ead;">try</span><span>:
</span><span>            </span><span style="color:#65737e;"># Convert to dict
</span><span>            data = </span><span style="color:#bf616a;">asdict</span><span>(</span><span style="color:#bf616a;">self</span><span>)
</span><span>            
</span><span>            </span><span style="color:#b48ead;">with </span><span style="color:#96b5b4;">open</span><span>(path, &#39;</span><span style="color:#a3be8c;">w</span><span>&#39;) </span><span style="color:#b48ead;">as </span><span>f:
</span><span>                json.</span><span style="color:#bf616a;">dump</span><span>(data, f, </span><span style="color:#bf616a;">indent</span><span>=</span><span style="color:#d08770;">2</span><span>)
</span><span>        </span><span style="color:#b48ead;">except </span><span>Exception </span><span style="color:#b48ead;">as </span><span>e:
</span><span>            </span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">Failed to save config: </span><span>{e}&quot;)
</span><span>
</span><span style="color:#65737e;"># Usage
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">config_example</span><span>():
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Configuration usage example.&quot;&quot;&quot;
</span><span>    </span><span style="color:#65737e;"># Load config
</span><span>    config = AppConfig.</span><span style="color:#bf616a;">load</span><span>()
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Modify
</span><span>    config.window.width = </span><span style="color:#d08770;">1024
</span><span>    config.editor.font_size = </span><span style="color:#d08770;">14
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Save
</span><span>    config.</span><span style="color:#bf616a;">save</span><span>()
</span></code></pre>
<h3 id="sqlite-database">SQLite Database</h3>
<p><strong>Rust Example</strong>:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">use </span><span>rusqlite::{Connection, Result};
</span><span style="color:#b48ead;">use </span><span>std::path::PathBuf;
</span><span>
</span><span style="color:#b48ead;">struct </span><span>Database {
</span><span>    </span><span style="color:#bf616a;">conn</span><span>: Connection,
</span><span>}
</span><span>
</span><span style="color:#b48ead;">impl </span><span>Database {
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">new</span><span>() -&gt; Result&lt;</span><span style="color:#b48ead;">Self</span><span>&gt; {
</span><span>        </span><span style="color:#b48ead;">let mut</span><span> path = glib::user_data_dir();
</span><span>        path.</span><span style="color:#96b5b4;">push</span><span>(&quot;</span><span style="color:#a3be8c;">my-app</span><span>&quot;);
</span><span>        std::fs::create_dir_all(&amp;path).</span><span style="color:#96b5b4;">ok</span><span>();
</span><span>        path.</span><span style="color:#96b5b4;">push</span><span>(&quot;</span><span style="color:#a3be8c;">database.db</span><span>&quot;);
</span><span>        
</span><span>        </span><span style="color:#b48ead;">let</span><span> conn = Connection::open(path)?;
</span><span>        
</span><span>        </span><span style="color:#b48ead;">let</span><span> db = </span><span style="color:#b48ead;">Self </span><span>{ conn };
</span><span>        db.</span><span style="color:#96b5b4;">create_tables</span><span>()?;
</span><span>        Ok(db)
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_tables</span><span>(&amp;</span><span style="color:#bf616a;">self</span><span>) -&gt; Result&lt;()&gt; {
</span><span>        </span><span style="color:#bf616a;">self</span><span>.conn.</span><span style="color:#96b5b4;">execute</span><span>(
</span><span>            &quot;</span><span style="color:#a3be8c;">CREATE TABLE IF NOT EXISTS tasks (
</span><span style="color:#a3be8c;">                id INTEGER PRIMARY KEY,
</span><span style="color:#a3be8c;">                title TEXT NOT NULL,
</span><span style="color:#a3be8c;">                description TEXT,
</span><span style="color:#a3be8c;">                completed BOOLEAN NOT NULL DEFAULT 0,
</span><span style="color:#a3be8c;">                created_at INTEGER NOT NULL
</span><span style="color:#a3be8c;">            )</span><span>&quot;,
</span><span>            [],
</span><span>        )?;
</span><span>        Ok(())
</span><span>    }
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">add_task</span><span>(&amp;</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">title</span><span>: &amp;</span><span style="color:#b48ead;">str</span><span>, </span><span style="color:#bf616a;">description</span><span>: Option&lt;&amp;</span><span style="color:#b48ead;">str</span><span>&gt;) -&gt; Result&lt;</span><span style="color:#b48ead;">i64</span><span>&gt; {
</span><span>        </span><span style="color:#b48ead;">let</span><span> now = std::time::SystemTime::now()
</span><span>            .</span><span style="color:#96b5b4;">duration_since</span><span>(std::time::</span><span style="color:#d08770;">UNIX_EPOCH</span><span>)
</span><span>            .</span><span style="color:#96b5b4;">unwrap</span><span>()
</span><span>            .</span><span style="color:#96b5b4;">as_secs</span><span>() as </span><span style="color:#b48ead;">i64</span><span>;
</span><span>        
</span><span>        </span><span style="color:#bf616a;">self</span><span>.conn.</span><span style="color:#96b5b4;">execute</span><span>(
</span><span>            &quot;</span><span style="color:#a3be8c;">INSERT INTO tasks (title, description, completed, created_at) 
</span><span style="color:#a3be8c;">             VALUES (?1, ?2, 0, ?3)</span><span>&quot;,
</span><span>            (title, description, now),
</span><span>        )?;
</span><span>        
</span><span>        Ok(</span><span style="color:#bf616a;">self</span><span>.conn.</span><span style="color:#96b5b4;">last_insert_rowid</span><span>())
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">get_task</span><span>(&amp;</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">id</span><span>: </span><span style="color:#b48ead;">i64</span><span>) -&gt; Result&lt;Task&gt; {
</span><span>        </span><span style="color:#b48ead;">let mut</span><span> stmt = </span><span style="color:#bf616a;">self</span><span>.conn.</span><span style="color:#96b5b4;">prepare</span><span>(
</span><span>            &quot;</span><span style="color:#a3be8c;">SELECT id, title, description, completed, created_at 
</span><span style="color:#a3be8c;">             FROM tasks WHERE id = ?1</span><span>&quot;
</span><span>        )?;
</span><span>        
</span><span>        stmt.</span><span style="color:#96b5b4;">query_row</span><span>([id], |</span><span style="color:#bf616a;">row</span><span>| {
</span><span>            Ok(Task {
</span><span>                id: row.</span><span style="color:#96b5b4;">get</span><span>(</span><span style="color:#d08770;">0</span><span>)?,
</span><span>                title: row.</span><span style="color:#96b5b4;">get</span><span>(</span><span style="color:#d08770;">1</span><span>)?,
</span><span>                description: row.</span><span style="color:#96b5b4;">get</span><span>(</span><span style="color:#d08770;">2</span><span>)?,
</span><span>                completed: row.</span><span style="color:#96b5b4;">get</span><span>(</span><span style="color:#d08770;">3</span><span>)?,
</span><span>                created_at: row.</span><span style="color:#96b5b4;">get</span><span>(</span><span style="color:#d08770;">4</span><span>)?,
</span><span>            })
</span><span>        })
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">get_all_tasks</span><span>(&amp;</span><span style="color:#bf616a;">self</span><span>) -&gt; Result&lt;Vec&lt;Task&gt;&gt; {
</span><span>        </span><span style="color:#b48ead;">let mut</span><span> stmt = </span><span style="color:#bf616a;">self</span><span>.conn.</span><span style="color:#96b5b4;">prepare</span><span>(
</span><span>            &quot;</span><span style="color:#a3be8c;">SELECT id, title, description, completed, created_at 
</span><span style="color:#a3be8c;">             FROM tasks ORDER BY created_at DESC</span><span>&quot;
</span><span>        )?;
</span><span>        
</span><span>        </span><span style="color:#b48ead;">let</span><span> tasks = stmt.</span><span style="color:#96b5b4;">query_map</span><span>([], |</span><span style="color:#bf616a;">row</span><span>| {
</span><span>            Ok(Task {
</span><span>                id: row.</span><span style="color:#96b5b4;">get</span><span>(</span><span style="color:#d08770;">0</span><span>)?,
</span><span>                title: row.</span><span style="color:#96b5b4;">get</span><span>(</span><span style="color:#d08770;">1</span><span>)?,
</span><span>                description: row.</span><span style="color:#96b5b4;">get</span><span>(</span><span style="color:#d08770;">2</span><span>)?,
</span><span>                completed: row.</span><span style="color:#96b5b4;">get</span><span>(</span><span style="color:#d08770;">3</span><span>)?,
</span><span>                created_at: row.</span><span style="color:#96b5b4;">get</span><span>(</span><span style="color:#d08770;">4</span><span>)?,
</span><span>            })
</span><span>        })?;
</span><span>        
</span><span>        tasks.</span><span style="color:#96b5b4;">collect</span><span>()
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">update_task</span><span>(&amp;</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">id</span><span>: </span><span style="color:#b48ead;">i64</span><span>, </span><span style="color:#bf616a;">title</span><span>: &amp;</span><span style="color:#b48ead;">str</span><span>, </span><span style="color:#bf616a;">description</span><span>: Option&lt;&amp;</span><span style="color:#b48ead;">str</span><span>&gt;, </span><span style="color:#bf616a;">completed</span><span>: </span><span style="color:#b48ead;">bool</span><span>) -&gt; Result&lt;()&gt; {
</span><span>        </span><span style="color:#bf616a;">self</span><span>.conn.</span><span style="color:#96b5b4;">execute</span><span>(
</span><span>            &quot;</span><span style="color:#a3be8c;">UPDATE tasks SET title = ?1, description = ?2, completed = ?3 
</span><span style="color:#a3be8c;">             WHERE id = ?4</span><span>&quot;,
</span><span>            (title, description, completed, id),
</span><span>        )?;
</span><span>        Ok(())
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">delete_task</span><span>(&amp;</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">id</span><span>: </span><span style="color:#b48ead;">i64</span><span>) -&gt; Result&lt;()&gt; {
</span><span>        </span><span style="color:#bf616a;">self</span><span>.conn.</span><span style="color:#96b5b4;">execute</span><span>(&quot;</span><span style="color:#a3be8c;">DELETE FROM tasks WHERE id = ?1</span><span>&quot;, [id])?;
</span><span>        Ok(())
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">search_tasks</span><span>(&amp;</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">query</span><span>: &amp;</span><span style="color:#b48ead;">str</span><span>) -&gt; Result&lt;Vec&lt;Task&gt;&gt; {
</span><span>        </span><span style="color:#b48ead;">let mut</span><span> stmt = </span><span style="color:#bf616a;">self</span><span>.conn.</span><span style="color:#96b5b4;">prepare</span><span>(
</span><span>            &quot;</span><span style="color:#a3be8c;">SELECT id, title, description, completed, created_at 
</span><span style="color:#a3be8c;">             FROM tasks 
</span><span style="color:#a3be8c;">             WHERE title LIKE ?1 OR description LIKE ?1
</span><span style="color:#a3be8c;">             ORDER BY created_at DESC</span><span>&quot;
</span><span>        )?;
</span><span>        
</span><span>        </span><span style="color:#b48ead;">let</span><span> search_pattern = format!(&quot;</span><span style="color:#a3be8c;">%</span><span style="color:#d08770;">{}</span><span style="color:#a3be8c;">%</span><span>&quot;, query);
</span><span>        </span><span style="color:#b48ead;">let</span><span> tasks = stmt.</span><span style="color:#96b5b4;">query_map</span><span>([search_pattern], |</span><span style="color:#bf616a;">row</span><span>| {
</span><span>            Ok(Task {
</span><span>                id: row.</span><span style="color:#96b5b4;">get</span><span>(</span><span style="color:#d08770;">0</span><span>)?,
</span><span>                title: row.</span><span style="color:#96b5b4;">get</span><span>(</span><span style="color:#d08770;">1</span><span>)?,
</span><span>                description: row.</span><span style="color:#96b5b4;">get</span><span>(</span><span style="color:#d08770;">2</span><span>)?,
</span><span>                completed: row.</span><span style="color:#96b5b4;">get</span><span>(</span><span style="color:#d08770;">3</span><span>)?,
</span><span>                created_at: row.</span><span style="color:#96b5b4;">get</span><span>(</span><span style="color:#d08770;">4</span><span>)?,
</span><span>            })
</span><span>        })?;
</span><span>        
</span><span>        tasks.</span><span style="color:#96b5b4;">collect</span><span>()
</span><span>    }
</span><span>}
</span><span>
</span><span>#[</span><span style="color:#bf616a;">derive</span><span>(Debug, Clone)]
</span><span style="color:#b48ead;">struct </span><span>Task {
</span><span>    </span><span style="color:#bf616a;">id</span><span>: </span><span style="color:#b48ead;">i64</span><span>,
</span><span>    </span><span style="color:#bf616a;">title</span><span>: String,
</span><span>    </span><span style="color:#bf616a;">description</span><span>: Option&lt;String&gt;,
</span><span>    </span><span style="color:#bf616a;">completed</span><span>: </span><span style="color:#b48ead;">bool</span><span>,
</span><span>    </span><span style="color:#bf616a;">created_at</span><span>: </span><span style="color:#b48ead;">i64</span><span>,
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Usage
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">database_example</span><span>() {
</span><span>    </span><span style="color:#b48ead;">let</span><span> db = Database::new().</span><span style="color:#96b5b4;">unwrap</span><span>();
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Add task
</span><span>    </span><span style="color:#b48ead;">let</span><span> id = db.</span><span style="color:#96b5b4;">add_task</span><span>(&quot;</span><span style="color:#a3be8c;">Buy groceries</span><span>&quot;, Some(&quot;</span><span style="color:#a3be8c;">Milk, eggs, bread</span><span>&quot;)).</span><span style="color:#96b5b4;">unwrap</span><span>();
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Get task
</span><span>    </span><span style="color:#b48ead;">let</span><span> task = db.</span><span style="color:#96b5b4;">get_task</span><span>(id).</span><span style="color:#96b5b4;">unwrap</span><span>();
</span><span>    println!(&quot;</span><span style="color:#d08770;">{:?}</span><span>&quot;, task);
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Update task
</span><span>    db.</span><span style="color:#96b5b4;">update_task</span><span>(id, &quot;</span><span style="color:#a3be8c;">Buy groceries</span><span>&quot;, Some(&quot;</span><span style="color:#a3be8c;">Milk, eggs, bread, cheese</span><span>&quot;), </span><span style="color:#d08770;">true</span><span>).</span><span style="color:#96b5b4;">unwrap</span><span>();
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Get all tasks
</span><span>    </span><span style="color:#b48ead;">let</span><span> tasks = db.</span><span style="color:#96b5b4;">get_all_tasks</span><span>().</span><span style="color:#96b5b4;">unwrap</span><span>();
</span><span>    </span><span style="color:#b48ead;">for</span><span> task in tasks {
</span><span>        println!(&quot;</span><span style="color:#d08770;">{}</span><span style="color:#a3be8c;">: </span><span style="color:#d08770;">{}</span><span>&quot;, task.id, task.title);
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Search tasks
</span><span>    </span><span style="color:#b48ead;">let</span><span> results = db.</span><span style="color:#96b5b4;">search_tasks</span><span>(&quot;</span><span style="color:#a3be8c;">groceries</span><span>&quot;).</span><span style="color:#96b5b4;">unwrap</span><span>();
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Delete task
</span><span>    db.</span><span style="color:#96b5b4;">delete_task</span><span>(id).</span><span style="color:#96b5b4;">unwrap</span><span>();
</span><span>}
</span></code></pre>
<p><strong>Python Example</strong>:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">import </span><span>sqlite3
</span><span style="color:#b48ead;">from </span><span>pathlib </span><span style="color:#b48ead;">import </span><span>Path
</span><span style="color:#b48ead;">from </span><span>dataclasses </span><span style="color:#b48ead;">import </span><span>dataclass
</span><span style="color:#b48ead;">from </span><span>typing </span><span style="color:#b48ead;">import </span><span>Optional, List
</span><span style="color:#b48ead;">import </span><span>time
</span><span>
</span><span>@</span><span style="color:#bf616a;">dataclass
</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">Task</span><span style="color:#eff1f5;">:
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Task data class.&quot;&quot;&quot;
</span><span>    </span><span style="color:#96b5b4;">id</span><span>: int
</span><span>    title: str
</span><span>    description: Optional[str]
</span><span>    completed: bool
</span><span>    created_at: int
</span><span>
</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">Database</span><span style="color:#eff1f5;">:
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;SQLite database manager.&quot;&quot;&quot;
</span><span>    
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#96b5b4;">__init__</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Initialize database connection.&quot;&quot;&quot;
</span><span>        data_dir = </span><span style="color:#bf616a;">Path</span><span>(GLib.</span><span style="color:#bf616a;">get_user_data_dir</span><span>()) / &quot;</span><span style="color:#a3be8c;">my-app</span><span>&quot;
</span><span>        data_dir.</span><span style="color:#bf616a;">mkdir</span><span>(</span><span style="color:#bf616a;">parents</span><span>=</span><span style="color:#d08770;">True</span><span>, </span><span style="color:#bf616a;">exist_ok</span><span>=</span><span style="color:#d08770;">True</span><span>)
</span><span>        
</span><span>        db_path = data_dir / &quot;</span><span style="color:#a3be8c;">database.db</span><span>&quot;
</span><span>        </span><span style="color:#bf616a;">self</span><span>.conn = sqlite3.</span><span style="color:#bf616a;">connect</span><span>(</span><span style="color:#bf616a;">str</span><span>(db_path))
</span><span>        </span><span style="color:#bf616a;">self</span><span>.conn.row_factory = sqlite3.Row
</span><span>        </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">create_tables</span><span>()
</span><span>    
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_tables</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Create database tables.&quot;&quot;&quot;
</span><span>        </span><span style="color:#bf616a;">self</span><span>.conn.</span><span style="color:#bf616a;">execute</span><span>(&quot;&quot;&quot;
</span><span style="color:#a3be8c;">            </span><span style="color:#b48ead;">CREATE TABLE </span><span style="color:#a3be8c;">IF NOT EXISTS </span><span style="color:#8fa1b3;">tasks</span><span style="color:#a3be8c;"> (
</span><span style="color:#a3be8c;">                id </span><span style="color:#b48ead;">INTEGER PRIMARY KEY</span><span style="color:#a3be8c;">,
</span><span style="color:#a3be8c;">                title </span><span style="color:#b48ead;">TEXT </span><span>NOT </span><span style="color:#d08770;">NULL</span><span style="color:#a3be8c;">,
</span><span style="color:#a3be8c;">                description </span><span style="color:#b48ead;">TEXT</span><span style="color:#a3be8c;">,
</span><span style="color:#a3be8c;">                completed </span><span style="color:#b48ead;">BOOLEAN </span><span>NOT </span><span style="color:#d08770;">NULL </span><span style="color:#b48ead;">DEFAULT </span><span style="color:#d08770;">0</span><span style="color:#a3be8c;">,
</span><span style="color:#a3be8c;">                created_at </span><span style="color:#b48ead;">INTEGER </span><span>NOT </span><span style="color:#d08770;">NULL
</span><span style="color:#a3be8c;">            )
</span><span style="color:#a3be8c;">        </span><span>&quot;&quot;&quot;)
</span><span>        </span><span style="color:#bf616a;">self</span><span>.conn.</span><span style="color:#bf616a;">commit</span><span>()
</span><span>    
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">add_task</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">title</span><span>: str, </span><span style="color:#bf616a;">description</span><span>: Optional[str] = </span><span style="color:#d08770;">None</span><span>) -&gt; int:
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Add a new task.&quot;&quot;&quot;
</span><span>        now = </span><span style="color:#bf616a;">int</span><span>(time.</span><span style="color:#bf616a;">time</span><span>())
</span><span>        cursor = </span><span style="color:#bf616a;">self</span><span>.conn.</span><span style="color:#bf616a;">execute</span><span>(
</span><span>            &quot;</span><span style="color:#b48ead;">INSERT INTO</span><span style="color:#a3be8c;"> tasks (title, description, completed, created_at) </span><span>&quot;
</span><span>            &quot;</span><span style="color:#a3be8c;">VALUES (?, ?, 0, ?)</span><span>&quot;,
</span><span>            (title, description, now)
</span><span>        )
</span><span>        </span><span style="color:#bf616a;">self</span><span>.conn.</span><span style="color:#bf616a;">commit</span><span>()
</span><span>        </span><span style="color:#b48ead;">return </span><span>cursor.lastrowid
</span><span>    
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">get_task</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">task_id</span><span>: int) -&gt; Optional[Task]:
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Get a task by ID.&quot;&quot;&quot;
</span><span>        cursor = </span><span style="color:#bf616a;">self</span><span>.conn.</span><span style="color:#bf616a;">execute</span><span>(
</span><span>            &quot;</span><span style="color:#b48ead;">SELECT</span><span style="color:#a3be8c;"> id, title, description, completed, created_at </span><span>&quot;
</span><span>            &quot;</span><span style="color:#a3be8c;">FROM tasks WHERE id = ?</span><span>&quot;,
</span><span>            (task_id,)
</span><span>        )
</span><span>        row = cursor.</span><span style="color:#bf616a;">fetchone</span><span>()
</span><span>        </span><span style="color:#b48ead;">if </span><span>row:
</span><span>            </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">Task</span><span>(**</span><span style="color:#bf616a;">dict</span><span>(row))
</span><span>        </span><span style="color:#b48ead;">return </span><span style="color:#d08770;">None
</span><span>    
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">get_all_tasks</span><span>(</span><span style="color:#bf616a;">self</span><span>) -&gt; List[Task]:
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Get all tasks.&quot;&quot;&quot;
</span><span>        cursor = </span><span style="color:#bf616a;">self</span><span>.conn.</span><span style="color:#bf616a;">execute</span><span>(
</span><span>            &quot;</span><span style="color:#b48ead;">SELECT</span><span style="color:#a3be8c;"> id, title, description, completed, created_at </span><span>&quot;
</span><span>            &quot;</span><span style="color:#a3be8c;">FROM tasks ORDER BY created_at DESC</span><span>&quot;
</span><span>        )
</span><span>        </span><span style="color:#b48ead;">return </span><span>[</span><span style="color:#bf616a;">Task</span><span>(**</span><span style="color:#bf616a;">dict</span><span>(row)) </span><span style="color:#b48ead;">for </span><span>row </span><span style="color:#b48ead;">in </span><span>cursor.</span><span style="color:#bf616a;">fetchall</span><span>()]
</span><span>    
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">update_task</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">task_id</span><span>: int, </span><span style="color:#bf616a;">title</span><span>: str, 
</span><span>                   </span><span style="color:#bf616a;">description</span><span>: Optional[str], </span><span style="color:#bf616a;">completed</span><span>: bool):
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Update a task.&quot;&quot;&quot;
</span><span>        </span><span style="color:#bf616a;">self</span><span>.conn.</span><span style="color:#bf616a;">execute</span><span>(
</span><span>            &quot;</span><span style="color:#b48ead;">UPDATE</span><span style="color:#a3be8c;"> tasks </span><span style="color:#b48ead;">SET</span><span style="color:#a3be8c;"> title </span><span>=</span><span style="color:#a3be8c;"> ?, description </span><span>=</span><span style="color:#a3be8c;"> ?, completed </span><span>=</span><span style="color:#a3be8c;"> ? </span><span>&quot;
</span><span>            &quot;</span><span style="color:#a3be8c;">WHERE id = ?</span><span>&quot;,
</span><span>            (title, description, completed, task_id)
</span><span>        )
</span><span>        </span><span style="color:#bf616a;">self</span><span>.conn.</span><span style="color:#bf616a;">commit</span><span>()
</span><span>    
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">delete_task</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">task_id</span><span>: int):
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Delete a task.&quot;&quot;&quot;
</span><span>        </span><span style="color:#bf616a;">self</span><span>.conn.</span><span style="color:#bf616a;">execute</span><span>(&quot;</span><span style="color:#b48ead;">DELETE FROM</span><span style="color:#a3be8c;"> tasks </span><span style="color:#b48ead;">WHERE</span><span style="color:#a3be8c;"> id </span><span>=</span><span style="color:#a3be8c;"> ?</span><span>&quot;, (task_id,))
</span><span>        </span><span style="color:#bf616a;">self</span><span>.conn.</span><span style="color:#bf616a;">commit</span><span>()
</span><span>    
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">search_tasks</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">query</span><span>: str) -&gt; List[Task]:
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Search tasks by title or description.&quot;&quot;&quot;
</span><span>        search_pattern = </span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">%</span><span>{query}</span><span style="color:#a3be8c;">%</span><span>&quot;
</span><span>        cursor = </span><span style="color:#bf616a;">self</span><span>.conn.</span><span style="color:#bf616a;">execute</span><span>(
</span><span>            &quot;</span><span style="color:#b48ead;">SELECT</span><span style="color:#a3be8c;"> id, title, description, completed, created_at </span><span>&quot;
</span><span>            &quot;</span><span style="color:#a3be8c;">FROM tasks </span><span>&quot;
</span><span>            &quot;</span><span style="color:#a3be8c;">WHERE title LIKE ? OR description LIKE ? </span><span>&quot;
</span><span>            &quot;</span><span style="color:#a3be8c;">ORDER BY created_at DESC</span><span>&quot;,
</span><span>            (search_pattern, search_pattern)
</span><span>        )
</span><span>        </span><span style="color:#b48ead;">return </span><span>[</span><span style="color:#bf616a;">Task</span><span>(**</span><span style="color:#bf616a;">dict</span><span>(row)) </span><span style="color:#b48ead;">for </span><span>row </span><span style="color:#b48ead;">in </span><span>cursor.</span><span style="color:#bf616a;">fetchall</span><span>()]
</span><span>    
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">close</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Close database connection.&quot;&quot;&quot;
</span><span>        </span><span style="color:#bf616a;">self</span><span>.conn.</span><span style="color:#bf616a;">close</span><span>()
</span><span>
</span><span style="color:#65737e;"># Usage
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">database_example</span><span>():
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Database usage example.&quot;&quot;&quot;
</span><span>    db = </span><span style="color:#bf616a;">Database</span><span>()
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Add task
</span><span>    task_id = db.</span><span style="color:#bf616a;">add_task</span><span>(&quot;</span><span style="color:#a3be8c;">Buy groceries</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">Milk, eggs, bread</span><span>&quot;)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Get task
</span><span>    task = db.</span><span style="color:#bf616a;">get_task</span><span>(task_id)
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(task)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Update task
</span><span>    db.</span><span style="color:#bf616a;">update_task</span><span>(task_id, &quot;</span><span style="color:#a3be8c;">Buy groceries</span><span>&quot;, 
</span><span>                   &quot;</span><span style="color:#a3be8c;">Milk, eggs, bread, cheese</span><span>&quot;, </span><span style="color:#d08770;">True</span><span>)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Get all tasks
</span><span>    tasks = db.</span><span style="color:#bf616a;">get_all_tasks</span><span>()
</span><span>    </span><span style="color:#b48ead;">for </span><span>task </span><span style="color:#b48ead;">in </span><span>tasks:
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#b48ead;">f</span><span>&quot;{task.id}</span><span style="color:#a3be8c;">: </span><span>{task.title}&quot;)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Search tasks
</span><span>    results = db.</span><span style="color:#bf616a;">search_tasks</span><span>(&quot;</span><span style="color:#a3be8c;">groceries</span><span>&quot;)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Delete task
</span><span>    db.</span><span style="color:#bf616a;">delete_task</span><span>(task_id)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Close connection
</span><span>    db.</span><span style="color:#bf616a;">close</span><span>()
</span></code></pre>
<h3 id="file-management">File Management</h3>
<p><strong>Rust Example</strong>:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">use </span><span>gtk::gio;
</span><span style="color:#b48ead;">use </span><span>gtk::glib;
</span><span style="color:#b48ead;">use </span><span>std::path::PathBuf;
</span><span>
</span><span style="color:#b48ead;">struct </span><span>FileManager;
</span><span>
</span><span style="color:#b48ead;">impl </span><span>FileManager {
</span><span>    </span><span style="color:#65737e;">// Get standard directories
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">get_documents_dir</span><span>() -&gt; PathBuf {
</span><span>        glib::user_special_dir(glib::UserDirectory::Documents)
</span><span>            .</span><span style="color:#96b5b4;">unwrap_or_else</span><span>(|| glib::home_dir().</span><span style="color:#96b5b4;">join</span><span>(&quot;</span><span style="color:#a3be8c;">Documents</span><span>&quot;))
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">get_pictures_dir</span><span>() -&gt; PathBuf {
</span><span>        glib::user_special_dir(glib::UserDirectory::Pictures)
</span><span>            .</span><span style="color:#96b5b4;">unwrap_or_else</span><span>(|| glib::home_dir().</span><span style="color:#96b5b4;">join</span><span>(&quot;</span><span style="color:#a3be8c;">Pictures</span><span>&quot;))
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">get_downloads_dir</span><span>() -&gt; PathBuf {
</span><span>        glib::user_special_dir(glib::UserDirectory::Downloads)
</span><span>            .</span><span style="color:#96b5b4;">unwrap_or_else</span><span>(|| glib::home_dir().</span><span style="color:#96b5b4;">join</span><span>(&quot;</span><span style="color:#a3be8c;">Downloads</span><span>&quot;))
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Application directories
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">get_app_data_dir</span><span>(</span><span style="color:#bf616a;">app_id</span><span>: &amp;</span><span style="color:#b48ead;">str</span><span>) -&gt; PathBuf {
</span><span>        </span><span style="color:#b48ead;">let mut</span><span> path = glib::user_data_dir();
</span><span>        path.</span><span style="color:#96b5b4;">push</span><span>(app_id);
</span><span>        std::fs::create_dir_all(&amp;path).</span><span style="color:#96b5b4;">ok</span><span>();
</span><span>        path
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">get_app_config_dir</span><span>(</span><span style="color:#bf616a;">app_id</span><span>: &amp;</span><span style="color:#b48ead;">str</span><span>) -&gt; PathBuf {
</span><span>        </span><span style="color:#b48ead;">let mut</span><span> path = glib::user_config_dir();
</span><span>        path.</span><span style="color:#96b5b4;">push</span><span>(app_id);
</span><span>        std::fs::create_dir_all(&amp;path).</span><span style="color:#96b5b4;">ok</span><span>();
</span><span>        path
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">get_app_cache_dir</span><span>(</span><span style="color:#bf616a;">app_id</span><span>: &amp;</span><span style="color:#b48ead;">str</span><span>) -&gt; PathBuf {
</span><span>        </span><span style="color:#b48ead;">let mut</span><span> path = glib::user_cache_dir();
</span><span>        path.</span><span style="color:#96b5b4;">push</span><span>(app_id);
</span><span>        std::fs::create_dir_all(&amp;path).</span><span style="color:#96b5b4;">ok</span><span>();
</span><span>        path
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#65737e;">// File operations
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">read_file</span><span>(</span><span style="color:#bf616a;">path</span><span>: &amp;PathBuf) -&gt; Result&lt;String, String&gt; {
</span><span>        std::fs::read_to_string(path)
</span><span>            .</span><span style="color:#96b5b4;">map_err</span><span>(|</span><span style="color:#bf616a;">e</span><span>| format!(&quot;</span><span style="color:#a3be8c;">Failed to read file: </span><span style="color:#d08770;">{}</span><span>&quot;, e))
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">write_file</span><span>(</span><span style="color:#bf616a;">path</span><span>: &amp;PathBuf, </span><span style="color:#bf616a;">content</span><span>: &amp;</span><span style="color:#b48ead;">str</span><span>) -&gt; Result&lt;(), String&gt; {
</span><span>        </span><span style="color:#65737e;">// Ensure parent directory exists
</span><span>        </span><span style="color:#b48ead;">if let </span><span>Some(parent) = path.</span><span style="color:#96b5b4;">parent</span><span>() {
</span><span>            std::fs::create_dir_all(parent)
</span><span>                .</span><span style="color:#96b5b4;">map_err</span><span>(|</span><span style="color:#bf616a;">e</span><span>| format!(&quot;</span><span style="color:#a3be8c;">Failed to create directory: </span><span style="color:#d08770;">{}</span><span>&quot;, e))?;
</span><span>        }
</span><span>        
</span><span>        std::fs::write(path, content)
</span><span>            .</span><span style="color:#96b5b4;">map_err</span><span>(|</span><span style="color:#bf616a;">e</span><span>| format!(&quot;</span><span style="color:#a3be8c;">Failed to write file: </span><span style="color:#d08770;">{}</span><span>&quot;, e))
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">copy_file</span><span>(</span><span style="color:#bf616a;">from</span><span>: &amp;PathBuf, </span><span style="color:#bf616a;">to</span><span>: &amp;PathBuf) -&gt; Result&lt;(), String&gt; {
</span><span>        std::fs::copy(from, to)
</span><span>            .</span><span style="color:#96b5b4;">map</span><span>(|_| ())
</span><span>            .</span><span style="color:#96b5b4;">map_err</span><span>(|</span><span style="color:#bf616a;">e</span><span>| format!(&quot;</span><span style="color:#a3be8c;">Failed to copy file: </span><span style="color:#d08770;">{}</span><span>&quot;, e))
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">delete_file</span><span>(</span><span style="color:#bf616a;">path</span><span>: &amp;PathBuf) -&gt; Result&lt;(), String&gt; {
</span><span>        std::fs::remove_file(path)
</span><span>            .</span><span style="color:#96b5b4;">map_err</span><span>(|</span><span style="color:#bf616a;">e</span><span>| format!(&quot;</span><span style="color:#a3be8c;">Failed to delete file: </span><span style="color:#d08770;">{}</span><span>&quot;, e))
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">file_exists</span><span>(</span><span style="color:#bf616a;">path</span><span>: &amp;PathBuf) -&gt; </span><span style="color:#b48ead;">bool </span><span>{
</span><span>        path.</span><span style="color:#96b5b4;">exists</span><span>()
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Directory operations
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">list_directory</span><span>(</span><span style="color:#bf616a;">path</span><span>: &amp;PathBuf) -&gt; Result&lt;Vec&lt;PathBuf&gt;, String&gt; {
</span><span>        </span><span style="color:#b48ead;">let</span><span> entries = std::fs::read_dir(path)
</span><span>            .</span><span style="color:#96b5b4;">map_err</span><span>(|</span><span style="color:#bf616a;">e</span><span>| format!(&quot;</span><span style="color:#a3be8c;">Failed to read directory: </span><span style="color:#d08770;">{}</span><span>&quot;, e))?;
</span><span>        
</span><span>        </span><span style="color:#b48ead;">let mut</span><span> paths = Vec::new();
</span><span>        </span><span style="color:#b48ead;">for</span><span> entry in entries {
</span><span>            </span><span style="color:#b48ead;">if let </span><span>Ok(entry) = entry {
</span><span>                paths.</span><span style="color:#96b5b4;">push</span><span>(entry.</span><span style="color:#96b5b4;">path</span><span>());
</span><span>            }
</span><span>        }
</span><span>        
</span><span>        Ok(paths)
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">create_directory</span><span>(</span><span style="color:#bf616a;">path</span><span>: &amp;PathBuf) -&gt; Result&lt;(), String&gt; {
</span><span>        std::fs::create_dir_all(path)
</span><span>            .</span><span style="color:#96b5b4;">map_err</span><span>(|</span><span style="color:#bf616a;">e</span><span>| format!(&quot;</span><span style="color:#a3be8c;">Failed to create directory: </span><span style="color:#d08770;">{}</span><span>&quot;, e))
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Async file operations
</span><span>    async </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">read_file_async</span><span>(</span><span style="color:#bf616a;">path</span><span>: PathBuf) -&gt; Result&lt;String, String&gt; {
</span><span>        gio::spawn_blocking(</span><span style="color:#b48ead;">move </span><span>|| {
</span><span>            std::fs::read_to_string(&amp;path)
</span><span>                .</span><span style="color:#96b5b4;">map_err</span><span>(|</span><span style="color:#bf616a;">e</span><span>| format!(&quot;</span><span style="color:#a3be8c;">Failed to read file: </span><span style="color:#d08770;">{}</span><span>&quot;, e))
</span><span>        })
</span><span>        .await
</span><span>    }
</span><span>    
</span><span>    async </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">write_file_async</span><span>(</span><span style="color:#bf616a;">path</span><span>: PathBuf, </span><span style="color:#bf616a;">content</span><span>: String) -&gt; Result&lt;(), String&gt; {
</span><span>        gio::spawn_blocking(</span><span style="color:#b48ead;">move </span><span>|| {
</span><span>            </span><span style="color:#b48ead;">if let </span><span>Some(parent) = path.</span><span style="color:#96b5b4;">parent</span><span>() {
</span><span>                std::fs::create_dir_all(parent).</span><span style="color:#96b5b4;">ok</span><span>();
</span><span>            }
</span><span>            std::fs::write(&amp;path, content)
</span><span>                .</span><span style="color:#96b5b4;">map_err</span><span>(|</span><span style="color:#bf616a;">e</span><span>| format!(&quot;</span><span style="color:#a3be8c;">Failed to write file: </span><span style="color:#d08770;">{}</span><span>&quot;, e))
</span><span>        })
</span><span>        .await
</span><span>    }
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Usage
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">file_manager_example</span><span>() {
</span><span>    </span><span style="color:#b48ead;">let</span><span> app_id = &quot;</span><span style="color:#a3be8c;">com.example.MyApp</span><span>&quot;;
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Get directories
</span><span>    </span><span style="color:#b48ead;">let</span><span> data_dir = FileManager::get_app_data_dir(app_id);
</span><span>    </span><span style="color:#b48ead;">let</span><span> config_dir = FileManager::get_app_config_dir(app_id);
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Write file
</span><span>    </span><span style="color:#b48ead;">let</span><span> file_path = data_dir.</span><span style="color:#96b5b4;">join</span><span>(&quot;</span><span style="color:#a3be8c;">data.txt</span><span>&quot;);
</span><span>    FileManager::write_file(&amp;file_path, &quot;</span><span style="color:#a3be8c;">Hello, world!</span><span>&quot;).</span><span style="color:#96b5b4;">ok</span><span>();
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Read file
</span><span>    </span><span style="color:#b48ead;">if let </span><span>Ok(content) = FileManager::read_file(&amp;file_path) {
</span><span>        println!(&quot;</span><span style="color:#a3be8c;">Content: </span><span style="color:#d08770;">{}</span><span>&quot;, content);
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#65737e;">// List directory
</span><span>    </span><span style="color:#b48ead;">if let </span><span>Ok(entries) = FileManager::list_directory(&amp;data_dir) {
</span><span>        </span><span style="color:#b48ead;">for</span><span> entry in entries {
</span><span>            println!(&quot;</span><span style="color:#a3be8c;">File: </span><span style="color:#d08770;">{:?}</span><span>&quot;, entry);
</span><span>        }
</span><span>    }
</span><span>}
</span></code></pre>
<p><strong>Python Example</strong>:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">import </span><span>os
</span><span style="color:#b48ead;">from </span><span>pathlib </span><span style="color:#b48ead;">import </span><span>Path
</span><span style="color:#b48ead;">from </span><span>typing </span><span style="color:#b48ead;">import </span><span>List, Optional
</span><span>
</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">FileManager</span><span style="color:#eff1f5;">:
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;File management utilities.&quot;&quot;&quot;
</span><span>    
</span><span>    @</span><span style="color:#96b5b4;">staticmethod
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">get_documents_dir</span><span>() -&gt; Path:
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Get documents directory.&quot;&quot;&quot;
</span><span>        </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">Path</span><span>(GLib.</span><span style="color:#bf616a;">get_user_special_dir</span><span>(GLib.UserDirectory.</span><span style="color:#bf616a;">DIRECTORY_DOCUMENTS</span><span>) 
</span><span>                   or Path.</span><span style="color:#bf616a;">home</span><span>() / &quot;</span><span style="color:#a3be8c;">Documents</span><span>&quot;)
</span><span>    
</span><span>    @</span><span style="color:#96b5b4;">staticmethod
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">get_pictures_dir</span><span>() -&gt; Path:
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Get pictures directory.&quot;&quot;&quot;
</span><span>        </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">Path</span><span>(GLib.</span><span style="color:#bf616a;">get_user_special_dir</span><span>(GLib.UserDirectory.</span><span style="color:#bf616a;">DIRECTORY_PICTURES</span><span>)
</span><span>                   or Path.</span><span style="color:#bf616a;">home</span><span>() / &quot;</span><span style="color:#a3be8c;">Pictures</span><span>&quot;)
</span><span>    
</span><span>    @</span><span style="color:#96b5b4;">staticmethod
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">get_downloads_dir</span><span>() -&gt; Path:
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Get downloads directory.&quot;&quot;&quot;
</span><span>        </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">Path</span><span>(GLib.</span><span style="color:#bf616a;">get_user_special_dir</span><span>(GLib.UserDirectory.</span><span style="color:#bf616a;">DIRECTORY_DOWNLOAD</span><span>)
</span><span>                   or Path.</span><span style="color:#bf616a;">home</span><span>() / &quot;</span><span style="color:#a3be8c;">Downloads</span><span>&quot;)
</span><span>    
</span><span>    @</span><span style="color:#96b5b4;">staticmethod
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">get_app_data_dir</span><span>(</span><span style="color:#bf616a;">app_id</span><span>: str) -&gt; Path:
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Get application data directory.&quot;&quot;&quot;
</span><span>        path = </span><span style="color:#bf616a;">Path</span><span>(GLib.</span><span style="color:#bf616a;">get_user_data_dir</span><span>()) / app_id
</span><span>        path.</span><span style="color:#bf616a;">mkdir</span><span>(</span><span style="color:#bf616a;">parents</span><span>=</span><span style="color:#d08770;">True</span><span>, </span><span style="color:#bf616a;">exist_ok</span><span>=</span><span style="color:#d08770;">True</span><span>)
</span><span>        </span><span style="color:#b48ead;">return </span><span>path
</span><span>    
</span><span>    @</span><span style="color:#96b5b4;">staticmethod
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">get_app_config_dir</span><span>(</span><span style="color:#bf616a;">app_id</span><span>: str) -&gt; Path:
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Get application config directory.&quot;&quot;&quot;
</span><span>        path = </span><span style="color:#bf616a;">Path</span><span>(GLib.</span><span style="color:#bf616a;">get_user_config_dir</span><span>()) / app_id
</span><span>        path.</span><span style="color:#bf616a;">mkdir</span><span>(</span><span style="color:#bf616a;">parents</span><span>=</span><span style="color:#d08770;">True</span><span>, </span><span style="color:#bf616a;">exist_ok</span><span>=</span><span style="color:#d08770;">True</span><span>)
</span><span>        </span><span style="color:#b48ead;">return </span><span>path
</span><span>    
</span><span>    @</span><span style="color:#96b5b4;">staticmethod
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">get_app_cache_dir</span><span>(</span><span style="color:#bf616a;">app_id</span><span>: str) -&gt; Path:
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Get application cache directory.&quot;&quot;&quot;
</span><span>        path = </span><span style="color:#bf616a;">Path</span><span>(GLib.</span><span style="color:#bf616a;">get_user_cache_dir</span><span>()) / app_id
</span><span>        path.</span><span style="color:#bf616a;">mkdir</span><span>(</span><span style="color:#bf616a;">parents</span><span>=</span><span style="color:#d08770;">True</span><span>, </span><span style="color:#bf616a;">exist_ok</span><span>=</span><span style="color:#d08770;">True</span><span>)
</span><span>        </span><span style="color:#b48ead;">return </span><span>path
</span><span>    
</span><span>    @</span><span style="color:#96b5b4;">staticmethod
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">read_file</span><span>(</span><span style="color:#bf616a;">path</span><span>: Path) -&gt; str:
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Read file content.&quot;&quot;&quot;
</span><span>        </span><span style="color:#b48ead;">with </span><span style="color:#96b5b4;">open</span><span>(path, &#39;</span><span style="color:#a3be8c;">r</span><span>&#39;) </span><span style="color:#b48ead;">as </span><span>f:
</span><span>            </span><span style="color:#b48ead;">return </span><span>f.</span><span style="color:#bf616a;">read</span><span>()
</span><span>    
</span><span>    @</span><span style="color:#96b5b4;">staticmethod
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">write_file</span><span>(</span><span style="color:#bf616a;">path</span><span>: Path, </span><span style="color:#bf616a;">content</span><span>: str):
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Write content to file.&quot;&quot;&quot;
</span><span>        </span><span style="color:#65737e;"># Ensure parent directory exists
</span><span>        path.parent.</span><span style="color:#bf616a;">mkdir</span><span>(</span><span style="color:#bf616a;">parents</span><span>=</span><span style="color:#d08770;">True</span><span>, </span><span style="color:#bf616a;">exist_ok</span><span>=</span><span style="color:#d08770;">True</span><span>)
</span><span>        </span><span style="color:#b48ead;">with </span><span style="color:#96b5b4;">open</span><span>(path, &#39;</span><span style="color:#a3be8c;">w</span><span>&#39;) </span><span style="color:#b48ead;">as </span><span>f:
</span><span>            f.</span><span style="color:#bf616a;">write</span><span>(content)
</span><span>    
</span><span>    @</span><span style="color:#96b5b4;">staticmethod
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">copy_file</span><span>(</span><span style="color:#bf616a;">from_path</span><span>: Path, </span><span style="color:#bf616a;">to_path</span><span>: Path):
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Copy file.&quot;&quot;&quot;
</span><span>        </span><span style="color:#b48ead;">import </span><span>shutil
</span><span>        shutil.</span><span style="color:#bf616a;">copy2</span><span>(from_path, to_path)
</span><span>    
</span><span>    @</span><span style="color:#96b5b4;">staticmethod
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">delete_file</span><span>(</span><span style="color:#bf616a;">path</span><span>: Path):
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Delete file.&quot;&quot;&quot;
</span><span>        path.</span><span style="color:#bf616a;">unlink</span><span>()
</span><span>    
</span><span>    @</span><span style="color:#96b5b4;">staticmethod
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">file_exists</span><span>(</span><span style="color:#bf616a;">path</span><span>: Path) -&gt; bool:
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Check if file exists.&quot;&quot;&quot;
</span><span>        </span><span style="color:#b48ead;">return </span><span>path.</span><span style="color:#bf616a;">exists</span><span>()
</span><span>    
</span><span>    @</span><span style="color:#96b5b4;">staticmethod
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">list_directory</span><span>(</span><span style="color:#bf616a;">path</span><span>: Path) -&gt; List[Path]:
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;List directory contents.&quot;&quot;&quot;
</span><span>        </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">list</span><span>(path.</span><span style="color:#bf616a;">iterdir</span><span>())
</span><span>    
</span><span>    @</span><span style="color:#96b5b4;">staticmethod
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">create_directory</span><span>(</span><span style="color:#bf616a;">path</span><span>: Path):
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Create directory.&quot;&quot;&quot;
</span><span>        path.</span><span style="color:#bf616a;">mkdir</span><span>(</span><span style="color:#bf616a;">parents</span><span>=</span><span style="color:#d08770;">True</span><span>, </span><span style="color:#bf616a;">exist_ok</span><span>=</span><span style="color:#d08770;">True</span><span>)
</span><span>    
</span><span>    @</span><span style="color:#96b5b4;">staticmethod
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">read_file_async</span><span>(</span><span style="color:#bf616a;">path</span><span>: Path, </span><span style="color:#bf616a;">callback</span><span>):
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Read file asynchronously.&quot;&quot;&quot;
</span><span>        </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">task</span><span>():
</span><span>            </span><span style="color:#b48ead;">try</span><span>:
</span><span>                </span><span style="color:#b48ead;">with </span><span style="color:#96b5b4;">open</span><span>(path, &#39;</span><span style="color:#a3be8c;">r</span><span>&#39;) </span><span style="color:#b48ead;">as </span><span>f:
</span><span>                    </span><span style="color:#b48ead;">return </span><span>f.</span><span style="color:#bf616a;">read</span><span>()
</span><span>            </span><span style="color:#b48ead;">except </span><span>Exception </span><span style="color:#b48ead;">as </span><span>e:
</span><span>                </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">str</span><span>(e)
</span><span>        
</span><span>        </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">worker</span><span>():
</span><span>            result = </span><span style="color:#bf616a;">task</span><span>()
</span><span>            GLib.</span><span style="color:#bf616a;">idle_add</span><span>(callback, result)
</span><span>        
</span><span>        </span><span style="color:#b48ead;">import </span><span>threading
</span><span>        thread = threading.</span><span style="color:#bf616a;">Thread</span><span>(</span><span style="color:#bf616a;">target</span><span>=worker)
</span><span>        thread.daemon = </span><span style="color:#d08770;">True
</span><span>        thread.</span><span style="color:#bf616a;">start</span><span>()
</span><span>    
</span><span>    @</span><span style="color:#96b5b4;">staticmethod
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">write_file_async</span><span>(</span><span style="color:#bf616a;">path</span><span>: Path, </span><span style="color:#bf616a;">content</span><span>: str, </span><span style="color:#bf616a;">callback</span><span>):
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Write file asynchronously.&quot;&quot;&quot;
</span><span>        </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">task</span><span>():
</span><span>            </span><span style="color:#b48ead;">try</span><span>:
</span><span>                path.parent.</span><span style="color:#bf616a;">mkdir</span><span>(</span><span style="color:#bf616a;">parents</span><span>=</span><span style="color:#d08770;">True</span><span>, </span><span style="color:#bf616a;">exist_ok</span><span>=</span><span style="color:#d08770;">True</span><span>)
</span><span>                </span><span style="color:#b48ead;">with </span><span style="color:#96b5b4;">open</span><span>(path, &#39;</span><span style="color:#a3be8c;">w</span><span>&#39;) </span><span style="color:#b48ead;">as </span><span>f:
</span><span>                    f.</span><span style="color:#bf616a;">write</span><span>(content)
</span><span>                </span><span style="color:#b48ead;">return </span><span style="color:#d08770;">True
</span><span>            </span><span style="color:#b48ead;">except </span><span>Exception </span><span style="color:#b48ead;">as </span><span>e:
</span><span>                </span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">Error: </span><span>{e}&quot;)
</span><span>                </span><span style="color:#b48ead;">return </span><span style="color:#d08770;">False
</span><span>        
</span><span>        </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">worker</span><span>():
</span><span>            result = </span><span style="color:#bf616a;">task</span><span>()
</span><span>            GLib.</span><span style="color:#bf616a;">idle_add</span><span>(callback, result)
</span><span>        
</span><span>        </span><span style="color:#b48ead;">import </span><span>threading
</span><span>        thread = threading.</span><span style="color:#bf616a;">Thread</span><span>(</span><span style="color:#bf616a;">target</span><span>=worker)
</span><span>        thread.daemon = </span><span style="color:#d08770;">True
</span><span>        thread.</span><span style="color:#bf616a;">start</span><span>()
</span><span>
</span><span style="color:#65737e;"># Usage
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">file_manager_example</span><span>():
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;File manager usage example.&quot;&quot;&quot;
</span><span>    app_id = &quot;</span><span style="color:#a3be8c;">com.example.MyApp</span><span>&quot;
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Get directories
</span><span>    data_dir = FileManager.</span><span style="color:#bf616a;">get_app_data_dir</span><span>(app_id)
</span><span>    config_dir = FileManager.</span><span style="color:#bf616a;">get_app_config_dir</span><span>(app_id)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Write file
</span><span>    file_path = data_dir / &quot;</span><span style="color:#a3be8c;">data.txt</span><span>&quot;
</span><span>    FileManager.</span><span style="color:#bf616a;">write_file</span><span>(file_path, &quot;</span><span style="color:#a3be8c;">Hello, world!</span><span>&quot;)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Read file
</span><span>    content = FileManager.</span><span style="color:#bf616a;">read_file</span><span>(file_path)
</span><span>    </span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">Content: </span><span>{content}&quot;)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># List directory
</span><span>    entries = FileManager.</span><span style="color:#bf616a;">list_directory</span><span>(data_dir)
</span><span>    </span><span style="color:#b48ead;">for </span><span>entry </span><span style="color:#b48ead;">in </span><span>entries:
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">File: </span><span>{entry}&quot;)
</span></code></pre>
<h2 id="chapter-12-advanced-features">Chapter 12: Advanced Features</h2>
<h3 id="custom-widgets">Custom Widgets</h3>
<p><strong>Rust Example</strong>:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">use </span><span>gtk::glib;
</span><span style="color:#b48ead;">use </span><span>gtk::prelude::*;
</span><span style="color:#b48ead;">use </span><span>gtk::subclass::prelude::*;
</span><span>
</span><span style="color:#65737e;">// Custom widget implementation
</span><span style="color:#b48ead;">mod </span><span>imp {
</span><span>    </span><span style="color:#b48ead;">use super</span><span>::*;
</span><span>    </span><span style="color:#b48ead;">use </span><span>std::cell::RefCell;
</span><span>
</span><span>    #[</span><span style="color:#bf616a;">derive</span><span>(Default)]
</span><span>    </span><span style="color:#b48ead;">pub struct </span><span>ColorButton {
</span><span>        </span><span style="color:#b48ead;">pub </span><span style="color:#bf616a;">color</span><span>: RefCell&lt;gtk::gdk::RGBA&gt;,
</span><span>    }
</span><span>
</span><span>    #[</span><span style="color:#bf616a;">glib</span><span>::</span><span style="color:#bf616a;">object_subclass</span><span>]
</span><span>    </span><span style="color:#b48ead;">impl </span><span>ObjectSubclass </span><span style="color:#b48ead;">for </span><span>ColorButton {
</span><span>        </span><span style="color:#b48ead;">const </span><span style="color:#d08770;">NAME</span><span>: &amp;</span><span style="color:#b48ead;">&#39;static str </span><span>= &quot;</span><span style="color:#a3be8c;">MyColorButton</span><span>&quot;;
</span><span>        </span><span style="color:#b48ead;">type </span><span>Type = </span><span style="color:#b48ead;">super</span><span>::ColorButton;
</span><span>        </span><span style="color:#b48ead;">type </span><span>ParentType = gtk::Button;
</span><span>    }
</span><span>
</span><span>    </span><span style="color:#b48ead;">impl </span><span>ObjectImpl </span><span style="color:#b48ead;">for </span><span>ColorButton {
</span><span>        </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">constructed</span><span>(&amp;</span><span style="color:#bf616a;">self</span><span>) {
</span><span>            </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#96b5b4;">parent_constructed</span><span>();
</span><span>            
</span><span>            </span><span style="color:#b48ead;">let</span><span> obj = </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#96b5b4;">obj</span><span>();
</span><span>            obj.</span><span style="color:#96b5b4;">set_size_request</span><span>(</span><span style="color:#d08770;">40</span><span>, </span><span style="color:#d08770;">40</span><span>);
</span><span>            obj.</span><span style="color:#96b5b4;">add_css_class</span><span>(&quot;</span><span style="color:#a3be8c;">color-button</span><span>&quot;);
</span><span>            
</span><span>            </span><span style="color:#65737e;">// Update button appearance
</span><span>            </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#96b5b4;">update_color_display</span><span>();
</span><span>        }
</span><span>        
</span><span>        </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">properties</span><span>() -&gt; &amp;</span><span style="color:#b48ead;">&#39;static </span><span>[glib::ParamSpec] {
</span><span>            </span><span style="color:#b48ead;">use </span><span>once_cell::sync::Lazy;
</span><span>            </span><span style="color:#b48ead;">static </span><span style="color:#d08770;">PROPERTIES</span><span>: Lazy&lt;Vec&lt;glib::ParamSpec&gt;&gt; = Lazy::new(|| {
</span><span>                vec![
</span><span>                    glib::ParamSpecBoxed::builder::&lt;gtk::gdk::RGBA&gt;(&quot;</span><span style="color:#a3be8c;">color</span><span>&quot;)
</span><span>                        .</span><span style="color:#96b5b4;">build</span><span>(),
</span><span>                ]
</span><span>            });
</span><span>            </span><span style="color:#d08770;">PROPERTIES</span><span>.</span><span style="color:#96b5b4;">as_ref</span><span>()
</span><span>        }
</span><span>        
</span><span>        </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">property</span><span>(&amp;</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">_id</span><span>: </span><span style="color:#b48ead;">usize</span><span>, </span><span style="color:#bf616a;">pspec</span><span>: &amp;glib::ParamSpec) -&gt; glib::Value {
</span><span>            </span><span style="color:#b48ead;">match</span><span> pspec.</span><span style="color:#96b5b4;">name</span><span>() {
</span><span>                &quot;</span><span style="color:#a3be8c;">color</span><span>&quot; =&gt; </span><span style="color:#bf616a;">self</span><span>.color.</span><span style="color:#96b5b4;">borrow</span><span>().</span><span style="color:#96b5b4;">to_value</span><span>(),
</span><span>                _ =&gt; unimplemented!(),
</span><span>            }
</span><span>        }
</span><span>        
</span><span>        </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">set_property</span><span>(&amp;</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">_id</span><span>: </span><span style="color:#b48ead;">usize</span><span>, </span><span style="color:#bf616a;">value</span><span>: &amp;glib::Value, </span><span style="color:#bf616a;">pspec</span><span>: &amp;glib::ParamSpec) {
</span><span>            </span><span style="color:#b48ead;">match</span><span> pspec.</span><span style="color:#96b5b4;">name</span><span>() {
</span><span>                &quot;</span><span style="color:#a3be8c;">color</span><span>&quot; =&gt; {
</span><span>                    </span><span style="color:#b48ead;">let</span><span> color = value.</span><span style="color:#96b5b4;">get</span><span>().</span><span style="color:#96b5b4;">unwrap</span><span>();
</span><span>                    </span><span style="color:#bf616a;">self</span><span>.color.</span><span style="color:#96b5b4;">replace</span><span>(color);
</span><span>                    </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#96b5b4;">update_color_display</span><span>();
</span><span>                }
</span><span>                _ =&gt; unimplemented!(),
</span><span>            }
</span><span>        }
</span><span>    }
</span><span>
</span><span>    </span><span style="color:#b48ead;">impl </span><span>WidgetImpl </span><span style="color:#b48ead;">for </span><span>ColorButton {}
</span><span>    </span><span style="color:#b48ead;">impl </span><span>ButtonImpl </span><span style="color:#b48ead;">for </span><span>ColorButton {}
</span><span>
</span><span>    </span><span style="color:#b48ead;">impl </span><span>ColorButton {
</span><span>        </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">update_color_display</span><span>(&amp;</span><span style="color:#bf616a;">self</span><span>) {
</span><span>            </span><span style="color:#b48ead;">let</span><span> obj = </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#96b5b4;">obj</span><span>();
</span><span>            </span><span style="color:#b48ead;">let</span><span> color = </span><span style="color:#bf616a;">self</span><span>.color.</span><span style="color:#96b5b4;">borrow</span><span>();
</span><span>            
</span><span>            </span><span style="color:#b48ead;">let</span><span> css = format!(
</span><span>                &quot;</span><span style="color:#a3be8c;">button.color-button </span><span style="color:#96b5b4;">{{</span><span style="color:#a3be8c;"> background-color: rgba(</span><span style="color:#d08770;">{}</span><span style="color:#a3be8c;">,</span><span style="color:#d08770;">{}</span><span style="color:#a3be8c;">,</span><span style="color:#d08770;">{}</span><span style="color:#a3be8c;">,</span><span style="color:#d08770;">{}</span><span style="color:#a3be8c;">); </span><span style="color:#96b5b4;">}}</span><span>&quot;,
</span><span>                (color.</span><span style="color:#96b5b4;">red</span><span>() * </span><span style="color:#d08770;">255.0</span><span>) as </span><span style="color:#b48ead;">u8</span><span>,
</span><span>                (color.</span><span style="color:#96b5b4;">green</span><span>() * </span><span style="color:#d08770;">255.0</span><span>) as </span><span style="color:#b48ead;">u8</span><span>,
</span><span>                (color.</span><span style="color:#96b5b4;">blue</span><span>() * </span><span style="color:#d08770;">255.0</span><span>) as </span><span style="color:#b48ead;">u8</span><span>,
</span><span>                color.</span><span style="color:#96b5b4;">alpha</span><span>()
</span><span>            );
</span><span>            
</span><span>            </span><span style="color:#b48ead;">let</span><span> provider = gtk::CssProvider::new();
</span><span>            provider.</span><span style="color:#96b5b4;">load_from_string</span><span>(&amp;css);
</span><span>            
</span><span>            obj.</span><span style="color:#96b5b4;">style_context</span><span>().</span><span style="color:#96b5b4;">add_provider</span><span>(
</span><span>                &amp;provider,
</span><span>                gtk::</span><span style="color:#d08770;">STYLE_PROVIDER_PRIORITY_APPLICATION</span><span>,
</span><span>            );
</span><span>        }
</span><span>    }
</span><span>}
</span><span>
</span><span>glib::wrapper! {
</span><span>    </span><span style="color:#b48ead;">pub struct </span><span>ColorButton(ObjectSubclass&lt;imp::ColorButton&gt;)
</span><span>        @extends gtk::Button, gtk::Widget,
</span><span>        @implements gtk::Accessible, gtk::Actionable, gtk::Buildable;
</span><span>}
</span><span>
</span><span style="color:#b48ead;">impl </span><span>ColorButton {
</span><span>    </span><span style="color:#b48ead;">pub fn </span><span style="color:#8fa1b3;">new</span><span>() -&gt; </span><span style="color:#b48ead;">Self </span><span>{
</span><span>        glib::Object::new()
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#b48ead;">pub fn </span><span style="color:#8fa1b3;">with_color</span><span>(</span><span style="color:#bf616a;">color</span><span>: &amp;gtk::gdk::RGBA) -&gt; </span><span style="color:#b48ead;">Self </span><span>{
</span><span>        glib::Object::builder()
</span><span>            .</span><span style="color:#96b5b4;">property</span><span>(&quot;</span><span style="color:#a3be8c;">color</span><span>&quot;, color)
</span><span>            .</span><span style="color:#96b5b4;">build</span><span>()
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#b48ead;">pub fn </span><span style="color:#8fa1b3;">color</span><span>(&amp;</span><span style="color:#bf616a;">self</span><span>) -&gt; gtk::gdk::RGBA {
</span><span>        </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#96b5b4;">property</span><span>(&quot;</span><span style="color:#a3be8c;">color</span><span>&quot;)
</span><span>    }
</span><span>    
</span><span>    </span><span style="color:#b48ead;">pub fn </span><span style="color:#8fa1b3;">set_color</span><span>(&amp;</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">color</span><span>: &amp;gtk::gdk::RGBA) {
</span><span>        </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#96b5b4;">set_property</span><span>(&quot;</span><span style="color:#a3be8c;">color</span><span>&quot;, color);
</span><span>    }
</span><span>}
</span><span>
</span><span style="color:#b48ead;">impl </span><span>Default </span><span style="color:#b48ead;">for </span><span>ColorButton {
</span><span>    </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">default</span><span>() -&gt; </span><span style="color:#b48ead;">Self </span><span>{
</span><span>        </span><span style="color:#b48ead;">Self</span><span>::new()
</span><span>    }
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Usage
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">custom_widget_example</span><span>() {
</span><span>    </span><span style="color:#b48ead;">let</span><span> color_button = ColorButton::new();
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> red = gtk::gdk::</span><span style="color:#d08770;">RGBA</span><span>::new(</span><span style="color:#d08770;">1.0</span><span>, </span><span style="color:#d08770;">0.0</span><span>, </span><span style="color:#d08770;">0.0</span><span>, </span><span style="color:#d08770;">1.0</span><span>);
</span><span>    color_button.</span><span style="color:#96b5b4;">set_color</span><span>(&amp;red);
</span><span>    
</span><span>    color_button.</span><span style="color:#96b5b4;">connect_clicked</span><span>(|</span><span style="color:#bf616a;">button</span><span>| {
</span><span>        </span><span style="color:#b48ead;">let</span><span> dialog = gtk::ColorDialog::new();
</span><span>        dialog.</span><span style="color:#96b5b4;">choose_rgba</span><span>(
</span><span>            Some(&amp;button.</span><span style="color:#96b5b4;">root</span><span>().</span><span style="color:#96b5b4;">unwrap</span><span>().downcast::&lt;gtk::Window&gt;().</span><span style="color:#96b5b4;">unwrap</span><span>()),
</span><span>            Some(&amp;button.</span><span style="color:#96b5b4;">color</span><span>()),
</span><span>            None::&lt;&amp;gio::Cancellable&gt;,
</span><span>            glib::clone!(
</span><span>                #[</span><span style="color:#bf616a;">weak</span><span>]
</span><span>                button,
</span><span>                </span><span style="color:#b48ead;">move </span><span>|result| {
</span><span>                    </span><span style="color:#b48ead;">if let </span><span>Ok(color) = result {
</span><span>                        button.</span><span style="color:#96b5b4;">set_color</span><span>(&amp;color);
</span><span>                    }
</span><span>                }
</span><span>            ),
</span><span>        );
</span><span>    });
</span><span>}
</span></code></pre>
<p><strong>Python Example</strong>:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">from </span><span>gi.repository </span><span style="color:#b48ead;">import </span><span>Gtk, Gdk, GObject
</span><span>
</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">ColorButton</span><span style="color:#eff1f5;">(</span><span style="color:#a3be8c;">Gtk.Button</span><span style="color:#eff1f5;">):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Custom color button widget.&quot;&quot;&quot;
</span><span>    
</span><span>    __gtype_name__ = &#39;</span><span style="color:#a3be8c;">ColorButton</span><span>&#39;
</span><span>    
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#96b5b4;">__init__</span><span>(</span><span style="color:#bf616a;">self</span><span>, **</span><span style="color:#bf616a;">kwargs</span><span>):
</span><span>        </span><span style="color:#96b5b4;">super</span><span>().</span><span style="color:#96b5b4;">__init__</span><span>(**kwargs)
</span><span>        </span><span style="color:#bf616a;">self</span><span>._color = Gdk.</span><span style="color:#bf616a;">RGBA</span><span>()
</span><span>        </span><span style="color:#bf616a;">self</span><span>._color.</span><span style="color:#bf616a;">parse</span><span>(&quot;</span><span style="color:#a3be8c;">red</span><span>&quot;)
</span><span>        
</span><span>        </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">set_size_request</span><span>(</span><span style="color:#d08770;">40</span><span>, </span><span style="color:#d08770;">40</span><span>)
</span><span>        </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">add_css_class</span><span>(&quot;</span><span style="color:#a3be8c;">color-button</span><span>&quot;)
</span><span>        
</span><span>        </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">connect</span><span>(&#39;</span><span style="color:#a3be8c;">clicked</span><span>&#39;, </span><span style="color:#bf616a;">self</span><span>.on_clicked)
</span><span>        </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">update_color_display</span><span>()
</span><span>    
</span><span>    @GObject.</span><span style="color:#bf616a;">Property</span><span>(</span><span style="color:#bf616a;">type</span><span>=Gdk.</span><span style="color:#bf616a;">RGBA</span><span>)
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">color</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Get current color.&quot;&quot;&quot;
</span><span>        </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">self</span><span>._color
</span><span>    
</span><span>    @color.</span><span style="color:#bf616a;">setter
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">color</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">value</span><span>):
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Set color.&quot;&quot;&quot;
</span><span>        </span><span style="color:#bf616a;">self</span><span>._color = value
</span><span>        </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">update_color_display</span><span>()
</span><span>    
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">update_color_display</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Update button appearance with current color.&quot;&quot;&quot;
</span><span>        css = </span><span style="color:#b48ead;">f</span><span>&quot;&quot;&quot;
</span><span style="color:#a3be8c;">        button.color-button </span><span style="color:#96b5b4;">{{
</span><span style="color:#a3be8c;">            background-color: rgba(</span><span>{</span><span style="color:#bf616a;">int</span><span>(</span><span style="color:#bf616a;">self</span><span>._color.red * </span><span style="color:#d08770;">255</span><span>)}</span><span style="color:#a3be8c;">,
</span><span style="color:#a3be8c;">                                 </span><span>{</span><span style="color:#bf616a;">int</span><span>(</span><span style="color:#bf616a;">self</span><span>._color.green * </span><span style="color:#d08770;">255</span><span>)}</span><span style="color:#a3be8c;">,
</span><span style="color:#a3be8c;">                                 </span><span>{</span><span style="color:#bf616a;">int</span><span>(</span><span style="color:#bf616a;">self</span><span>._color.blue * </span><span style="color:#d08770;">255</span><span>)}</span><span style="color:#a3be8c;">,
</span><span style="color:#a3be8c;">                                 </span><span>{</span><span style="color:#bf616a;">self</span><span>._color.alpha}</span><span style="color:#a3be8c;">);
</span><span style="color:#a3be8c;">        </span><span style="color:#96b5b4;">}}
</span><span style="color:#a3be8c;">        </span><span>&quot;&quot;&quot;
</span><span>        
</span><span>        provider = Gtk.</span><span style="color:#bf616a;">CssProvider</span><span>()
</span><span>        provider.</span><span style="color:#bf616a;">load_from_string</span><span>(css)
</span><span>        
</span><span>        </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">get_style_context</span><span>().</span><span style="color:#bf616a;">add_provider</span><span>(
</span><span>            provider,
</span><span>            Gtk.</span><span style="color:#bf616a;">STYLE_PROVIDER_PRIORITY_APPLICATION
</span><span>        )
</span><span>    
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">on_clicked</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">button</span><span>):
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Handle button click.&quot;&quot;&quot;
</span><span>        dialog = Gtk.</span><span style="color:#bf616a;">ColorDialog</span><span>()
</span><span>        dialog.</span><span style="color:#bf616a;">choose_rgba</span><span>(
</span><span>            </span><span style="color:#bf616a;">self</span><span>.</span><span style="color:#bf616a;">get_root</span><span>(),
</span><span>            </span><span style="color:#bf616a;">self</span><span>._color,
</span><span>            </span><span style="color:#d08770;">None</span><span>,
</span><span>            </span><span style="color:#bf616a;">self</span><span>.on_color_chosen
</span><span>        )
</span><span>    
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">on_color_chosen</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">dialog</span><span>, </span><span style="color:#bf616a;">result</span><span>):
</span><span>        </span><span style="color:#65737e;">&quot;&quot;&quot;Handle color chosen.&quot;&quot;&quot;
</span><span>        </span><span style="color:#b48ead;">try</span><span>:
</span><span>            color = dialog.</span><span style="color:#bf616a;">choose_rgba_finish</span><span>(result)
</span><span>            </span><span style="color:#bf616a;">self</span><span>.color = color
</span><span>        </span><span style="color:#b48ead;">except </span><span>Exception </span><span style="color:#b48ead;">as </span><span>e:
</span><span>            </span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">Color selection cancelled: </span><span>{e}&quot;)
</span><span>
</span><span style="color:#65737e;"># Usage
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">custom_widget_example</span><span>():
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Custom widget usage example.&quot;&quot;&quot;
</span><span>    color_button = </span><span style="color:#bf616a;">ColorButton</span><span>()
</span><span>    
</span><span>    red = Gdk.</span><span style="color:#bf616a;">RGBA</span><span>()
</span><span>    red.</span><span style="color:#bf616a;">parse</span><span>(&quot;</span><span style="color:#a3be8c;">red</span><span>&quot;)
</span><span>    color_button.color = red
</span></code></pre>
<h3 id="drag-and-drop">Drag and Drop</h3>
<p><strong>Rust Example</strong>:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">use </span><span>gtk::gdk;
</span><span style="color:#b48ead;">use </span><span>gtk::gio;
</span><span style="color:#b48ead;">use </span><span>gtk::glib;
</span><span style="color:#b48ead;">use </span><span>gtk::prelude::*;
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">setup_drag_source</span><span>(</span><span style="color:#bf616a;">widget</span><span>: &amp;impl IsA&lt;gtk::Widget&gt;) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> drag_source = gtk::DragSource::new();
</span><span>    drag_source.</span><span style="color:#96b5b4;">set_actions</span><span>(gdk::DragAction::</span><span style="color:#d08770;">COPY</span><span>);
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Prepare drag data
</span><span>    drag_source.</span><span style="color:#96b5b4;">connect_prepare</span><span>(|</span><span style="color:#bf616a;">source</span><span>, </span><span style="color:#bf616a;">_x</span><span>, </span><span style="color:#bf616a;">_y</span><span>| {
</span><span>        </span><span style="color:#b48ead;">let</span><span> value = glib::Value::from(&quot;</span><span style="color:#a3be8c;">Dragged text</span><span>&quot;);
</span><span>        Some(gdk::ContentProvider::for_value(&amp;value))
</span><span>    });
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Drag begin
</span><span>    drag_source.</span><span style="color:#96b5b4;">connect_drag_begin</span><span>(|</span><span style="color:#bf616a;">source</span><span>, </span><span style="color:#bf616a;">drag</span><span>| {
</span><span>        </span><span style="color:#65737e;">// Set drag icon
</span><span>        </span><span style="color:#b48ead;">let</span><span> paintable = gtk::WidgetPaintable::new(Some(source.</span><span style="color:#96b5b4;">widget</span><span>()));
</span><span>        source.</span><span style="color:#96b5b4;">set_icon</span><span>(Some(&amp;paintable), </span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">0</span><span>);
</span><span>    });
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Drag end
</span><span>    drag_source.</span><span style="color:#96b5b4;">connect_drag_end</span><span>(|</span><span style="color:#bf616a;">_source</span><span>, </span><span style="color:#bf616a;">_drag</span><span>, </span><span style="color:#bf616a;">_delete_data</span><span>| {
</span><span>        println!(&quot;</span><span style="color:#a3be8c;">Drag ended</span><span>&quot;);
</span><span>    });
</span><span>    
</span><span>    widget.</span><span style="color:#96b5b4;">add_controller</span><span>(drag_source);
</span><span>}
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">setup_drop_target</span><span>(</span><span style="color:#bf616a;">widget</span><span>: &amp;impl IsA&lt;gtk::Widget&gt;) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> drop_target = gtk::DropTarget::new(glib::Type::</span><span style="color:#d08770;">STRING</span><span>, gdk::DragAction::</span><span style="color:#d08770;">COPY</span><span>);
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Drop event
</span><span>    drop_target.</span><span style="color:#96b5b4;">connect_drop</span><span>(|</span><span style="color:#bf616a;">_target</span><span>, </span><span style="color:#bf616a;">value</span><span>, </span><span style="color:#bf616a;">_x</span><span>, </span><span style="color:#bf616a;">_y</span><span>| {
</span><span>        </span><span style="color:#b48ead;">if let </span><span>Ok(text) = value.get::&lt;String&gt;() {
</span><span>            println!(&quot;</span><span style="color:#a3be8c;">Dropped: </span><span style="color:#d08770;">{}</span><span>&quot;, text);
</span><span>            </span><span style="color:#b48ead;">return </span><span style="color:#d08770;">true</span><span>;
</span><span>        }
</span><span>        </span><span style="color:#d08770;">false
</span><span>    });
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Drag enter
</span><span>    drop_target.</span><span style="color:#96b5b4;">connect_enter</span><span>(|</span><span style="color:#bf616a;">target</span><span>, </span><span style="color:#bf616a;">_x</span><span>, </span><span style="color:#bf616a;">_y</span><span>| {
</span><span>        target.</span><span style="color:#96b5b4;">widget</span><span>().</span><span style="color:#96b5b4;">add_css_class</span><span>(&quot;</span><span style="color:#a3be8c;">drag-hover</span><span>&quot;);
</span><span>        gdk::DragAction::</span><span style="color:#d08770;">COPY
</span><span>    });
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Drag leave
</span><span>    drop_target.</span><span style="color:#96b5b4;">connect_leave</span><span>(|</span><span style="color:#bf616a;">target</span><span>| {
</span><span>        target.</span><span style="color:#96b5b4;">widget</span><span>().</span><span style="color:#96b5b4;">remove_css_class</span><span>(&quot;</span><span style="color:#a3be8c;">drag-hover</span><span>&quot;);
</span><span>    });
</span><span>    
</span><span>    widget.</span><span style="color:#96b5b4;">add_controller</span><span>(drop_target);
</span><span>}
</span><span>
</span><span style="color:#65737e;">// File drag and drop
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">setup_file_drop_target</span><span>(</span><span style="color:#bf616a;">widget</span><span>: &amp;impl IsA&lt;gtk::Widget&gt;) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> drop_target = gtk::DropTarget::new(gio::File::static_type(), gdk::DragAction::</span><span style="color:#d08770;">COPY</span><span>);
</span><span>    
</span><span>    drop_target.</span><span style="color:#96b5b4;">connect_drop</span><span>(|</span><span style="color:#bf616a;">_target</span><span>, </span><span style="color:#bf616a;">value</span><span>, </span><span style="color:#bf616a;">_x</span><span>, </span><span style="color:#bf616a;">_y</span><span>| {
</span><span>        </span><span style="color:#b48ead;">if let </span><span>Ok(file) = value.get::&lt;gio::File&gt;() {
</span><span>            </span><span style="color:#b48ead;">if let </span><span>Some(path) = file.</span><span style="color:#96b5b4;">path</span><span>() {
</span><span>                println!(&quot;</span><span style="color:#a3be8c;">Dropped file: </span><span style="color:#d08770;">{:?}</span><span>&quot;, path);
</span><span>                </span><span style="color:#b48ead;">return </span><span style="color:#d08770;">true</span><span>;
</span><span>            }
</span><span>        }
</span><span>        </span><span style="color:#d08770;">false
</span><span>    });
</span><span>    
</span><span>    widget.</span><span style="color:#96b5b4;">add_controller</span><span>(drop_target);
</span><span>}
</span></code></pre>
<p><strong>Python Example</strong>:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">setup_drag_source</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">widget</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Setup drag source for widget.&quot;&quot;&quot;
</span><span>    drag_source = Gtk.</span><span style="color:#bf616a;">DragSource</span><span>()
</span><span>    drag_source.</span><span style="color:#bf616a;">set_actions</span><span>(Gdk.DragAction.</span><span style="color:#bf616a;">COPY</span><span>)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Prepare drag data
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">on_prepare</span><span>(</span><span style="color:#bf616a;">source</span><span>, </span><span style="color:#bf616a;">x</span><span>, </span><span style="color:#bf616a;">y</span><span>):
</span><span>        value = GObject.</span><span style="color:#bf616a;">Value</span><span>(str, &quot;</span><span style="color:#a3be8c;">Dragged text</span><span>&quot;)
</span><span>        </span><span style="color:#b48ead;">return </span><span>Gdk.ContentProvider.</span><span style="color:#bf616a;">new_for_value</span><span>(value)
</span><span>    
</span><span>    drag_source.</span><span style="color:#bf616a;">connect</span><span>(&#39;</span><span style="color:#a3be8c;">prepare</span><span>&#39;, on_prepare)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Drag begin
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">on_drag_begin</span><span>(</span><span style="color:#bf616a;">source</span><span>, </span><span style="color:#bf616a;">drag</span><span>):
</span><span>        paintable = Gtk.WidgetPaintable.</span><span style="color:#bf616a;">new</span><span>(source.</span><span style="color:#bf616a;">get_widget</span><span>())
</span><span>        source.</span><span style="color:#bf616a;">set_icon</span><span>(paintable, </span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">0</span><span>)
</span><span>    
</span><span>    drag_source.</span><span style="color:#bf616a;">connect</span><span>(&#39;</span><span style="color:#a3be8c;">drag-begin</span><span>&#39;, on_drag_begin)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Drag end
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">on_drag_end</span><span>(</span><span style="color:#bf616a;">source</span><span>, </span><span style="color:#bf616a;">drag</span><span>, </span><span style="color:#bf616a;">delete_data</span><span>):
</span><span>        </span><span style="color:#96b5b4;">print</span><span>(&quot;</span><span style="color:#a3be8c;">Drag ended</span><span>&quot;)
</span><span>    
</span><span>    drag_source.</span><span style="color:#bf616a;">connect</span><span>(&#39;</span><span style="color:#a3be8c;">drag-end</span><span>&#39;, on_drag_end)
</span><span>    
</span><span>    widget.</span><span style="color:#bf616a;">add_controller</span><span>(drag_source)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">setup_drop_target</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">widget</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Setup drop target for widget.&quot;&quot;&quot;
</span><span>    drop_target = Gtk.DropTarget.</span><span style="color:#bf616a;">new</span><span>(str, Gdk.DragAction.</span><span style="color:#bf616a;">COPY</span><span>)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Drop event
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">on_drop</span><span>(</span><span style="color:#bf616a;">target</span><span>, </span><span style="color:#bf616a;">value</span><span>, </span><span style="color:#bf616a;">x</span><span>, </span><span style="color:#bf616a;">y</span><span>):
</span><span>        </span><span style="color:#b48ead;">if </span><span style="color:#96b5b4;">isinstance</span><span>(value, str):
</span><span>            </span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">Dropped: </span><span>{value}&quot;)
</span><span>            </span><span style="color:#b48ead;">return </span><span style="color:#d08770;">True
</span><span>        </span><span style="color:#b48ead;">return </span><span style="color:#d08770;">False
</span><span>    
</span><span>    drop_target.</span><span style="color:#bf616a;">connect</span><span>(&#39;</span><span style="color:#a3be8c;">drop</span><span>&#39;, on_drop)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Drag enter
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">on_enter</span><span>(</span><span style="color:#bf616a;">target</span><span>, </span><span style="color:#bf616a;">x</span><span>, </span><span style="color:#bf616a;">y</span><span>):
</span><span>        target.</span><span style="color:#bf616a;">get_widget</span><span>().</span><span style="color:#bf616a;">add_css_class</span><span>(&#39;</span><span style="color:#a3be8c;">drag-hover</span><span>&#39;)
</span><span>        </span><span style="color:#b48ead;">return </span><span>Gdk.DragAction.</span><span style="color:#bf616a;">COPY
</span><span>    
</span><span>    drop_target.</span><span style="color:#bf616a;">connect</span><span>(&#39;</span><span style="color:#a3be8c;">enter</span><span>&#39;, on_enter)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Drag leave
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">on_leave</span><span>(</span><span style="color:#bf616a;">target</span><span>):
</span><span>        target.</span><span style="color:#bf616a;">get_widget</span><span>().</span><span style="color:#bf616a;">remove_css_class</span><span>(&#39;</span><span style="color:#a3be8c;">drag-hover</span><span>&#39;)
</span><span>    
</span><span>    drop_target.</span><span style="color:#bf616a;">connect</span><span>(&#39;</span><span style="color:#a3be8c;">leave</span><span>&#39;, on_leave)
</span><span>    
</span><span>    widget.</span><span style="color:#bf616a;">add_controller</span><span>(drop_target)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">setup_file_drop_target</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">widget</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Setup file drop target.&quot;&quot;&quot;
</span><span>    drop_target = Gtk.DropTarget.</span><span style="color:#bf616a;">new</span><span>(Gio.File, Gdk.DragAction.</span><span style="color:#bf616a;">COPY</span><span>)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">on_drop</span><span>(</span><span style="color:#bf616a;">target</span><span>, </span><span style="color:#bf616a;">value</span><span>, </span><span style="color:#bf616a;">x</span><span>, </span><span style="color:#bf616a;">y</span><span>):
</span><span>        </span><span style="color:#b48ead;">if </span><span style="color:#96b5b4;">isinstance</span><span>(value, Gio.File):
</span><span>            path = value.</span><span style="color:#bf616a;">get_path</span><span>()
</span><span>            </span><span style="color:#96b5b4;">print</span><span>(</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">Dropped file: </span><span>{path}&quot;)
</span><span>            </span><span style="color:#b48ead;">return </span><span style="color:#d08770;">True
</span><span>        </span><span style="color:#b48ead;">return </span><span style="color:#d08770;">False
</span><span>    
</span><span>    drop_target.</span><span style="color:#bf616a;">connect</span><span>(&#39;</span><span style="color:#a3be8c;">drop</span><span>&#39;, on_drop)
</span><span>    widget.</span><span style="color:#bf616a;">add_controller</span><span>(drop_target)
</span></code></pre>
<h3 id="animations">Animations</h3>
<p><strong>Rust Example</strong>:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">use </span><span>adwaita::prelude::*;
</span><span style="color:#b48ead;">use </span><span>gtk::glib;
</span><span>
</span><span style="color:#65737e;">// Simple fade animation
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">fade_in_widget</span><span>(</span><span style="color:#bf616a;">widget</span><span>: &amp;impl IsA&lt;gtk::Widget&gt;) {
</span><span>    widget.</span><span style="color:#96b5b4;">set_opacity</span><span>(</span><span style="color:#d08770;">0.0</span><span>);
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> target = adwaita::PropertyAnimationTarget::new(widget, &quot;</span><span style="color:#a3be8c;">opacity</span><span>&quot;);
</span><span>    </span><span style="color:#b48ead;">let</span><span> animation = adwaita::TimedAnimation::new(
</span><span>        widget,
</span><span>        </span><span style="color:#d08770;">0.0</span><span>,  </span><span style="color:#65737e;">// from
</span><span>        </span><span style="color:#d08770;">1.0</span><span>,  </span><span style="color:#65737e;">// to
</span><span>        </span><span style="color:#d08770;">500</span><span>,  </span><span style="color:#65737e;">// duration in ms
</span><span>        target,
</span><span>    );
</span><span>    
</span><span>    animation.</span><span style="color:#96b5b4;">play</span><span>();
</span><span>}
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">fade_out_widget</span><span>(</span><span style="color:#bf616a;">widget</span><span>: &amp;impl IsA&lt;gtk::Widget&gt;) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> target = adwaita::PropertyAnimationTarget::new(widget, &quot;</span><span style="color:#a3be8c;">opacity</span><span>&quot;);
</span><span>    </span><span style="color:#b48ead;">let</span><span> animation = adwaita::TimedAnimation::new(
</span><span>        widget,
</span><span>        widget.</span><span style="color:#96b5b4;">opacity</span><span>(),
</span><span>        </span><span style="color:#d08770;">0.0</span><span>,
</span><span>        </span><span style="color:#d08770;">500</span><span>,
</span><span>        target,
</span><span>    );
</span><span>    
</span><span>    animation.</span><span style="color:#96b5b4;">play</span><span>();
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Spring animation (bouncy effect)
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">spring_animation</span><span>(</span><span style="color:#bf616a;">widget</span><span>: &amp;impl IsA&lt;gtk::Widget&gt;) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> target = adwaita::PropertyAnimationTarget::new(widget, &quot;</span><span style="color:#a3be8c;">scale-x</span><span>&quot;);
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> animation = adwaita::SpringAnimation::new(
</span><span>        widget,
</span><span>        widget.</span><span style="color:#96b5b4;">scale_x</span><span>(),  </span><span style="color:#65737e;">// from
</span><span>        </span><span style="color:#d08770;">2.0</span><span>,               </span><span style="color:#65737e;">// to
</span><span>        adwaita::SpringParams::new(</span><span style="color:#d08770;">1.0</span><span>, </span><span style="color:#d08770;">0.5</span><span>, </span><span style="color:#d08770;">500.0</span><span>),
</span><span>        target,
</span><span>    );
</span><span>    
</span><span>    animation.</span><span style="color:#96b5b4;">play</span><span>();
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Rotation animation
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">rotate_widget</span><span>(</span><span style="color:#bf616a;">widget</span><span>: &amp;impl IsA&lt;gtk::Widget&gt;, </span><span style="color:#bf616a;">degrees</span><span>: </span><span style="color:#b48ead;">f64</span><span>) {
</span><span>    </span><span style="color:#65737e;">// Note: Need to use CSS transform for rotation
</span><span>    </span><span style="color:#65737e;">// This example shows how to animate a custom property
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> target = adwaita::CallbackAnimationTarget::new(
</span><span>        glib::clone!(
</span><span>            #[</span><span style="color:#bf616a;">weak</span><span>]
</span><span>            widget,
</span><span>            </span><span style="color:#b48ead;">move </span><span>|value| {
</span><span>                </span><span style="color:#b48ead;">let</span><span> angle = value * degrees;
</span><span>                </span><span style="color:#65737e;">// Apply rotation transform
</span><span>                </span><span style="color:#b48ead;">let</span><span> transform = gtk::gsk::Transform::new().</span><span style="color:#96b5b4;">rotate</span><span>(angle as </span><span style="color:#b48ead;">f32</span><span>);
</span><span>                </span><span style="color:#65737e;">// This would need proper implementation with paintable
</span><span>            }
</span><span>        )
</span><span>    );
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> animation = adwaita::TimedAnimation::new(
</span><span>        widget,
</span><span>        </span><span style="color:#d08770;">0.0</span><span>,
</span><span>        </span><span style="color:#d08770;">1.0</span><span>,
</span><span>        </span><span style="color:#d08770;">1000</span><span>,
</span><span>        target,
</span><span>    );
</span><span>    
</span><span>    animation.</span><span style="color:#96b5b4;">play</span><span>();
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Slide animation
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">slide_in_from_bottom</span><span>(</span><span style="color:#bf616a;">widget</span><span>: &amp;impl IsA&lt;gtk::Widget&gt;) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> height = widget.</span><span style="color:#96b5b4;">allocated_height</span><span>() as </span><span style="color:#b48ead;">f64</span><span>;
</span><span>    widget.</span><span style="color:#96b5b4;">set_margin_bottom</span><span>(-(height as </span><span style="color:#b48ead;">i32</span><span>));
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> target = adwaita::PropertyAnimationTarget::new(widget, &quot;</span><span style="color:#a3be8c;">margin-bottom</span><span>&quot;);
</span><span>    </span><span style="color:#b48ead;">let</span><span> animation = adwaita::TimedAnimation::new(
</span><span>        widget,
</span><span>        -height,
</span><span>        </span><span style="color:#d08770;">0.0</span><span>,
</span><span>        </span><span style="color:#d08770;">300</span><span>,
</span><span>        target,
</span><span>    );
</span><span>    
</span><span>    animation.</span><span style="color:#96b5b4;">set_easing</span><span>(adwaita::Easing::EaseOutCubic);
</span><span>    animation.</span><span style="color:#96b5b4;">play</span><span>();
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Chain animations
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">chain_animations</span><span>(</span><span style="color:#bf616a;">widget</span><span>: &amp;impl IsA&lt;gtk::Widget&gt;) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> target1 = adwaita::PropertyAnimationTarget::new(widget, &quot;</span><span style="color:#a3be8c;">opacity</span><span>&quot;);
</span><span>    </span><span style="color:#b48ead;">let</span><span> anim1 = adwaita::TimedAnimation::new(widget, </span><span style="color:#d08770;">1.0</span><span>, </span><span style="color:#d08770;">0.0</span><span>, </span><span style="color:#d08770;">200</span><span>, target1);
</span><span>    
</span><span>    anim1.</span><span style="color:#96b5b4;">connect_done</span><span>(glib::clone!(
</span><span>        #[</span><span style="color:#bf616a;">weak</span><span>]
</span><span>        widget,
</span><span>        </span><span style="color:#b48ead;">move </span><span>|_| {
</span><span>            </span><span style="color:#65737e;">// Start second animation when first is done
</span><span>            </span><span style="color:#b48ead;">let</span><span> target2 = adwaita::PropertyAnimationTarget::new(&amp;widget, &quot;</span><span style="color:#a3be8c;">opacity</span><span>&quot;);
</span><span>            </span><span style="color:#b48ead;">let</span><span> anim2 = adwaita::TimedAnimation::new(&amp;widget, </span><span style="color:#d08770;">0.0</span><span>, </span><span style="color:#d08770;">1.0</span><span>, </span><span style="color:#d08770;">200</span><span>, target2);
</span><span>            anim2.</span><span style="color:#96b5b4;">play</span><span>();
</span><span>        }
</span><span>    ));
</span><span>    
</span><span>    anim1.</span><span style="color:#96b5b4;">play</span><span>();
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Animation with custom easing
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">custom_easing_animation</span><span>(</span><span style="color:#bf616a;">widget</span><span>: &amp;impl IsA&lt;gtk::Widget&gt;) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> target = adwaita::PropertyAnimationTarget::new(widget, &quot;</span><span style="color:#a3be8c;">opacity</span><span>&quot;);
</span><span>    </span><span style="color:#b48ead;">let</span><span> animation = adwaita::TimedAnimation::new(widget, </span><span style="color:#d08770;">0.0</span><span>, </span><span style="color:#d08770;">1.0</span><span>, </span><span style="color:#d08770;">800</span><span>, target);
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Available easing functions:
</span><span>    </span><span style="color:#65737e;">// Linear, EaseInQuad, EaseOutQuad, EaseInOutQuad
</span><span>    </span><span style="color:#65737e;">// EaseInCubic, EaseOutCubic, EaseInOutCubic
</span><span>    </span><span style="color:#65737e;">// EaseInQuart, EaseOutQuart, EaseInOutQuart
</span><span>    </span><span style="color:#65737e;">// EaseInQuint, EaseOutQuint, EaseInOutQuint
</span><span>    </span><span style="color:#65737e;">// EaseInSine, EaseOutSine, EaseInOutSine
</span><span>    </span><span style="color:#65737e;">// EaseInExpo, EaseOutExpo, EaseInOutExpo
</span><span>    </span><span style="color:#65737e;">// EaseInCirc, EaseOutCirc, EaseInOutCirc
</span><span>    </span><span style="color:#65737e;">// EaseInElastic, EaseOutElastic, EaseInOutElastic
</span><span>    </span><span style="color:#65737e;">// EaseInBack, EaseOutBack, EaseInOutBack
</span><span>    </span><span style="color:#65737e;">// EaseInBounce, EaseOutBounce, EaseInOutBounce
</span><span>    
</span><span>    animation.</span><span style="color:#96b5b4;">set_easing</span><span>(adwaita::Easing::EaseOutBounce);
</span><span>    animation.</span><span style="color:#96b5b4;">play</span><span>();
</span><span>}
</span><span>
</span><span style="color:#65737e;">// Pause and resume animations
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">animation_controls</span><span>(</span><span style="color:#bf616a;">animation</span><span>: &amp;adwaita::Animation) {
</span><span>    </span><span style="color:#65737e;">// Pause
</span><span>    animation.</span><span style="color:#96b5b4;">pause</span><span>();
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Resume
</span><span>    animation.</span><span style="color:#96b5b4;">resume</span><span>();
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Reset
</span><span>    animation.</span><span style="color:#96b5b4;">reset</span><span>();
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Skip to end
</span><span>    animation.</span><span style="color:#96b5b4;">skip</span><span>();
</span><span>}
</span></code></pre>
<p><strong>Python Example</strong>:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">fade_in_widget</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">widget</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Fade in a widget.&quot;&quot;&quot;
</span><span>    widget.</span><span style="color:#bf616a;">set_opacity</span><span>(</span><span style="color:#d08770;">0.0</span><span>)
</span><span>    
</span><span>    target = Adw.PropertyAnimationTarget.</span><span style="color:#bf616a;">new</span><span>(widget, &quot;</span><span style="color:#a3be8c;">opacity</span><span>&quot;)
</span><span>    animation = Adw.TimedAnimation.</span><span style="color:#bf616a;">new</span><span>(
</span><span>        widget,
</span><span>        </span><span style="color:#d08770;">0.0</span><span>,  </span><span style="color:#65737e;"># from
</span><span>        </span><span style="color:#d08770;">1.0</span><span>,  </span><span style="color:#65737e;"># to
</span><span>        </span><span style="color:#d08770;">500</span><span>,  </span><span style="color:#65737e;"># duration in ms
</span><span>        target
</span><span>    )
</span><span>    
</span><span>    animation.</span><span style="color:#bf616a;">play</span><span>()
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">fade_out_widget</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">widget</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Fade out a widget.&quot;&quot;&quot;
</span><span>    target = Adw.PropertyAnimationTarget.</span><span style="color:#bf616a;">new</span><span>(widget, &quot;</span><span style="color:#a3be8c;">opacity</span><span>&quot;)
</span><span>    animation = Adw.TimedAnimation.</span><span style="color:#bf616a;">new</span><span>(
</span><span>        widget,
</span><span>        widget.</span><span style="color:#bf616a;">get_opacity</span><span>(),
</span><span>        </span><span style="color:#d08770;">0.0</span><span>,
</span><span>        </span><span style="color:#d08770;">500</span><span>,
</span><span>        target
</span><span>    )
</span><span>    
</span><span>    animation.</span><span style="color:#bf616a;">play</span><span>()
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">spring_animation</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">widget</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Spring animation with bouncy effect.&quot;&quot;&quot;
</span><span>    target = Adw.PropertyAnimationTarget.</span><span style="color:#bf616a;">new</span><span>(widget, &quot;</span><span style="color:#a3be8c;">scale-x</span><span>&quot;)
</span><span>    
</span><span>    spring_params = Adw.SpringParams.</span><span style="color:#bf616a;">new</span><span>(</span><span style="color:#d08770;">1.0</span><span>, </span><span style="color:#d08770;">0.5</span><span>, </span><span style="color:#d08770;">500.0</span><span>)
</span><span>    animation = Adw.SpringAnimation.</span><span style="color:#bf616a;">new</span><span>(
</span><span>        widget,
</span><span>        widget.</span><span style="color:#bf616a;">get_scale_x</span><span>(),
</span><span>        </span><span style="color:#d08770;">2.0</span><span>,
</span><span>        spring_params,
</span><span>        target
</span><span>    )
</span><span>    
</span><span>    animation.</span><span style="color:#bf616a;">play</span><span>()
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">slide_in_from_bottom</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">widget</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Slide widget in from bottom.&quot;&quot;&quot;
</span><span>    height = widget.</span><span style="color:#bf616a;">get_allocated_height</span><span>()
</span><span>    widget.</span><span style="color:#bf616a;">set_margin_bottom</span><span>(-height)
</span><span>    
</span><span>    target = Adw.PropertyAnimationTarget.</span><span style="color:#bf616a;">new</span><span>(widget, &quot;</span><span style="color:#a3be8c;">margin-bottom</span><span>&quot;)
</span><span>    animation = Adw.TimedAnimation.</span><span style="color:#bf616a;">new</span><span>(
</span><span>        widget,
</span><span>        -height,
</span><span>        </span><span style="color:#d08770;">0.0</span><span>,
</span><span>        </span><span style="color:#d08770;">300</span><span>,
</span><span>        target
</span><span>    )
</span><span>    
</span><span>    animation.</span><span style="color:#bf616a;">set_easing</span><span>(Adw.Easing.</span><span style="color:#bf616a;">EASE_OUT_CUBIC</span><span>)
</span><span>    animation.</span><span style="color:#bf616a;">play</span><span>()
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">chain_animations</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">widget</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Chain multiple animations.&quot;&quot;&quot;
</span><span>    target1 = Adw.PropertyAnimationTarget.</span><span style="color:#bf616a;">new</span><span>(widget, &quot;</span><span style="color:#a3be8c;">opacity</span><span>&quot;)
</span><span>    anim1 = Adw.TimedAnimation.</span><span style="color:#bf616a;">new</span><span>(widget, </span><span style="color:#d08770;">1.0</span><span>, </span><span style="color:#d08770;">0.0</span><span>, </span><span style="color:#d08770;">200</span><span>, target1)
</span><span>    
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">on_done</span><span>(</span><span style="color:#bf616a;">animation</span><span>):
</span><span>        </span><span style="color:#65737e;"># Start second animation when first is done
</span><span>        target2 = Adw.PropertyAnimationTarget.</span><span style="color:#bf616a;">new</span><span>(widget, &quot;</span><span style="color:#a3be8c;">opacity</span><span>&quot;)
</span><span>        anim2 = Adw.TimedAnimation.</span><span style="color:#bf616a;">new</span><span>(widget, </span><span style="color:#d08770;">0.0</span><span>, </span><span style="color:#d08770;">1.0</span><span>, </span><span style="color:#d08770;">200</span><span>, target2)
</span><span>        anim2.</span><span style="color:#bf616a;">play</span><span>()
</span><span>    
</span><span>    anim1.</span><span style="color:#bf616a;">connect</span><span>(&#39;</span><span style="color:#a3be8c;">done</span><span>&#39;, on_done)
</span><span>    anim1.</span><span style="color:#bf616a;">play</span><span>()
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">custom_easing_animation</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">widget</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Animation with custom easing.&quot;&quot;&quot;
</span><span>    target = Adw.PropertyAnimationTarget.</span><span style="color:#bf616a;">new</span><span>(widget, &quot;</span><span style="color:#a3be8c;">opacity</span><span>&quot;)
</span><span>    animation = Adw.TimedAnimation.</span><span style="color:#bf616a;">new</span><span>(widget, </span><span style="color:#d08770;">0.0</span><span>, </span><span style="color:#d08770;">1.0</span><span>, </span><span style="color:#d08770;">800</span><span>, target)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Available easing functions:
</span><span>    </span><span style="color:#65737e;"># LINEAR, EASE_IN_QUAD, EASE_OUT_QUAD, EASE_IN_OUT_QUAD
</span><span>    </span><span style="color:#65737e;"># EASE_IN_CUBIC, EASE_OUT_CUBIC, EASE_IN_OUT_CUBIC
</span><span>    </span><span style="color:#65737e;"># EASE_IN_QUART, EASE_OUT_QUART, EASE_IN_OUT_QUART
</span><span>    </span><span style="color:#65737e;"># EASE_IN_QUINT, EASE_OUT_QUINT, EASE_IN_OUT_QUINT
</span><span>    </span><span style="color:#65737e;"># EASE_IN_SINE, EASE_OUT_SINE, EASE_IN_OUT_SINE
</span><span>    </span><span style="color:#65737e;"># EASE_IN_EXPO, EASE_OUT_EXPO, EASE_IN_OUT_EXPO
</span><span>    </span><span style="color:#65737e;"># EASE_IN_CIRC, EASE_OUT_CIRC, EASE_IN_OUT_CIRC
</span><span>    </span><span style="color:#65737e;"># EASE_IN_ELASTIC, EASE_OUT_ELASTIC, EASE_IN_OUT_ELASTIC
</span><span>    </span><span style="color:#65737e;"># EASE_IN_BACK, EASE_OUT_BACK, EASE_IN_OUT_BACK
</span><span>    </span><span style="color:#65737e;"># EASE_IN_BOUNCE, EASE_OUT_BOUNCE, EASE_IN_OUT_BOUNCE
</span><span>    
</span><span>    animation.</span><span style="color:#bf616a;">set_easing</span><span>(Adw.Easing.</span><span style="color:#bf616a;">EASE_OUT_BOUNCE</span><span>)
</span><span>    animation.</span><span style="color:#bf616a;">play</span><span>()
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">animation_controls</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">animation</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Control animation playback.&quot;&quot;&quot;
</span><span>    </span><span style="color:#65737e;"># Pause
</span><span>    animation.</span><span style="color:#bf616a;">pause</span><span>()
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Resume
</span><span>    animation.</span><span style="color:#bf616a;">resume</span><span>()
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Reset
</span><span>    animation.</span><span style="color:#bf616a;">reset</span><span>()
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Skip to end
</span><span>    animation.</span><span style="color:#bf616a;">skip</span><span>()
</span></code></pre>
<h3 id="custom-css-styling">Custom CSS Styling</h3>
<p><strong>Rust Example</strong>:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">use </span><span>gtk::prelude::*;
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">load_custom_css</span><span>() {
</span><span>    </span><span style="color:#b48ead;">let</span><span> provider = gtk::CssProvider::new();
</span><span>    
</span><span>    </span><span style="color:#b48ead;">let</span><span> css = </span><span style="color:#b48ead;">r</span><span>#&quot;
</span><span style="color:#a3be8c;">        /* Custom button styling */
</span><span style="color:#a3be8c;">        .custom-button {
</span><span style="color:#a3be8c;">            background: linear-gradient(to bottom, #4a90e2, #357abd);
</span><span style="color:#a3be8c;">            color: white;
</span><span style="color:#a3be8c;">            border-radius: 8px;
</span><span style="color:#a3be8c;">            padding: 12px 24px;
</span><span style="color:#a3be8c;">            font-weight: bold;
</span><span style="color:#a3be8c;">        }
</span><span style="color:#a3be8c;">        
</span><span style="color:#a3be8c;">        .custom-button:hover {
</span><span style="color:#a3be8c;">            background: linear-gradient(to bottom, #5ba3f5, #4a90e2);
</span><span style="color:#a3be8c;">        }
</span><span style="color:#a3be8c;">        
</span><span style="color:#a3be8c;">        .custom-button:active {
</span><span style="color:#a3be8c;">            background: linear-gradient(to bottom, #357abd, #2868a8);
</span><span style="color:#a3be8c;">        }
</span><span style="color:#a3be8c;">        
</span><span style="color:#a3be8c;">        /* Custom card styling */
</span><span style="color:#a3be8c;">        .card {
</span><span style="color:#a3be8c;">            background-color: @card_bg_color;
</span><span style="color:#a3be8c;">            border-radius: 12px;
</span><span style="color:#a3be8c;">            padding: 24px;
</span><span style="color:#a3be8c;">            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
</span><span style="color:#a3be8c;">        }
</span><span style="color:#a3be8c;">        
</span><span style="color:#a3be8c;">        /* Dark mode support */
</span><span style="color:#a3be8c;">        .card:backdrop {
</span><span style="color:#a3be8c;">            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.05);
</span><span style="color:#a3be8c;">        }
</span><span style="color:#a3be8c;">        
</span><span style="color:#a3be8c;">        /* Custom list styling */
</span><span style="color:#a3be8c;">        .custom-list row {
</span><span style="color:#a3be8c;">            border-radius: 8px;
</span><span style="color:#a3be8c;">            margin: 4px 0;
</span><span style="color:#a3be8c;">        }
</span><span style="color:#a3be8c;">        
</span><span style="color:#a3be8c;">        .custom-list row:hover {
</span><span style="color:#a3be8c;">            background-color: alpha(@accent_color, 0.1);
</span><span style="color:#a3be8c;">        }
</span><span style="color:#a3be8c;">        
</span><span style="color:#a3be8c;">        /* Animated progress */
</span><span style="color:#a3be8c;">        @keyframes pulse {
</span><span style="color:#a3be8c;">            0%, 100% { opacity: 1; }
</span><span style="color:#a3be8c;">            50% { opacity: 0.5; }
</span><span style="color:#a3be8c;">        }
</span><span style="color:#a3be8c;">        
</span><span style="color:#a3be8c;">        .pulsing {
</span><span style="color:#a3be8c;">            animation: pulse 2s ease-in-out infinite;
</span><span style="color:#a3be8c;">        }
</span><span style="color:#a3be8c;">        
</span><span style="color:#a3be8c;">        /* Custom separator */
</span><span style="color:#a3be8c;">        .fancy-separator {
</span><span style="color:#a3be8c;">            background: linear-gradient(to right, 
</span><span style="color:#a3be8c;">                transparent, 
</span><span style="color:#a3be8c;">                @accent_color, 
</span><span style="color:#a3be8c;">                transparent);
</span><span style="color:#a3be8c;">            min-height: 2px;
</span><span style="color:#a3be8c;">        }
</span><span style="color:#a3be8c;">    </span><span>&quot;#;
</span><span>    
</span><span>    provider.</span><span style="color:#96b5b4;">load_from_string</span><span>(css);
</span><span>    
</span><span>    gtk::style_context_add_provider_for_display(
</span><span>        &amp;gtk::gdk::Display::default().</span><span style="color:#96b5b4;">unwrap</span><span>(),
</span><span>        &amp;provider,
</span><span>        gtk::</span><span style="color:#d08770;">STYLE_PROVIDER_PRIORITY_APPLICATION</span><span>,
</span><span>    );
</span><span>}
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">apply_custom_style_to_widget</span><span>(</span><span style="color:#bf616a;">widget</span><span>: &amp;impl IsA&lt;gtk::Widget&gt;) {
</span><span>    widget.</span><span style="color:#96b5b4;">add_css_class</span><span>(&quot;</span><span style="color:#a3be8c;">custom-button</span><span>&quot;);
</span><span>}
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">load_css_from_resource</span><span>(</span><span style="color:#bf616a;">resource_path</span><span>: &amp;</span><span style="color:#b48ead;">str</span><span>) {
</span><span>    </span><span style="color:#b48ead;">let</span><span> provider = gtk::CssProvider::new();
</span><span>    provider.</span><span style="color:#96b5b4;">load_from_resource</span><span>(resource_path);
</span><span>    
</span><span>    gtk::style_context_add_provider_for_display(
</span><span>        &amp;gtk::gdk::Display::default().</span><span style="color:#96b5b4;">unwrap</span><span>(),
</span><span>        &amp;provider,
</span><span>        gtk::</span><span style="color:#d08770;">STYLE_PROVIDER_PRIORITY_APPLICATION</span><span>,
</span><span>    );
</span><span>}
</span></code></pre>
<p><strong>Python Example</strong>:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">load_custom_css</span><span>(</span><span style="color:#bf616a;">self</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Load custom CSS styling.&quot;&quot;&quot;
</span><span>    provider = Gtk.</span><span style="color:#bf616a;">CssProvider</span><span>()
</span><span>    
</span><span>    css = &quot;&quot;&quot;
</span><span style="color:#a3be8c;">        /* Custom button styling */
</span><span style="color:#a3be8c;">        .custom-button {
</span><span style="color:#a3be8c;">            background: linear-gradient(to bottom, #4a90e2, #357abd);
</span><span style="color:#a3be8c;">            color: white;
</span><span style="color:#a3be8c;">            border-radius: 8px;
</span><span style="color:#a3be8c;">            padding: 12px 24px;
</span><span style="color:#a3be8c;">            font-weight: bold;
</span><span style="color:#a3be8c;">        }
</span><span style="color:#a3be8c;">        
</span><span style="color:#a3be8c;">        .custom-button:hover {
</span><span style="color:#a3be8c;">            background: linear-gradient(to bottom, #5ba3f5, #4a90e2);
</span><span style="color:#a3be8c;">        }
</span><span style="color:#a3be8c;">        
</span><span style="color:#a3be8c;">        .custom-button:active {
</span><span style="color:#a3be8c;">            background: linear-gradient(to bottom, #357abd, #2868a8);
</span><span style="color:#a3be8c;">        }
</span><span style="color:#a3be8c;">        
</span><span style="color:#a3be8c;">        /* Custom card styling */
</span><span style="color:#a3be8c;">        .card {
</span><span style="color:#a3be8c;">            background-color: @card_bg_color;
</span><span style="color:#a3be8c;">            border-radius: 12px;
</span><span style="color:#a3be8c;">            padding: 24px;
</span><span style="color:#a3be8c;">            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
</span><span style="color:#a3be8c;">        }
</span><span style="color:#a3be8c;">        
</span><span style="color:#a3be8c;">        /* Dark mode support */
</span><span style="color:#a3be8c;">        .card:backdrop {
</span><span style="color:#a3be8c;">            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.05);
</span><span style="color:#a3be8c;">        }
</span><span style="color:#a3be8c;">        
</span><span style="color:#a3be8c;">        /* Custom list styling */
</span><span style="color:#a3be8c;">        .custom-list row {
</span><span style="color:#a3be8c;">            border-radius: 8px;
</span><span style="color:#a3be8c;">            margin: 4px 0;
</span><span style="color:#a3be8c;">        }
</span><span style="color:#a3be8c;">        
</span><span style="color:#a3be8c;">        .custom-list row:hover {
</span><span style="color:#a3be8c;">            background-color: alpha(@accent_color, 0.1);
</span><span style="color:#a3be8c;">        }
</span><span style="color:#a3be8c;">        
</span><span style="color:#a3be8c;">        /* Animated progress */
</span><span style="color:#a3be8c;">        @keyframes pulse {
</span><span style="color:#a3be8c;">            0%, 100% { opacity: 1; }
</span><span style="color:#a3be8c;">            50% { opacity: 0.5; }
</span><span style="color:#a3be8c;">        }
</span><span style="color:#a3be8c;">        
</span><span style="color:#a3be8c;">        .pulsing {
</span><span style="color:#a3be8c;">            animation: pulse 2s ease-in-out infinite;
</span><span style="color:#a3be8c;">        }
</span><span style="color:#a3be8c;">        
</span><span style="color:#a3be8c;">        /* Custom separator */
</span><span style="color:#a3be8c;">        .fancy-separator {
</span><span style="color:#a3be8c;">            background: linear-gradient(to right, 
</span><span style="color:#a3be8c;">                transparent, 
</span><span style="color:#a3be8c;">                @accent_color, 
</span><span style="color:#a3be8c;">                transparent);
</span><span style="color:#a3be8c;">            min-height: 2px;
</span><span style="color:#a3be8c;">        }
</span><span style="color:#a3be8c;">    </span><span>&quot;&quot;&quot;
</span><span>    
</span><span>    provider.</span><span style="color:#bf616a;">load_from_string</span><span>(css)
</span><span>    
</span><span>    Gtk.StyleContext.</span><span style="color:#bf616a;">add_provider_for_display</span><span>(
</span><span>        Gdk.Display.</span><span style="color:#bf616a;">get_default</span><span>(),
</span><span>        provider,
</span><span>        Gtk.</span><span style="color:#bf616a;">STYLE_PROVIDER_PRIORITY_APPLICATION
</span><span>    )
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">apply_custom_style_to_widget</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">widget</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Apply custom style to widget.&quot;&quot;&quot;
</span><span>    widget.</span><span style="color:#bf616a;">add_css_class</span><span>(&quot;</span><span style="color:#a3be8c;">custom-button</span><span>&quot;)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">load_css_from_resource</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">resource_path</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Load CSS from resource.&quot;&quot;&quot;
</span><span>    provider = Gtk.</span><span style="color:#bf616a;">CssProvider</span><span>()
</span><span>    provider.</span><span style="color:#bf616a;">load_from_resource</span><span>(resource_path)
</span><span>    
</span><span>    Gtk.StyleContext.</span><span style="color:#bf616a;">add_provider_for_display</span><span>(
</span><span>        Gdk.Display.</span><span style="color:#bf616a;">get_default</span><span>(),
</span><span>        provider,
</span><span>        Gtk.</span><span style="color:#bf616a;">STYLE_PROVIDER_PRIORITY_APPLICATION
</span><span>    )
</span></code></pre>
<h3 id="accessibility">Accessibility</h3>
<p><strong>Rust Example</strong>:</p>
<pre data-lang="rust" style="background-color:#2b303b;color:#c0c5ce;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#b48ead;">use </span><span>gtk::prelude::*;
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">setup_accessibility</span><span>(</span><span style="color:#bf616a;">widget</span><span>: &amp;impl IsA&lt;gtk::Widget&gt;) {
</span><span>    </span><span style="color:#65737e;">// Set accessible label
</span><span>    widget.</span><span style="color:#96b5b4;">set_accessible_label</span><span>(Some(&quot;</span><span style="color:#a3be8c;">User Profile Picture</span><span>&quot;));
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Set accessible description
</span><span>    widget.</span><span style="color:#96b5b4;">set_accessible_description</span><span>(Some(&quot;</span><span style="color:#a3be8c;">Click to change your profile picture</span><span>&quot;));
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Set accessible role
</span><span>    widget.</span><span style="color:#96b5b4;">set_accessible_role</span><span>(gtk::AccessibleRole::Button);
</span><span>}
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">setup_custom_button_accessibility</span><span>(</span><span style="color:#bf616a;">button</span><span>: &amp;gtk::Button) {
</span><span>    button.</span><span style="color:#96b5b4;">set_accessible_label</span><span>(Some(&quot;</span><span style="color:#a3be8c;">Delete Item</span><span>&quot;));
</span><span>    button.</span><span style="color:#96b5b4;">set_tooltip_text</span><span>(Some(&quot;</span><span style="color:#a3be8c;">Delete this item permanently</span><span>&quot;));
</span><span>    
</span><span>    </span><span style="color:#65737e;">// For icon-only buttons, always set accessible label
</span><span>    button.</span><span style="color:#96b5b4;">set_icon_name</span><span>(&quot;</span><span style="color:#a3be8c;">user-trash-symbolic</span><span>&quot;);
</span><span>}
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">setup_form_accessibility</span><span>(</span><span style="color:#bf616a;">entry</span><span>: &amp;gtk::Entry, </span><span style="color:#bf616a;">label</span><span>: &amp;gtk::Label) {
</span><span>    </span><span style="color:#65737e;">// Associate label with entry
</span><span>    label.</span><span style="color:#96b5b4;">set_mnemonic_widget</span><span>(Some(entry));
</span><span>    label.</span><span style="color:#96b5b4;">set_use_underline</span><span>(</span><span style="color:#d08770;">true</span><span>);
</span><span>    label.</span><span style="color:#96b5b4;">set_text</span><span>(&quot;</span><span style="color:#a3be8c;">_Username:</span><span>&quot;);
</span><span>    
</span><span>    </span><span style="color:#65737e;">// Set placeholder for additional context
</span><span>    entry.</span><span style="color:#96b5b4;">set_placeholder_text</span><span>(Some(&quot;</span><span style="color:#a3be8c;">Enter your username</span><span>&quot;));
</span><span>}
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">setup_image_accessibility</span><span>(</span><span style="color:#bf616a;">picture</span><span>: &amp;gtk::Picture) {
</span><span>    </span><span style="color:#65737e;">// Always provide alt text for images
</span><span>    picture.</span><span style="color:#96b5b4;">set_accessible_label</span><span>(Some(&quot;</span><span style="color:#a3be8c;">GNOME logo: a blue and gray footprint</span><span>&quot;));
</span><span>    picture.</span><span style="color:#96b5b4;">set_accessible_role</span><span>(gtk::AccessibleRole::Img);
</span><span>}
</span><span>
</span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">announce_to_screen_reader</span><span>(</span><span style="color:#bf616a;">widget</span><span>: &amp;impl IsA&lt;gtk::Widget&gt;, </span><span style="color:#bf616a;">message</span><span>: &amp;</span><span style="color:#b48ead;">str</span><span>) {
</span><span>    </span><span style="color:#65737e;">// Create an invisible label for announcements
</span><span>    </span><span style="color:#b48ead;">let</span><span> announcement = gtk::Label::new(Some(message));
</span><span>    announcement.</span><span style="color:#96b5b4;">set_accessible_role</span><span>(gtk::AccessibleRole::Alert);
</span><span>    
</span><span>    </span><span style="color:#65737e;">// This will be announced by screen readers
</span><span>    </span><span style="color:#65737e;">// Add to widget hierarchy temporarily
</span><span>}
</span></code></pre>
<p><strong>Python Example</strong>:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">setup_accessibility</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">widget</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Setup accessibility for widget.&quot;&quot;&quot;
</span><span>    </span><span style="color:#65737e;"># Set accessible label
</span><span>    widget.</span><span style="color:#bf616a;">set_accessible_label</span><span>(&quot;</span><span style="color:#a3be8c;">User Profile Picture</span><span>&quot;)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Set accessible description
</span><span>    widget.</span><span style="color:#bf616a;">set_accessible_description</span><span>(&quot;</span><span style="color:#a3be8c;">Click to change your profile picture</span><span>&quot;)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Set accessible role
</span><span>    widget.</span><span style="color:#bf616a;">set_accessible_role</span><span>(Gtk.AccessibleRole.</span><span style="color:#bf616a;">BUTTON</span><span>)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">setup_custom_button_accessibility</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">button</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Setup accessibility for custom button.&quot;&quot;&quot;
</span><span>    button.</span><span style="color:#bf616a;">set_accessible_label</span><span>(&quot;</span><span style="color:#a3be8c;">Delete Item</span><span>&quot;)
</span><span>    button.</span><span style="color:#bf616a;">set_tooltip_text</span><span>(&quot;</span><span style="color:#a3be8c;">Delete this item permanently</span><span>&quot;)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># For icon-only buttons, always set accessible label
</span><span>    button.</span><span style="color:#bf616a;">set_icon_name</span><span>(&quot;</span><span style="color:#a3be8c;">user-trash-symbolic</span><span>&quot;)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">setup_form_accessibility</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">entry</span><span>, </span><span style="color:#bf616a;">label</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Setup form field accessibility.&quot;&quot;&quot;
</span><span>    </span><span style="color:#65737e;"># Associate label with entry
</span><span>    label.</span><span style="color:#bf616a;">set_mnemonic_widget</span><span>(entry)
</span><span>    label.</span><span style="color:#bf616a;">set_use_underline</span><span>(</span><span style="color:#d08770;">True</span><span>)
</span><span>    label.</span><span style="color:#bf616a;">set_text</span><span>(&quot;</span><span style="color:#a3be8c;">_Username:</span><span>&quot;)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># Set placeholder for additional context
</span><span>    entry.</span><span style="color:#bf616a;">set_placeholder_text</span><span>(&quot;</span><span style="color:#a3be8c;">Enter your username</span><span>&quot;)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">setup_image_accessibility</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">picture</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Setup image accessibility.&quot;&quot;&quot;
</span><span>    </span><span style="color:#65737e;"># Always provide alt text for images
</span><span>    picture.</span><span style="color:#bf616a;">set_accessible_label</span><span>(&quot;</span><span style="color:#a3be8c;">GNOME logo: a blue and gray footprint</span><span>&quot;)
</span><span>    picture.</span><span style="color:#bf616a;">set_accessible_role</span><span>(Gtk.AccessibleRole.</span><span style="color:#bf616a;">IMG</span><span>)
</span><span>
</span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">announce_to_screen_reader</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">widget</span><span>, </span><span style="color:#bf616a;">message</span><span>):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;Announce message to screen reader.&quot;&quot;&quot;
</span><span>    </span><span style="color:#65737e;"># Create an invisible label for announcements
</span><span>    announcement = Gtk.</span><span style="color:#bf616a;">Label</span><span>(</span><span style="color:#bf616a;">label</span><span>=message)
</span><span>    announcement.</span><span style="color:#bf616a;">set_accessible_role</span><span>(Gtk.AccessibleRole.</span><span style="color:#bf616a;">ALERT</span><span>)
</span><span>    
</span><span>    </span><span style="color:#65737e;"># This will be announced by screen readers
</span></code></pre>
<h2 id="chapter-13-packaging-and-distribution">Chapter 13: Packaging and Distribution</h2>
<h3 id="desktop-file">Desktop File</h3>
<p><strong>com.example.MyApp.desktop.in</strong>:</p>
<pre data-lang="desktop" style="background-color:#2b303b;color:#c0c5ce;" class="language-desktop "><code class="language-desktop" data-lang="desktop"><span>[Desktop Entry]
</span><span>Name=My Application
</span><span>GenericName=Task Manager
</span><span>Comment=Manage your tasks efficiently
</span><span># Translators: These are keywords used to search for the application
</span><span>Keywords=tasks;todo;organizer;productivity;
</span><span>Exec=my-app
</span><span>Icon=com.example.MyApp
</span><span>Terminal=false
</span><span>Type=Application
</span><span>Categories=GTK;GNOME;Utility;
</span><span>StartupNotify=true
</span><span>X-GNOME-UsesNotifications=true
</span><span># For handling custom URIs
</span><span>MimeType=x-scheme-handler/myapp;
</span></code></pre>
<h3 id="metainfo-file">MetaInfo File</h3>
<p><strong>com.example.MyApp.metainfo.xml.in</strong>:</p>
<pre data-lang="xml" style="background-color:#2b303b;color:#c0c5ce;" class="language-xml "><code class="language-xml" data-lang="xml"><span>&lt;?</span><span style="color:#bf616a;">xml </span><span style="color:#d08770;">version</span><span>=&quot;</span><span style="color:#a3be8c;">1.0</span><span>&quot; </span><span style="color:#d08770;">encoding</span><span>=&quot;</span><span style="color:#a3be8c;">UTF-8</span><span>&quot;?&gt;
</span><span>&lt;</span><span style="color:#bf616a;">component </span><span style="color:#d08770;">type</span><span>=&quot;</span><span style="color:#a3be8c;">desktop-application</span><span>&quot;&gt;
</span><span>  &lt;</span><span style="color:#bf616a;">id</span><span>&gt;com.example.MyApp&lt;/</span><span style="color:#bf616a;">id</span><span>&gt;
</span><span>  
</span><span>  &lt;</span><span style="color:#bf616a;">name</span><span>&gt;My Application&lt;/</span><span style="color:#bf616a;">name</span><span>&gt;
</span><span>  &lt;</span><span style="color:#bf616a;">summary</span><span>&gt;A simple task management application&lt;/</span><span style="color:#bf616a;">summary</span><span>&gt;
</span><span>  
</span><span>  &lt;</span><span style="color:#bf616a;">metadata_license</span><span>&gt;CC0-1.0&lt;/</span><span style="color:#bf616a;">metadata_license</span><span>&gt;
</span><span>  &lt;</span><span style="color:#bf616a;">project_license</span><span>&gt;GPL-3.0-or-later&lt;/</span><span style="color:#bf616a;">project_license</span><span>&gt;
</span><span>  
</span><span>  &lt;</span><span style="color:#bf616a;">description</span><span>&gt;
</span><span>    &lt;</span><span style="color:#bf616a;">p</span><span>&gt;
</span><span>      My Application is a modern, easy-to-use task manager for GNOME.
</span><span>      It helps you organize your daily tasks and stay productive.
</span><span>    &lt;/</span><span style="color:#bf616a;">p</span><span>&gt;
</span><span>    &lt;</span><span style="color:#bf616a;">p</span><span>&gt;Features:&lt;/</span><span style="color:#bf616a;">p</span><span>&gt;
</span><span>    &lt;</span><span style="color:#bf616a;">ul</span><span>&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">li</span><span>&gt;Create and organize tasks&lt;/</span><span style="color:#bf616a;">li</span><span>&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">li</span><span>&gt;Set reminders and due dates&lt;/</span><span style="color:#bf616a;">li</span><span>&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">li</span><span>&gt;Mark tasks as complete&lt;/</span><span style="color:#bf616a;">li</span><span>&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">li</span><span>&gt;Search and filter tasks&lt;/</span><span style="color:#bf616a;">li</span><span>&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">li</span><span>&gt;Dark mode support&lt;/</span><span style="color:#bf616a;">li</span><span>&gt;
</span><span>    &lt;/</span><span style="color:#bf616a;">ul</span><span>&gt;
</span><span>  &lt;/</span><span style="color:#bf616a;">description</span><span>&gt;
</span><span>  
</span><span>  &lt;</span><span style="color:#bf616a;">launchable </span><span style="color:#d08770;">type</span><span>=&quot;</span><span style="color:#a3be8c;">desktop-id</span><span>&quot;&gt;com.example.MyApp.desktop&lt;/</span><span style="color:#bf616a;">launchable</span><span>&gt;
</span><span>  
</span><span>  &lt;</span><span style="color:#bf616a;">screenshots</span><span>&gt;
</span><span>    &lt;</span><span style="color:#bf616a;">screenshot </span><span style="color:#d08770;">type</span><span>=&quot;</span><span style="color:#a3be8c;">default</span><span>&quot;&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">image</span><span>&gt;https://example.com/screenshots/main.png&lt;/</span><span style="color:#bf616a;">image</span><span>&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">caption</span><span>&gt;Main window&lt;/</span><span style="color:#bf616a;">caption</span><span>&gt;
</span><span>    &lt;/</span><span style="color:#bf616a;">screenshot</span><span>&gt;
</span><span>    &lt;</span><span style="color:#bf616a;">screenshot</span><span>&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">image</span><span>&gt;https://example.com/screenshots/task-detail.png&lt;/</span><span style="color:#bf616a;">image</span><span>&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">caption</span><span>&gt;Task details&lt;/</span><span style="color:#bf616a;">caption</span><span>&gt;
</span><span>    &lt;/</span><span style="color:#bf616a;">screenshot</span><span>&gt;
</span><span>  &lt;/</span><span style="color:#bf616a;">screenshots</span><span>&gt;
</span><span>  
</span><span>  &lt;</span><span style="color:#bf616a;">url </span><span style="color:#d08770;">type</span><span>=&quot;</span><span style="color:#a3be8c;">homepage</span><span>&quot;&gt;https://example.com/my-app&lt;/</span><span style="color:#bf616a;">url</span><span>&gt;
</span><span>  &lt;</span><span style="color:#bf616a;">url </span><span style="color:#d08770;">type</span><span>=&quot;</span><span style="color:#a3be8c;">bugtracker</span><span>&quot;&gt;https://github.com/example/my-app/issues&lt;/</span><span style="color:#bf616a;">url</span><span>&gt;
</span><span>  &lt;</span><span style="color:#bf616a;">url </span><span style="color:#d08770;">type</span><span>=&quot;</span><span style="color:#a3be8c;">donation</span><span>&quot;&gt;https://example.com/donate&lt;/</span><span style="color:#bf616a;">url</span><span>&gt;
</span><span>  &lt;</span><span style="color:#bf616a;">url </span><span style="color:#d08770;">type</span><span>=&quot;</span><span style="color:#a3be8c;">help</span><span>&quot;&gt;https://example.com/my-app/help&lt;/</span><span style="color:#bf616a;">url</span><span>&gt;
</span><span>  &lt;</span><span style="color:#bf616a;">url </span><span style="color:#d08770;">type</span><span>=&quot;</span><span style="color:#a3be8c;">translate</span><span>&quot;&gt;https://example.com/my-app/translate&lt;/</span><span style="color:#bf616a;">url</span><span>&gt;
</span><span>  
</span><span>  &lt;</span><span style="color:#bf616a;">developer_name</span><span>&gt;Your Name&lt;/</span><span style="color:#bf616a;">developer_name</span><span>&gt;
</span><span>  &lt;</span><span style="color:#bf616a;">developer </span><span style="color:#d08770;">id</span><span>=&quot;</span><span style="color:#a3be8c;">com.example</span><span>&quot;&gt;
</span><span>    &lt;</span><span style="color:#bf616a;">name</span><span>&gt;Your Name&lt;/</span><span style="color:#bf616a;">name</span><span>&gt;
</span><span>  &lt;/</span><span style="color:#bf616a;">developer</span><span>&gt;
</span><span>  
</span><span>  &lt;</span><span style="color:#bf616a;">update_contact</span><span>&gt;your.email@example.com&lt;/</span><span style="color:#bf616a;">update_contact</span><span>&gt;
</span><span>  
</span><span>  &lt;</span><span style="color:#bf616a;">releases</span><span>&gt;
</span><span>    &lt;</span><span style="color:#bf616a;">release </span><span style="color:#d08770;">version</span><span>=&quot;</span><span style="color:#a3be8c;">1.0.0</span><span>&quot; </span><span style="color:#d08770;">date</span><span>=&quot;</span><span style="color:#a3be8c;">2025-01-15</span><span>&quot;&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">description</span><span>&gt;
</span><span>        &lt;</span><span style="color:#bf616a;">p</span><span>&gt;Initial release&lt;/</span><span style="color:#bf616a;">p</span><span>&gt;
</span><span>        &lt;</span><span style="color:#bf616a;">ul</span><span>&gt;
</span><span>          &lt;</span><span style="color:#bf616a;">li</span><span>&gt;Create and manage tasks&lt;/</span><span style="color:#bf616a;">li</span><span>&gt;
</span><span>          &lt;</span><span style="color:#bf616a;">li</span><span>&gt;Set reminders&lt;/</span><span style="color:#bf616a;">li</span><span>&gt;
</span><span>          &lt;</span><span style="color:#bf616a;">li</span><span>&gt;Dark mode support&lt;/</span><span style="color:#bf616a;">li</span><span>&gt;
</span><span>        &lt;/</span><span style="color:#bf616a;">ul</span><span>&gt;
</span><span>      &lt;/</span><span style="color:#bf616a;">description</span><span>&gt;
</span><span>    &lt;/</span><span style="color:#bf616a;">release</span><span>&gt;
</span><span>  &lt;/</span><span style="color:#bf616a;">releases</span><span>&gt;
</span><span>  
</span><span>  &lt;</span><span style="color:#bf616a;">content_rating </span><span style="color:#d08770;">type</span><span>=&quot;</span><span style="color:#a3be8c;">oars-1.1</span><span>&quot;/&gt;
</span><span>  
</span><span>  &lt;</span><span style="color:#bf616a;">recommends</span><span>&gt;
</span><span>    &lt;</span><span style="color:#bf616a;">control</span><span>&gt;keyboard&lt;/</span><span style="color:#bf616a;">control</span><span>&gt;
</span><span>    &lt;</span><span style="color:#bf616a;">control</span><span>&gt;pointing&lt;/</span><span style="color:#bf616a;">control</span><span>&gt;
</span><span>    &lt;</span><span style="color:#bf616a;">control</span><span>&gt;touch&lt;/</span><span style="color:#bf616a;">control</span><span>&gt;
</span><span>  &lt;/</span><span style="color:#bf616a;">recommends</span><span>&gt;
</span><span>  
</span><span>  &lt;</span><span style="color:#bf616a;">requires</span><span>&gt;
</span><span>    &lt;</span><span style="color:#bf616a;">display_length </span><span style="color:#d08770;">compare</span><span>=&quot;</span><span style="color:#a3be8c;">ge</span><span>&quot;&gt;360&lt;/</span><span style="color:#bf616a;">display_length</span><span>&gt;
</span><span>  &lt;/</span><span style="color:#bf616a;">requires</span><span>&gt;
</span><span>  
</span><span>  &lt;</span><span style="color:#bf616a;">branding</span><span>&gt;
</span><span>    &lt;</span><span style="color:#bf616a;">color </span><span style="color:#d08770;">type</span><span>=&quot;</span><span style="color:#a3be8c;">primary</span><span>&quot; </span><span style="color:#d08770;">scheme_preference</span><span>=&quot;</span><span style="color:#a3be8c;">light</span><span>&quot;&gt;#3584e4&lt;/</span><span style="color:#bf616a;">color</span><span>&gt;
</span><span>    &lt;</span><span style="color:#bf616a;">color </span><span style="color:#d08770;">type</span><span>=&quot;</span><span style="color:#a3be8c;">primary</span><span>&quot; </span><span style="color:#d08770;">scheme_preference</span><span>=&quot;</span><span style="color:#a3be8c;">dark</span><span>&quot;&gt;#1c71d8&lt;/</span><span style="color:#bf616a;">color</span><span>&gt;
</span><span>  &lt;/</span><span style="color:#bf616a;">branding</span><span>&gt;
</span><span>&lt;/</span><span style="color:#bf616a;">component</span><span>&gt;
</span></code></pre>
<h3 id="flatpak-manifest">Flatpak Manifest</h3>
<p><strong>com.example.MyApp.json</strong>:</p>
<pre data-lang="json" style="background-color:#2b303b;color:#c0c5ce;" class="language-json "><code class="language-json" data-lang="json"><span>{
</span><span>    &quot;</span><span style="color:#a3be8c;">app-id</span><span>&quot;: &quot;</span><span style="color:#a3be8c;">com.example.MyApp</span><span>&quot;,
</span><span>    &quot;</span><span style="color:#a3be8c;">runtime</span><span>&quot;: &quot;</span><span style="color:#a3be8c;">org.gnome.Platform</span><span>&quot;,
</span><span>    &quot;</span><span style="color:#a3be8c;">runtime-version</span><span>&quot;: &quot;</span><span style="color:#a3be8c;">47</span><span>&quot;,
</span><span>    &quot;</span><span style="color:#a3be8c;">sdk</span><span>&quot;: &quot;</span><span style="color:#a3be8c;">org.gnome.Sdk</span><span>&quot;,
</span><span>    &quot;</span><span style="color:#a3be8c;">sdk-extensions</span><span>&quot;: [
</span><span>        &quot;</span><span style="color:#a3be8c;">org.freedesktop.Sdk.Extension.rust-stable</span><span>&quot;
</span><span>    ],
</span><span>    &quot;</span><span style="color:#a3be8c;">command</span><span>&quot;: &quot;</span><span style="color:#a3be8c;">my-app</span><span>&quot;,
</span><span>    &quot;</span><span style="color:#a3be8c;">finish-args</span><span>&quot;: [
</span><span>        &quot;</span><span style="color:#a3be8c;">--share=ipc</span><span>&quot;,
</span><span>        &quot;</span><span style="color:#a3be8c;">--socket=fallback-x11</span><span>&quot;,
</span><span>        &quot;</span><span style="color:#a3be8c;">--socket=wayland</span><span>&quot;,
</span><span>        &quot;</span><span style="color:#a3be8c;">--device=dri</span><span>&quot;,
</span><span>        &quot;</span><span style="color:#a3be8c;">--share=network</span><span>&quot;,
</span><span>        &quot;</span><span style="color:#a3be8c;">--filesystem=xdg-documents</span><span>&quot;,
</span><span>        &quot;</span><span style="color:#a3be8c;">--filesystem=xdg-download</span><span>&quot;,
</span><span>        &quot;</span><span style="color:#a3be8c;">--talk-name=org.freedesktop.Notifications</span><span>&quot;,
</span><span>        &quot;</span><span style="color:#a3be8c;">--talk-name=org.freedesktop.secrets</span><span>&quot;
</span><span>    ],
</span><span>    &quot;</span><span style="color:#a3be8c;">build-options</span><span>&quot;: {
</span><span>        &quot;</span><span style="color:#a3be8c;">append-path</span><span>&quot;: &quot;</span><span style="color:#a3be8c;">/usr/lib/sdk/rust-stable/bin</span><span>&quot;,
</span><span>        &quot;</span><span style="color:#a3be8c;">env</span><span>&quot;: {
</span><span>            &quot;</span><span style="color:#a3be8c;">CARGO_HOME</span><span>&quot;: &quot;</span><span style="color:#a3be8c;">/run/build/my-app/cargo</span><span>&quot;
</span><span>        }
</span><span>    },
</span><span>    &quot;</span><span style="color:#a3be8c;">modules</span><span>&quot;: [
</span><span>        {
</span><span>            &quot;</span><span style="color:#a3be8c;">name</span><span>&quot;: &quot;</span><span style="color:#a3be8c;">my-app</span><span>&quot;,
</span><span>            &quot;</span><span style="color:#a3be8c;">buildsystem</span><span>&quot;: &quot;</span><span style="color:#a3be8c;">meson</span><span>&quot;,
</span><span>            &quot;</span><span style="color:#a3be8c;">config-opts</span><span>&quot;: [
</span><span>                &quot;</span><span style="color:#a3be8c;">-Dprofile=release</span><span>&quot;
</span><span>            ],
</span><span>            &quot;</span><span style="color:#a3be8c;">sources</span><span>&quot;: [
</span><span>                {
</span><span>                    &quot;</span><span style="color:#a3be8c;">type</span><span>&quot;: &quot;</span><span style="color:#a3be8c;">git</span><span>&quot;,
</span><span>                    &quot;</span><span style="color:#a3be8c;">url</span><span>&quot;: &quot;</span><span style="color:#a3be8c;">https://github.com/example/my-app.git</span><span>&quot;,
</span><span>                    &quot;</span><span style="color:#a3be8c;">tag</span><span>&quot;: &quot;</span><span style="color:#a3be8c;">v1.0.0</span><span>&quot;
</span><span>                }
</span><span>            ]
</span><span>        }
</span><span>    ]
</span><span>}
</span></code></pre>
<h3 id="building-on-arch-linux">Building on Arch Linux</h3>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#65737e;"># Install build dependencies
</span><span style="color:#bf616a;">sudo</span><span> pacman</span><span style="color:#bf616a;"> -S</span><span> meson ninja gtk4 libadwaita rust cargo
</span><span>
</span><span style="color:#65737e;"># Clone repository
</span><span style="color:#bf616a;">git</span><span> clone https://github.com/example/my-app.git
</span><span style="color:#96b5b4;">cd</span><span> my-app
</span><span>
</span><span style="color:#65737e;"># Build with Meson
</span><span style="color:#bf616a;">meson</span><span> setup builddir</span><span style="color:#bf616a;"> --prefix</span><span>=/usr
</span><span style="color:#bf616a;">meson</span><span> compile</span><span style="color:#bf616a;"> -C</span><span> builddir
</span><span>
</span><span style="color:#65737e;"># Install
</span><span style="color:#bf616a;">sudo</span><span> meson install</span><span style="color:#bf616a;"> -C</span><span> builddir
</span><span>
</span><span style="color:#65737e;"># Or create a PKGBUILD for Arch
</span></code></pre>
<h3 id="pkgbuild-for-arch-linux">PKGBUILD for Arch Linux</h3>
<p><strong>PKGBUILD</strong>:</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#65737e;"># Maintainer: Your Name &lt;your.email@example.com&gt;
</span><span>
</span><span style="color:#bf616a;">pkgname</span><span>=</span><span style="color:#a3be8c;">my-app
</span><span style="color:#bf616a;">pkgver</span><span>=</span><span style="color:#a3be8c;">1.0.0
</span><span style="color:#bf616a;">pkgrel</span><span>=</span><span style="color:#a3be8c;">1
</span><span style="color:#bf616a;">pkgdesc</span><span>=&quot;</span><span style="color:#a3be8c;">A simple task management application for GNOME</span><span>&quot;
</span><span style="color:#bf616a;">arch</span><span>=(&#39;</span><span style="color:#a3be8c;">x86_64</span><span>&#39;)
</span><span style="color:#bf616a;">url</span><span>=&quot;</span><span style="color:#a3be8c;">https://github.com/example/my-app</span><span>&quot;
</span><span style="color:#bf616a;">license</span><span>=(&#39;</span><span style="color:#a3be8c;">GPL-3.0-or-later</span><span>&#39;)
</span><span style="color:#bf616a;">depends</span><span>=(&#39;</span><span style="color:#a3be8c;">gtk4</span><span>&#39; &#39;</span><span style="color:#a3be8c;">libadwaita</span><span>&#39; &#39;</span><span style="color:#a3be8c;">sqlite</span><span>&#39;)
</span><span style="color:#bf616a;">makedepends</span><span>=(&#39;</span><span style="color:#a3be8c;">meson</span><span>&#39; &#39;</span><span style="color:#a3be8c;">cargo</span><span>&#39; &#39;</span><span style="color:#a3be8c;">rust</span><span>&#39;)
</span><span style="color:#bf616a;">source</span><span>=(&quot;$</span><span style="color:#bf616a;">pkgname</span><span style="color:#a3be8c;">-</span><span>$</span><span style="color:#bf616a;">pkgver</span><span style="color:#a3be8c;">.tar.gz::</span><span>$</span><span style="color:#bf616a;">url</span><span style="color:#a3be8c;">/archive/v</span><span>$</span><span style="color:#bf616a;">pkgver</span><span style="color:#a3be8c;">.tar.gz</span><span>&quot;)
</span><span style="color:#bf616a;">sha256sums</span><span>=(&#39;</span><span style="color:#a3be8c;">SKIP</span><span>&#39;)
</span><span>
</span><span style="color:#8fa1b3;">build</span><span>() {
</span><span>    </span><span style="color:#96b5b4;">cd </span><span>&quot;$</span><span style="color:#bf616a;">pkgname</span><span style="color:#a3be8c;">-</span><span>$</span><span style="color:#bf616a;">pkgver</span><span>&quot;
</span><span>    </span><span style="color:#bf616a;">arch-meson</span><span> . build
</span><span>    </span><span style="color:#bf616a;">meson</span><span> compile</span><span style="color:#bf616a;"> -C</span><span> build
</span><span>}
</span><span>
</span><span style="color:#8fa1b3;">check</span><span>() {
</span><span>    </span><span style="color:#96b5b4;">cd </span><span>&quot;$</span><span style="color:#bf616a;">pkgname</span><span style="color:#a3be8c;">-</span><span>$</span><span style="color:#bf616a;">pkgver</span><span>&quot;
</span><span>    </span><span style="color:#bf616a;">meson</span><span> test</span><span style="color:#bf616a;"> -C</span><span> build</span><span style="color:#bf616a;"> --print-errorlogs
</span><span>}
</span><span>
</span><span style="color:#8fa1b3;">package</span><span>() {
</span><span>    </span><span style="color:#96b5b4;">cd </span><span>&quot;$</span><span style="color:#bf616a;">pkgname</span><span style="color:#a3be8c;">-</span><span>$</span><span style="color:#bf616a;">pkgver</span><span>&quot;
</span><span>    </span><span style="color:#bf616a;">meson</span><span> install</span><span style="color:#bf616a;"> -C</span><span> build</span><span style="color:#bf616a;"> --destdir </span><span>&quot;$</span><span style="color:#bf616a;">pkgdir</span><span>&quot;
</span><span>}
</span></code></pre>
<h3 id="building-flatpak">Building Flatpak</h3>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#65737e;"># Install flatpak and flatpak-builder
</span><span style="color:#bf616a;">sudo</span><span> pacman</span><span style="color:#bf616a;"> -S</span><span> flatpak flatpak-builder
</span><span>
</span><span style="color:#65737e;"># Add Flathub repository
</span><span style="color:#bf616a;">flatpak</span><span> remote-add</span><span style="color:#bf616a;"> --if-not-exists</span><span> flathub https://flathub.org/repo/flathub.flatpakrepo
</span><span>
</span><span style="color:#65737e;"># Install GNOME SDK and Platform
</span><span style="color:#bf616a;">flatpak</span><span> install flathub org.gnome.Platform//47 org.gnome.Sdk//47
</span><span>
</span><span style="color:#65737e;"># Build Flatpak
</span><span style="color:#bf616a;">flatpak-builder --user --install --force-clean</span><span> build-dir com.example.MyApp.json
</span><span>
</span><span style="color:#65737e;"># Run Flatpak
</span><span style="color:#bf616a;">flatpak</span><span> run com.example.MyApp
</span><span>
</span><span style="color:#65737e;"># Export as bundle
</span><span style="color:#bf616a;">flatpak-builder --repo</span><span>=repo</span><span style="color:#bf616a;"> --force-clean</span><span> build-dir com.example.MyApp.json
</span><span style="color:#bf616a;">flatpak</span><span> build-bundle repo my-app.flatpak com.example.MyApp
</span><span>
</span><span style="color:#65737e;"># Test the bundle
</span><span style="color:#bf616a;">flatpak</span><span> install my-app.flatpak
</span></code></pre>
<h3 id="continuous-integration">Continuous Integration</h3>
<p><strong>.github/workflows/ci.yml</strong>:</p>
<pre data-lang="yaml" style="background-color:#2b303b;color:#c0c5ce;" class="language-yaml "><code class="language-yaml" data-lang="yaml"><span style="color:#bf616a;">name</span><span>: </span><span style="color:#a3be8c;">CI
</span><span>
</span><span style="color:#d08770;">on</span><span>:
</span><span>  </span><span style="color:#bf616a;">push</span><span>:
</span><span>    </span><span style="color:#bf616a;">branches</span><span>: [ </span><span style="color:#a3be8c;">main </span><span>]
</span><span>  </span><span style="color:#bf616a;">pull_request</span><span>:
</span><span>    </span><span style="color:#bf616a;">branches</span><span>: [ </span><span style="color:#a3be8c;">main </span><span>]
</span><span>
</span><span style="color:#bf616a;">jobs</span><span>:
</span><span>  </span><span style="color:#bf616a;">build</span><span>:
</span><span>    </span><span style="color:#bf616a;">runs-on</span><span>: </span><span style="color:#a3be8c;">ubuntu-latest
</span><span>    </span><span style="color:#bf616a;">container</span><span>:
</span><span>      </span><span style="color:#bf616a;">image</span><span>: </span><span style="color:#a3be8c;">ghcr.io/gnome/gnome-runtime-images/gnome:47
</span><span>      
</span><span>    </span><span style="color:#bf616a;">steps</span><span>:
</span><span>    - </span><span style="color:#bf616a;">uses</span><span>: </span><span style="color:#a3be8c;">actions/checkout@v3
</span><span>    
</span><span>    - </span><span style="color:#bf616a;">name</span><span>: </span><span style="color:#a3be8c;">Install dependencies
</span><span>      </span><span style="color:#bf616a;">run</span><span>: </span><span style="color:#b48ead;">|
</span><span style="color:#a3be8c;">        dnf install -y meson ninja-build gtk4-devel libadwaita-devel \
</span><span style="color:#a3be8c;">                       rust cargo sqlite-devel
</span><span style="color:#a3be8c;">    
</span><span>    - </span><span style="color:#bf616a;">name</span><span>: </span><span style="color:#a3be8c;">Build
</span><span>      </span><span style="color:#bf616a;">run</span><span>: </span><span style="color:#b48ead;">|
</span><span style="color:#a3be8c;">        meson setup builddir
</span><span style="color:#a3be8c;">        meson compile -C builddir
</span><span style="color:#a3be8c;">    
</span><span>    - </span><span style="color:#bf616a;">name</span><span>: </span><span style="color:#a3be8c;">Test
</span><span>      </span><span style="color:#bf616a;">run</span><span>: </span><span style="color:#b48ead;">|
</span><span style="color:#a3be8c;">        meson test -C builddir --print-errorlogs
</span><span style="color:#a3be8c;">    
</span><span>    - </span><span style="color:#bf616a;">name</span><span>: </span><span style="color:#a3be8c;">Build Flatpak
</span><span>      </span><span style="color:#bf616a;">uses</span><span>: </span><span style="color:#a3be8c;">flatpak/flatpak-github-actions/flatpak-builder@v6
</span><span>      </span><span style="color:#bf616a;">with</span><span>:
</span><span>        </span><span style="color:#bf616a;">bundle</span><span>: </span><span style="color:#a3be8c;">my-app.flatpak
</span><span>        </span><span style="color:#bf616a;">manifest-path</span><span>: </span><span style="color:#a3be8c;">com.example.MyApp.json
</span><span>        </span><span style="color:#bf616a;">cache-key</span><span>: </span><span style="color:#a3be8c;">flatpak-builder-${{ github.sha }}
</span></code></pre>
<h3 id="translation-support">Translation Support</h3>
<p><strong>po/POTFILES.in</strong>:</p>
<pre style="background-color:#2b303b;color:#c0c5ce;"><code><span>src/main.rs
</span><span>src/window.rs
</span><span>src/application.rs
</span><span>data/com.example.MyApp.desktop.in
</span><span>data/com.example.MyApp.metainfo.xml.in
</span><span>data/ui/window.ui
</span></code></pre>
<p><strong>po/LINGUAS</strong>:</p>
<pre style="background-color:#2b303b;color:#c0c5ce;"><code><span>de
</span><span>es
</span><span>fr
</span><span>pt_BR
</span><span>ru
</span><span>zh_CN
</span></code></pre>
<p><strong>Extract translations</strong>:</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#65737e;"># Generate POT file
</span><span style="color:#bf616a;">xgettext --files-from</span><span>=po/POTFILES.in</span><span style="color:#bf616a;"> --output</span><span>=po/my-app.pot
</span><span>
</span><span style="color:#65737e;"># Update PO files
</span><span style="color:#b48ead;">for</span><span> lang </span><span style="color:#b48ead;">in </span><span>$(</span><span style="color:#bf616a;">cat</span><span> po/LINGUAS); </span><span style="color:#b48ead;">do
</span><span>    </span><span style="color:#bf616a;">msgmerge --update</span><span> po/$</span><span style="color:#bf616a;">lang</span><span>.po po/my-app.pot
</span><span style="color:#b48ead;">done
</span></code></pre>
<h2 id="conclusion">Conclusion</h2>
<p>This handbook has covered the essential aspects of creating Libadwaita applications for GNOME:</p>
<ol>
<li><strong>Foundation</strong>: Understanding Libadwaita, GNOME HIG, and development environment setup</li>
<li><strong>Application Structure</strong>: Proper project organization, naming conventions, and build systems</li>
<li><strong>Widgets</strong>: From simple to complex, understanding the full widget ecosystem</li>
<li><strong>Layouts</strong>: Organizing content with modern, adaptive containers</li>
<li><strong>Patterns</strong>: Implementing standard GNOME application patterns</li>
<li><strong>System Integration</strong>: D-Bus, notifications, portals, and system settings</li>
<li><strong>Data Management</strong>: GSettings, databases, and file handling</li>
<li><strong>Advanced Features</strong>: Custom widgets, animations, drag and drop, and accessibility</li>
<li><strong>Distribution</strong>: Packaging for Flatpak and native Linux distributions</li>
</ol>
<h3 id="best-practices-summary">Best Practices Summary</h3>
<ul>
<li><strong>Follow GNOME HIG</strong>: Your app should feel at home in GNOME</li>
<li><strong>Use Libadwaita widgets</strong>: They provide consistency and adaptability</li>
<li><strong>Support dark mode</strong>: It's automatic with Libadwaita</li>
<li><strong>Make it accessible</strong>: Use proper labels, roles, and keyboard navigation</li>
<li><strong>Test on mobile</strong>: Libadwaita apps should work on phones too</li>
<li><strong>Respect user preferences</strong>: Use GSettings and system settings</li>
<li><strong>Handle errors gracefully</strong>: Show helpful messages with toasts and dialogs</li>
<li><strong>Provide keyboard shortcuts</strong>: Power users will thank you</li>
<li><strong>Document your code</strong>: Future you will thank you</li>
<li><strong>Package as Flatpak</strong>: It's the preferred distribution method for GNOME apps</li>
</ul>
<h3 id="resources">Resources</h3>
<ul>
<li><strong>GNOME Developer Documentation</strong>: https://developer.gnome.org</li>
<li><strong>Libadwaita Documentation</strong>: https://gnome.pages.gitlab.gnome.org/libadwaita/doc/</li>
<li><strong>GNOME Human Interface Guidelines</strong>: https://developer.gnome.org/hig/</li>
<li><strong>GTK Documentation</strong>: https://docs.gtk.org/gtk4/</li>
<li><strong>Rust GTK Bindings</strong>: https://gtk-rs.org/</li>
<li><strong>Python GTK Bindings</strong>: https://pygobject.readthedocs.io/</li>
<li><strong>GNOME Builder</strong>: The official IDE for GNOME development</li>
<li><strong>Flatpak Documentation</strong>: https://docs.flatpak.org/</li>
</ul>
<h3 id="community">Community</h3>
<ul>
<li><strong>GNOME Discourse</strong>: https://discourse.gnome.org/</li>
<li><strong>Matrix Chat</strong>: #gnome-hackers:gnome.org</li>
<li><strong>GitLab</strong>: https://gitlab.gnome.org/</li>
<li><strong>GNOME Circle</strong>: Submit your app to be part of the GNOME ecosystem</li>
</ul>
<p><strong>Happy coding! Welcome to the GNOME developer community!</strong></p>
</section>
  <hr />
  <!-- Post Taxonomies -->

  <!-- Begin Page End inject -->
  
  <!-- End Page End inject -->
</article>

  </main>
  <!-- Footer -->
<footer class="mx-auto flex lg:mt-5 max-w-3xl flex-wrap items-center px-4 py-3 text-sm opacity-60">
  <div class="mr-auto basis-full lg:basis-1/2">
  © <time datetime="2025">2025</time> HajMousa | <a href="https://creativecommons.org/licenses/by-sa/4.0/deed">CC BY-SA 4.0</a>
  </div>
  <div class="flex basis-full lg:basis-1/2 lg:justify-end">
    <span class="mr-6 lg:ml-6">
      <a class="link" href="https://www.getzola.org/" target="_blank">Powered by Zola</a>
    </span>
    <a class="link" href="https://www.getzola.org/themes/linkita/" target="_blank">&#9998; Linkita</a>
  </div>
  <!-- Begin Footer inject -->
  
  <!-- End Footer inject -->
</footer>

  
  <link rel="stylesheet" href="https://blog.hajmousa.ir/katex/katex.min.css?h=e189fd0238811989c364" />
  <script defer src="https://blog.hajmousa.ir/katex/katex.min.js?h=6b909443e6c8f6e5d24c"></script>
  <script defer src="https://blog.hajmousa.ir/katex/contrib/auto-render.min.js?h=bb53eb953394531aae36"></script>
  <script>document.addEventListener("DOMContentLoaded", window.zolaTheme.katex.init);</script>

  <!-- Begin Body End inject -->
  
  <!-- End Body End inject -->
</body>

</html>
